#
# $XORP$
#

SubDir TOP libxorp ;

REGRESSION_TESTS =
	test_asyncio
	test_callback
	test_config_param
	test_heap
	test_ipnet
	test_ipv4
	test_ipv4net
	test_ipv6
	test_ipv6net
	test_ipvx
	test_ipvxnet
	test_mac
	test_observers
	test_profile
	test_ref_ptr
	test_ref_trie
	test_run_command
	test_service
	test_task
	test_test_main
	test_time_slice
	test_timer
	test_timeval
	test_trie
	test_types
	test_utils
	test_vif
	;

if $(MAKE_CHECK) {
 local _test ;
 for _test in $(REGRESSION_TESTS) {
	Main $(_test) : $(_test).cc ;
 }
}

Library libxorp : 
	debug.c ether_compat.c gai_strerror.c getopt.c
	inet_ntop.c inet_pton.c random.c strptime.c utility.c win_io.c
	xlog.c
	asyncio.cc buffered_asyncio.cc c_format.cc callback.cc
	clock.cc eventloop.cc exceptions.cc heap.cc
	ipnet.cc ipv4.cc ipv6.cc ipvx.cc mac.cc nexthop.cc popen.cc
	profile.cc ref_ptr.cc round_robin.cc run_command.cc
	safe_callback_obj.cc selector.cc service.cc task.cc
	time_slice.cc timer.cc token.cc transaction.cc
	utils.cc vif.cc win_dispatcher.cc
	;

if $(MAKE_CHECK) {
 LinkLibraries $(REGRESSION_TESTS) : libxorp ;
}
