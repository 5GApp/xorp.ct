#
# $XORP$
#

SubDir TOP libproto ;
if $(MAKE_CHECK) {
 SubIncludeOnce TOP libxorp ;
}
SubDir TOP libproto ;

# XXX: -Werror ?
Library libproto : 
	checksum.c
	packet.cc proto_node_cli.cc proto_register.cc
	proto_state.cc proto_unit.cc spt.cc
	;

if $(MAKE_CHECK) {
 LINKLIBS_REGRESSION_COMMON =
	libproto
        libxorp
        ;

 REGRESSION_TESTS =
	test_checksum
	test_config_node_id
	test_packet
	test_spt
        ;

 local _test ;
 for _test in [ FGristFiles $(REGRESSION_TESTS) ] {
        Main $(_test) : $(_test).cc ;
        LinkLibraries $(_test) : $(LINKLIBS_REGRESSION_COMMON) ;
 }
} # MAKE_CHECK
