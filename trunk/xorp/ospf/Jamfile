#
# $XORP: xorp/ospf/Jamfile,v 1.4 2007/10/04 20:46:16 pavlin Exp $
#

SubDir TOP ospf ;
SubIncludeOnce TOP libxorp ;
SubIncludeOnce TOP libcomm ;
SubIncludeOnce TOP xrl interfaces ;
SubIncludeOnce TOP xrl targets ;
SubIncludeOnce TOP libxipc ;
SubIncludeOnce TOP libfeaclient ;
SubIncludeOnce TOP libproto ;
SubIncludeOnce TOP policy backend ;
SubIncludeOnce TOP policy common ;
SubDir TOP ospf ;

Library libospf : 
	auth.cc
	area_router.cc
	external.cc
	fletcher_checksum.cc
	lsa.cc
	ospf.cc
	packet.cc
	peer_manager.cc
	peer.cc
	policy_varrw.cc
	routing_table.cc
	xrl_io.cc
	xrl_target.cc
	vlink.cc
	;

LINKLIBS_OSPF_COMMON = 
	libospf
	libospfv2base
	libospfv3base
	libpolicybackend
	libpolicycommon
	libfeaclient
	libribxif
	libfindereventnotifierxif
	libfeaifmgrmirrorxif
	libfeaifmgrreplicatorxif
	libprofileclientxif
	libfearawpkt4xif
	libfearawpkt6xif
	libfeaifmgrmirrorbase
	libproto
	libxipc
	libcomm
	libxorp
	;

Main xorp_ospfv2 : xorp_ospfv2.cc ;
Main xorp_ospfv3 : xorp_ospfv3.cc ;

LinkLibraries xorp_ospfv2 xorp_ospfv3 :
	$(LINKLIBS_OSPF_COMMON)
	;

if $(MAKE_CHECK) {
 Main test_checksum : test_checksum.cc ;
 Main test_packet : test_packet.cc ;
 Main test_peering : test_peering.cc ;
 Main test_routing : test_routing.cc ;
 Main test_routing_database : test_routing_database.cc ;
 Main test_routing_table : test_routing.cc ;
 Main test_build_lsa_main : test_build_lsa.cc test_build_lsa_main.cc ;
 Main test_routing_interactive : test_routing_interactive.cc test_build_lsa.cc ;
 LinkLibraries	test_checksum test_packet test_peering test_routing
		test_routing_table test_build_lsa_main
		test_routing_interactive : $(LINKLIBS_OSPF_COMMON) ;
} # MAKE_CHECK

InstallBin $(PREFIX)/ospf : xorp_ospfv2 xorp_ospfv3 ;

SubIncludeOnce TOP ospf tools ;
