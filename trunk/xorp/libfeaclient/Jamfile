#
# $XORP$
#

SubDir TOP libfeaclient ;
if $(MAKE_CHECK) {
  SubIncludeOnce TOP libcomm ;
  SubIncludeOnce TOP libxorp ;
  SubIncludeOnce TOP xrl interfaces ;
  SubIncludeOnce TOP xrl targets ;
  SubIncludeOnce TOP libxipc ;
}
SubDir TOP libfeaclient ;

Library libfeaclient : 
	ifmgr_atoms.cc
	ifmgr_cmds.cc
	ifmgr_cmd_queue.cc
	ifmgr_xrl_replicator.cc
	ifmgr_xrl_mirror.cc
	;

if $(MAKE_CHECK) {
 LINKLIBS_REGRESSION_COMMON =
	libxipc
	libxorp
	libcomm
	;

 Main test_local_copy : test_local_copy.cc ;
 LinkLibraries test_local_copy :
	libfeaclient
	libfeaifmgrmirrorxif
	$(LINKLIBS_REGRESSION_COMMON)
	;

 Main test_remote_copy : test_remote_copy.cc ;
 LinkLibraries test_remote_copy :
	libfeaclient
	libtestfeaifmgrmirrorbase
	libfeaifmgrreplicatorxif
	libfeaifmgrmirrorxif
	libfeaifmgrmirrorbase
	libfinder
	$(LINKLIBS_REGRESSION_COMMON)
	;
}
