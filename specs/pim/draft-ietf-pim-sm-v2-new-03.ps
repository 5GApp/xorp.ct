%!PS-Adobe-3.0
%%Creator: groff version 1.16.1
%%CreationDate: Fri Jul 20 12:04:52 2001
%%DocumentNeededResources: font Courier-Bold
%%+ font Times-Bold
%%+ font Times-Roman
%%+ font Courier
%%+ font Times-Italic
%%+ font Symbol
%%DocumentSuppliedResources: file starg-assert.ps
%%+ file sg-assert.ps
%%+ file sgrpt-override.ps
%%+ file sending-sg-std.ps
%%+ file sending-starg-std.ps
%%+ file sending-starstarrp-std.ps
%%+ file sgrpt-std.ps
%%+ file sg-std.ps
%%+ file starg-std.ps
%%+ file starstarrp-std.ps
%%+ file register-std.ps
%%+ procset grops 1.16 1
%%Pages: 96
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.16 1
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Courier-Bold
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Roman
%%IncludeResource: font Courier
%%IncludeResource: font Times-Italic
%%IncludeResource: font Symbol
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Courier@0 ENC0/Courier RE
/Times-Roman@0 ENC0/Times-Roman RE/Times-Bold@0 ENC0/Times-Bold RE
/Courier-Bold@0 ENC0/Courier-Bold RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Courier-Bold@0 SF(Internet Engineering Task Force)72 85 Q(PIM WG)
210 E 246(INTERNET-DRAFT Bill)72 98 R(Fenner/AT&T)6 E 138
(draft-ietf-pim-sm-v2-new-03.ps Mark)72 111 R(Handley/ACIRI)6 E
(Hugh Holbrook/Cisco)390 124 Q(Isidor Kouvelas/Cisco)378 137 Q
(20 July 2001)432 150 Q(Expires: January 2002)378 163 Q/F1 14
/Times-Bold@0 SF(Pr)113.147 188 Q
(otocol Independent Multicast - Sparse Mode \(PIM-SM\):)-.252 E(Pr)
193.353 201 Q(otocol Speci\214cation \(Re)-.252 E(vised\))-.21 E/F2 11
/Times-Bold@0 SF(Status of this Document)72 246 Q/F3 11/Times-Roman@0 SF
(This document is an Internet-Draft and is in full conformance with all\
 pro)72 262.6 Q(visions of Section 10 of)-.165 E(RFC2026.)72 275.6 Q
(Internet-Drafts are w)72 301.6 Q
(orking documents of the Internet Engineering T)-.11 E(ask F)-.88 E
(orce \(IETF\), its areas,)-.165 E(and its w)72 314.6 Q(orking groups.)
-.11 E(Note that other groups may also distrib)5.5 E(ute w)-.22 E
(orking documents as)-.11 E(Internet-Drafts.)72 327.6 Q
(Internet-Drafts are draft documents v)72 353.6 Q
(alid for a maximum of six months and may be updated,)-.275 E
(replaced, or obsoleted by other documents at an)72 366.6 Q 2.75(yt)
-.165 G 2.75(ime. It)-2.75 F(is inappropriate to use Internet- Drafts)
2.75 E(as reference material or to cite them other than as "w)72 379.6 Q
(ork in progress.")-.11 E
(The list of current Internet-Drafts can be accessed at http://www)72
405.6 Q(.ietf.or)-.715 E(g/ietf/1id-abstracts.txt)-.198 E
(The list of Internet-Draft Shado)72 431.6 Q 2.75(wD)-.275 G
(irectories can be accessed at http://www)-2.75 E(.ietf.or)-.715 E
(g/shado)-.198 E -.715(w.)-.275 G(html.).715 E
(This document is a product of the IETF PIM WG.)72 457.6 Q
(Comments should be addressed to the authors,)5.5 E(or the WG')72 470.6
Q 2.75(sm)-.605 G(ailing list at pim@catarina.usc.edu.)-2.75 E F2
(Abstract)267.534 489.6 Q F3(This document speci\214es Protocol Indepen\
dent Multicast - Sparse Mode \(PIM-SM\).)97 512.2 Q(PIM-SM is a multica\
st routing protocol that can use the underlying unicast routing)97 525.2
Q(information base or a separate multicast-capable routing information \
base.)97 538.2 Q(It b)5.5 E(uilds)-.22 E
(unidirectional shared trees rooted at a Rendezv)97 551.2 Q
(ous Point \(RP\) per group, and)-.22 E
(optionally creates shortest-path trees per source.)97 564.2 Q F2
(Note on PIM-SM status)72 590.2 Q F3
(PIM-SM v2 is currently widely implemented and deplo)72 606.8 Q(yed, b)
-.11 E(ut the e)-.22 E(xisting speci\214cation in RFC)-.165 E
(2362 is insuf)72 619.8 Q
(\214cient to implement from, and is incorrect in a number of aspects.)
-.275 E(This document is)5.5 E 2.75(ac)72 632.8 S
(omplete re-write from RFC 2362, and is intended to obsolete RFC 2362.)
-2.75 E(The authors ha)5.5 E -.165(ve)-.22 G
(attempted to document current practice as f)72 645.8 Q
(ar as possible, b)-.11 E(ut a number of cases ha)-.22 E .33 -.165(ve a)
-.22 H(risen).165 E
(where current practice is clearly incorrect, typically leading to traf)
72 658.8 Q(\214c being black-holed.)-.275 E(In these)5.5 E(cases we di)
72 671.8 Q -.165(ve)-.275 G -.198(rg).165 G 2.75(ef).198 G
(rom current practice, b)-2.75 E(ut al)-.22 E -.11(wa)-.11 G(ys in a w)
.11 E(ay that will interoperate successfully)-.11 E(with the le)72 684.8
Q -.055(ga)-.165 G .33 -.165(cy P).055 H
(IM v2 implementations that we are a).165 E -.11(wa)-.165 G(re of.).11 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 232.471
(elas [P)-.165 F(age 1])-.165 E EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 13/Times-Bold@0 SF -1.196
(Ta)239.126 85 S(ble of Contents)1.196 E/F2 10/Times-Roman@0 SF
(1. Introduction)72 123 Q F0 11(.........................)12.31 G F2(4)
11.5 E(2. T)72 135 Q(erminology)-.7 E F0 11(.........................)
10.23 G F2(4)11.5 E(2.1. De\214nitions)82 147 Q F0 11
(........................)13.55 G F2(4)11.5 E(2.2. Pseudocode Notation)
82 159 Q F0 11(......................).23 G F2(5)11.5 E
(3. PIM-SM Protocol Ov)72 171 Q(ervie)-.15 E(w)-.25 E F0 11
(.....................)3.27 G F2(5)11.5 E(4. Protocol Speci\214cation)72
183 Q F0 11(.......................).64 G F2(8)11.5 E
(4.1. PIM Protocol State)82 195 Q F0 11(......................)8.83 G F2
(9)11.5 E(4.1.1. General Purpose State)92 207 Q F0 11
(....................)6.63 G F2(9)11.5 E(4.1.2. \(*,*,RP\) State)92 219
Q F0 11(......................)11.61 G F2(10)6.5 E(4.1.3. \(*,G\) State)
92 231 Q F0 11(.......................)10.37 G F2(10)6.5 E
(4.1.4. \(S,G\) State)92 243 Q F0 11(.......................)9.81 G F2
(11)6.5 E(4.1.5. \(S,G,rpt\) State)92 255 Q F0 11
(......................)9.95 G F2(12)6.5 E
(4.1.6. State Summarization Macros)92 267 Q F0 11(..................)6.9
G F2(13)6.5 E(4.2. Data P)82 279 Q(ack)-.15 E(et F)-.1 E(orw)-.15 E
(arding Rules)-.1 E F0 11(...................)4.77 G F2(16)6.5 E
(4.2.1. Last hop switcho)92 291 Q -.15(ve)-.15 G 2.5(rt).15 G 2.5(ot)
-2.5 G(he SPT)-2.5 E F0 11(.................)11.22 G F2(18)6.5 E
(4.2.2. Setting and Clearing the \(S,G\) SPT bit)92 303 Q F0 11
(...............)10.08 G F2(18)6.5 E(4.3. PIM Re)82 315 Q
(gister Messages)-.15 E F0 11(.....................)4.41 G F2(19)6.5 E
(4.3.1. Sending Re)92 327 Q(gister Messages from the DR)-.15 E F0 11
(...............)1.36 G F2(19)6.5 E(4.3.2. Recei)92 339 Q(ving Re)-.25 E
(gister Messages at the RP)-.15 E F0 11(...............)7.72 G F2(22)6.5
E(4.4. PIM Join/Prune Messages)82 351 Q F0 11(....................)8.56
G F2(24)6.5 E(4.4.1. Recei)92 363 Q(ving \(*,*,RP\) Join/Prune Messages)
-.25 E F0 11(...............).9 G F2(24)6.5 E(4.4.2. Recei)92 375 Q
(ving \(*,G\) Join/Prune Messages)-.25 E F0 11(...............)13.41 G
F2(27)6.5 E(4.4.3. Recei)92 387 Q(ving \(S,G\) Join/Prune Messages)-.25
E F0 11(...............)12.85 G F2(30)6.5 E(4.4.4. Recei)92 399 Q
(ving \(S,G,rpt\) Join/Prune Messages)-.25 E F0 11(..............)12.99
G F2(32)6.5 E(4.4.5. Sending \(*,*,RP\) Join/Prune Messages)92 411 Q F0
11(...............)8.42 G F2(36)6.5 E
(4.4.6. Sending \(*,G\) Join/Prune Messages)92 423 Q F0 11
(................)7.18 G F2(40)6.5 E
(4.4.7. Sending \(S,G\) Join/Prune Messages)92 435 Q F0 11
(................)6.62 G F2(43)6.5 E
(4.4.8. \(S,G,rpt\) Periodic Messages)92 447 Q F0 11(..................)
10.24 G F2(47)6.5 E(4.4.9. State Machine for \(S,G,rpt\) T)92 459 Q
(riggered Messages)-.35 E F0 11(............)12.84 G F2(47)6.5 E
(4.5. PIM Assert Messages)82 471 Q F0 11(.....................)12.04 G
F2(51)6.5 E(4.5.1. \(S,G\) Assert Message State Machine)92 483 Q F0 11
(................)3.03 G F2(51)6.5 E
(4.5.2. \(*,G\) Assert Message State Machine)92 495 Q F0 11
(................)3.59 G F2(56)6.5 E(4.5.3. Assert Metrics)92 507 Q F0
11(......................)9.4 G F2(61)6.5 E
(4.5.4. AssertCancel Messages)92 519 Q F0 11(....................).8 G
F2(62)6.5 E(4.5.5. Assert State Macros)92 531 Q F0 11
(.....................)1.21 G F2(62)6.5 E
(4.6. Designated Routers \(DR\) and Hello Messages)82 543 Q F0 11
(..............)10.81 G F2(64)6.5 E(4.6.1. Sending Hello Messages)92 555
Q F0 11(...................)10.37 G F2(64)6.5 E(4.6.2. DR Election)92
567 Q F0 11(.......................)4.53 G F2(65)6.5 E
(4.6.3. Reducing Prune Propag)92 579 Q(ation Delay on LANs)-.05 E F0 11
(.............)10.99 G F2(66)6.5 E(4.7. PIM Bootstrap and RP Disco)82
591 Q -.15(ve)-.15 G(ry).15 E F0 11(..................)6.36 G F2(68)6.5
E(4.7.1. Group-to-RP Mapping)92 603 Q F0 11(....................)4.67 G
F2(69)6.5 E(4.7.2. Hash Function)92 615 Q F0 11(......................)
9.39 G F2(70)6.5 E(4.8. Source-Speci\214c Multicast)82 627 Q F0 11
(....................)9.4 G F2(70)6.5 E
(4.8.1. Protocol Modi\214cations for SSM destination addresses)92 639 Q
F0 11(...........)3.42 G F2(70)6.5 E(4.8.2. PIM-SSM-only Routers)92 651
Q F0 11(...................)13.41 G F2(71)6.5 E(4.9. PIM P)82 663 Q(ack)
-.15 E(et F)-.1 E(ormats)-.15 E F0 11(......................)3.68 G F2
(72)6.5 E(4.9.1. Encoded Source and Group Address F)92 675 Q(ormats)-.15
E F0 11(.............)11.1 G F2(73)6.5 E(4.9.2. Hello Message F)92 687 Q
(ormat)-.15 E F0 11(....................)4.55 G F2(75)6.5 E(4.9.3. Re)92
699 Q(gister Message F)-.15 E(ormat)-.15 E F0 11(...................)
7.34 G F2(77)6.5 E(4.9.4. Re)92 711 Q(gister)-.15 E(-Stop Message F)-.2
E(ormat)-.15 E F0 11(.................)13.37 G F2(78)6.5 E
(4.9.5. Join/Prune Message F)92 723 Q(ormat)-.15 E F0 11
(..................)11.49 G F2(78)6.5 E F0(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 232.471(elas [P)-.165 F(age 2])-.165 E
EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 10/Times-Roman@0 SF
(4.9.5.1. Group Set Source List Rules)102 84 Q F0 11(.................)
4.81 G F1(80)6.5 E(4.9.5.2. Group Set Fragmentation)102 96 Q F0 11
(..................)3.84 G F1(83)6.5 E(4.9.6. Assert Message F)92 108 Q
(ormat)-.15 E F0 11(....................)1.22 G F1(83)6.5 E(4.10. PIM T)
82 120 Q(imers)-.35 E F0 11(........................)4.74 G F1(84)6.5 E
(4.11. T)82 132 Q(imer V)-.35 E(alues)-1.11 E F0 11
(.......................)13.5 G F1(85)6.5 E(5. IAN)72 144 Q 2.5(AC)-.35
G(onsiderations)-2.5 E F0 11(.......................)2.11 G F1(88)6.5 E
(5.1. PIM Address F)82 156 Q(amily)-.15 E F0 11(......................)
1.76 G F1(88)6.5 E(5.2. PIM Hello Options)82 168 Q F0 11
(......................)8.83 G F1(89)6.5 E(6. Security Considerations)72
180 Q F0 11(......................)7.17 G F1(89)6.5 E
(6.1. Attacks based on for)82 192 Q(ged messages)-.18 E F0 11
(..................)3.49 G F1(89)6.5 E(6.1.1. F)92 204 Q(or)-.15 E
(ged link-local messages)-.18 E F0 11(...................).15 G F1(89)
6.5 E(6.1.2. F)92 216 Q(or)-.15 E(ged unicast messages)-.18 E F0 11
(...................)10.15 G F1(89)6.5 E
(6.2. Non-cryptographic Authentication Mechanisms)82 228 Q F0 11
(..............)4.42 G F1(90)6.5 E(6.2.1. Re)92 240 Q(gister Nonces)-.15
E F0 11(......................)2.33 G F1(90)6.5 E
(6.3. Authentication using IPsec)82 252 Q F0 11(....................)
5.23 G F1(90)6.5 E(6.3.1. Protecting link-local multicast messages)92
264 Q F0 11(...............)2.87 G F1(91)6.5 E
(6.3.2. Protecting unicast messages)92 276 Q F0 11(..................)
10.79 G F1(91)6.5 E(6.3.2.1. Re)102 288 Q(gister messages)-.15 E F0 11
(....................)4.55 G F1(91)6.5 E(6.3.2.2. Re)102 300 Q
(gister Stop messages)-.15 E F0 11(..................)11.21 G F1(91)6.5
E(6.4. Denial of Service Attacks)82 312 Q F0 11(....................)
9.97 G F1(92)6.5 E(7. Authors' Addresses)72 324 Q F0 11
(.......................)10.1 G F1(92)6.5 E(8. Ackno)72 336 Q
(wledgments)-.25 E F0 11(........................).76 G F1(92)6.5 E
(9. References)72 348 Q F0 11(..........................)3.58 G F1(93)
6.5 E(10. Inde)72 360 Q(x)-.15 E F0 11(...........................)6.63
G F1(94)6.5 E F0(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
232.471(elas [P)-.165 F(age 3])-.165 E EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(1.)72 85
Q/F2 14/Times-Bold@0 SF(Intr)5.5 E(oduction)-.252 E F0
(This document speci\214es a protocol for ef)72 101.6 Q
(\214ciently routing multicast groups that may span wide-)-.275 E
(area \(and inter)72 114.6 Q(-domain\) internets.)-.22 E
(This protocol is called Protocol Independent Multicast - Sparse)5.5 E(\
Mode \(PIM-SM\) because, although it may use the underlying unicast rou\
ting to pro)72 127.6 Q(vide re)-.165 E -.165(ve)-.275 G(rse-).165 E
(path information for multicast tree b)72 140.6 Q
(uilding, it is not dependent on an)-.22 E 2.75(yp)-.165 G
(articular unicast routing)-2.75 E(protocol.)72 153.6 Q(PIM-SM v)72
170.2 Q(ersion 2 w)-.165 E
(as originally speci\214ed in RFC 2117, and re)-.11 E
(vised in RFC 2362.)-.275 E(This)5.5 E(document is intended to obsolete\
 RFC 2362, and to correct a number of de\214ciencies that ha)72 183.2 Q
-.165(ve)-.22 G(been identi\214ed with the w)72 196.2 Q(ay PIM-SM w)-.11
E(as pre)-.11 E(viously speci\214ed.)-.275 E(As f)5.5 E
(ar as possible, this document)-.11 E
(speci\214es the same protocol as RFC 2362, and only di)72 209.2 Q -.165
(ve)-.275 G -.198(rg).165 G(es from the beha).198 E
(vior intended by RFC)-.22 E(2362 when the pre)72 222.2 Q
(viously speci\214ed beha)-.275 E(vior w)-.22 E(as clearly incorrect.)
-.11 E(Routers implemented)5.5 E(according to the speci\214cation in th\
is document will be able to successfully interoperate with)72 235.2 Q
(routers implemented according to RFC 2362.)72 248.2 Q F1(2.)72 274.2 Q
F2 -1.288(Te)5.5 G(rminology)1.288 E F0(In this document, the k)72 290.8
Q .33 -.165(ey w)-.11 H(ords "MUST", "MUST NO).055 E(T", "REQ)-.44 E
(UIRED", "SHALL", "SHALL)-.11 E(NO)72 303.8 Q(T", "SHOULD", "SHOULD NO)
-.44 E(T", "RECOMMENDED", "MA)-.44 E(Y", and "OPTION)-1.155 E
(AL" are to)-.385 E
(be interpreted as described in RFC 2119 and indicate requirement le)72
316.8 Q -.165(ve)-.275 G(ls for compliant PIM-SM).165 E
(implementations.)72 329.8 Q F1(2.1.)72 355.8 Q/F3 13/Times-Bold@0 SF
(De\214nitions)5.5 E F0(This speci\214cation uses a number of terms to \
refer to the roles of routers participating in PIM-SM.)72 372.4 Q
(The follo)72 385.4 Q(wing terms ha)-.275 E .33 -.165(ve s)-.22 H
(pecial signi\214cance for PIM-SM:).165 E(Rendezv)72 402 Q
(ous Point \(RP\):)-.22 E(An RP is a router that has been con\214gured \
to be used as the root of the non-source-)105 415 Q(speci\214c distrib)
105 428 Q(ution tree for a multicast group.)-.22 E
(Join messages from recei)5.5 E -.165(ve)-.275 G(rs for a group).165 E
(are sent to)105 441 Q -.11(wa)-.275 G(rds the RP).11 E 2.75(,a)-1.221 G
(nd data from senders is sent to the RP so that recei)-2.75 E -.165(ve)
-.275 G(rs can).165 E(disco)105 454 Q -.165(ve)-.165 G 2.75(rw).165 G
(ho the senders are, and start to recei)-2.75 E .33 -.165(ve t)-.275 H
(raf).165 E(\214c destined for the group.)-.275 E
(Designated Router \(DR\):)72 470.6 Q 2.75(As)105 483.6 S
(hared-media LAN lik)-2.75 E 2.75(eE)-.11 G(thernet may ha)-2.75 E .33
-.165(ve m)-.22 H(ultiple PIM-SM routers connected to it.).165 E(If)5.5
E(the LAN has directly connected hosts, then a single one of these rout\
ers, the DR, will act)105 496.6 Q
(on behalf of those hosts with respect to the PIM-SM protocol.)105 509.6
Q 2.75(As)5.5 G(ingle DR is elected per)-2.75 E
(LAN using a simple election process.)105 522.6 Q(MRIB)72 539.2 Q
(Multicast Routing Information Base.)105 552.2 Q
(This is the multicast topology table, which is)5.5 E(typically deri)105
565.2 Q -.165(ve)-.275 G 2.75(df).165 G
(rom the unicast routing table, or routing protocols such as MBGP that)
-2.75 E(carry multicast-speci\214c topology information.)105 578.2 Q
(In PIM-SM this is used to mak)5.5 E 2.75(ed)-.11 G(ecisions)-2.75 E(re)
105 591.2 Q -.055(ga)-.165 G(rding where to forw).055 E
(ard Join/Prune messages.)-.11 E(RPF Neighbor)72 607.8 Q
(RPF stands for "Re)105 620.8 Q -.165(ve)-.275 G(rse P).165 E(ath F)
-.165 E(orw)-.165 E 2.75(arding". The)-.11 F
(RPF Neighbor of a router with respect to)2.75 E(an address is the neig\
hbor that the MRIB indicates should be used to forw)105 633.8 Q
(ard pack)-.11 E(ets to)-.11 E(that address.)105 646.8 Q(In the case of\
 a PIM-SM multicast group, the RPF neighbor is the router that)5.5 E
2.75(aJ)105 659.8 S(oin message for that group w)-2.75 E
(ould be directed to, in the absence of modifying Assert)-.11 E(state.)
105 672.8 Q 12.529(TIB T)72 689.4 R(ree Information Base.)-.385 E
(This is the collection of state at a PIM router that has been created)
5.5 E(by recei)105 702.4 Q(ving PIM Join/Prune messages, PIM Assert mes\
sages, and IGMP information)-.275 E(from local hosts.)105 715.4 Q
(It essentially stores the state of all multicast distrib)5.5 E
(ution trees at that)-.22 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E
(ouv)-.385 E 174.721(elas Section)-.165 F 2.75(2.1. [P)2.75 F(age 4])
-.165 E EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(router)105 85 Q(.)-.605 E 3.355
(MFIB Multicast)72 101.6 R -.165(Fo)2.75 G(rw).165 E
(arding Information Base.)-.11 E
(The TIB holds all the state that is necessary to)5.5 E(forw)105 114.6 Q
(ard multicast pack)-.11 E(ets at a router)-.11 E 5.5(.H)-.605 G -.275
(ow)-5.5 G -2.365 -.275(ev e).275 H .88 -.44(r, a).275 H
(lthough this speci\214cation de\214nes).44 E(forw)105 127.6 Q
(arding in terms of the TIB, to actually forw)-.11 E(ard pack)-.11 E
(ets using the TIB is v)-.11 E(ery)-.165 E(inef)105 140.6 Q 2.75
(\214cient. Instead)-.275 F 2.75(ar)2.75 G
(eal router implementation will normally b)-2.75 E(uild an ef)-.22 E
(\214cient MFIB)-.275 E(from the TIB state to perform forw)105 153.6 Q
2.75(arding. Ho)-.11 F 2.75(wt)-.275 G
(his is done is implementation-speci\214c,)-2.75 E
(and is not discussed in this document.)105 166.6 Q(Upstream)72 183.2 Q
-1.265 -.88(To w)105 196.2 T(ards the root of the tree.).77 E
(The root of tree may either be the source or the RP)5.5 E
(depending on the conte)105 209.2 Q(xt.)-.165 E(Do)72 225.8 Q(wnstream)
-.275 E -.836 -1.012(Aw a)105 238.8 T 2.75(yf)1.012 G
(rom the root of the tree.)-2.75 E/F1 11/Times-Bold@0 SF(2.2.)72 264.8 Q
/F2 13/Times-Bold@0 SF(Pseudocode Notation)5.5 E F0 1.76 -.88(We u)72
281.4 T(se set notation in se).88 E -.165(ve)-.275 G
(ral places in this speci\214cation.).165 E/F3 11/Courier@0 SF 6.6(A\()
72 298 S(+\) B)-6.6 E F0(is the union of tw)94 311 Q 2.75(os)-.11 G
(ets A and B.)-2.75 E F3 6.6(A\()72 327.6 S(-\) B)-6.6 E F0
(is the elements of set A that are not in set B.)94 340.6 Q F3(NULL)72
357.2 Q F0(is the empty set or list.)94 370.2 Q
(In addition we use C-lik)72 386.8 Q 2.75(es)-.11 G(yntax:)-2.75 E
15.796(=d)72 403.4 S(enotes assignment of a v)-15.796 E(ariable.)-.275 E
6.842(== denotes)72 420 R 2.75(ac)2.75 G(omparison for equality)-2.75 E
(.)-.715 E 9.383(!= denotes)72 436.6 R 2.75(ac)2.75 G
(omparison for inequality)-2.75 E(.)-.715 E
(Braces { and } are used for grouping.)72 453.2 Q F1(3.)72 482.8 Q/F4 14
/Times-Bold@0 SF(PIM-SM Pr)5.5 E(otocol Ov)-.252 E(er)-.14 E(view)-.14 E
F0(This section pro)72 499.4 Q(vides an o)-.165 E -.165(ve)-.165 G(rvie)
.165 E 2.75(wo)-.275 G 2.75(fP)-2.75 G(IM-SM beha)-2.75 E(vior)-.22 E
5.5(.I)-.605 G 2.75(ti)-5.5 G 2.75(si)-2.75 G
(ntended as an introduction to ho)-2.75 E(w)-.275 E(PIM-SM w)72 512.4 Q
(orks, and is)-.11 E F1(NO)2.75 E(T)-.44 E F0(de\214niti)2.75 E -.165
(ve)-.275 G 5.5(.F).165 G(or the de\214niti)-5.665 E .33 -.165(ve s)
-.275 H(peci\214cation, see Section 4.).165 E
(PIM relies on an underlying topology-g)72 529 Q
(athering protocol to populate a routing table with routes.)-.055 E(Thi\
s routing table is called the MRIB or Multicast Routing Information Bas\
e.)72 542 Q(The routes in this)5.5 E(table may be tak)72 555 Q
(en directly from the unicast routing table, or it may be dif)-.11 E
(ferent and pro)-.275 E(vided by)-.165 E 2.75(as)72 568 S
(eparate routing protocol such as MBGP [1]. In an)-2.75 E 2.75(ye)-.165
G -.165(ve)-3.025 G(nt, the routes in the MRIB must).165 E
(represent a multicast-capable path to each subnet.)72 581 Q
(The MRIB is used to determine the path that)5.5 E
(PIM control messages such as Join messages tak)72 594 Q 2.75(et)-.11 G
2.75(og)-2.75 G(et to the source subnet, and data \215o)-2.75 E(ws)-.275
E(along the re)72 607 Q -.165(ve)-.275 G(rse path of the Join messages.)
.165 E(Thus, in contrast to the unicast RIB where the routes)5.5 E(gi)72
620 Q .33 -.165(ve a p)-.275 H(ath that data pack).165 E(ets tak)-.11 E
2.75(et)-.11 G 2.75(og)-2.75 G(et)-2.75 E/F5 11/Times-Italic@0 SF(to)
2.75 E F0(each subnet, the MRIB gi)2.75 E -.165(ve)-.275 G 2.75(sr).165
G -2.365 -.275(ev e)-2.75 H(rse-path information,).275 E
(and indicates the path that data pack)72 633 Q(ets w)-.11 E(ould tak)
-.11 E(e)-.11 E F5(fr)2.75 E(om)-.495 E F0
(each subnet to the router that has the)2.75 E(MRIB.)72 646 Q(Lik)72
662.6 Q 2.75(ea)-.11 G(ll multicast routing protocols that implement th\
e service model from RFC 1112 [2], PIM-)-2.75 E
(SM must be able to route data pack)72 675.6 Q
(ets from sources to recei)-.11 E -.165(ve)-.275 G
(rs without either the sources or).165 E(recei)72 688.6 Q -.165(ve)-.275
G(rs kno).165 E(wing a-priori of the e)-.275 E(xistence of the others.)
-.165 E(This is essentially done in three phases,)5.5 E
(although as senders and recei)72 701.6 Q -.165(ve)-.275 G
(rs may come and go at an).165 E 2.75(yt)-.165 G
(ime, all three phases may be occur)-2.75 E(simultaneously)72 714.6 Q(.)
-.715 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 182.971
(elas Section)-.165 F 2.75(3. [P)2.75 F(age 5])-.165 E EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF
(Phase One: RP T)72 85 Q -.198(re)-.814 G(e).198 E F0
(In phase one, a multicast recei)72 101.6 Q -.165(ve)-.275 G 2.75(re)
.165 G(xpresses its interest in recei)-2.915 E(ving traf)-.275 E
(\214c destined for a multicast)-.275 E 2.75(group. T)72 114.6 R
(ypically it does this using IGMP [3], b)-.88 E
(ut other mechanisms might also serv)-.22 E 2.75(et)-.165 G(his)-2.75 E
2.75(purpose. One)72 127.6 R(of the recei)2.75 E -.165(ve)-.275 G(r')
.165 E 2.75(sl)-.605 G
(ocal routers is elected as the Designated Router \(DR\) for that)-2.75
E 2.75(subnet. On)72 140.6 R(recei)2.75 E(ving the recei)-.275 E -.165
(ve)-.275 G(r').165 E 2.75(se)-.605 G
(xpression of interest, the DR then sends a PIM Join message)-2.915 E
(to)72 153.6 Q -.11(wa)-.275 G(rds the RP for that multicast group.).11
E(This Join message is kno)5.5 E(wn as a \(*,G\) Join because it)-.275 E
(joins group G for all sources to that group.)72 166.6 Q
(The \(*,G\) Join tra)5.5 E -.165(ve)-.22 G(ls hop-by-hop to).165 E -.11
(wa)-.275 G(rds the RP for).11 E(the group, and in each router it passe\
s through, multicast tree state for group G is instantiated.)72 179.6 Q
(Ev)72 192.6 Q(entually the \(*,G\) Join either reaches the RP)-.165 E
2.75(,o)-1.221 G 2.75(rr)-2.75 G
(eaches a router that already has \(*,G\) Join)-2.75 E
(state for that group.)72 205.6 Q(When man)5.5 E 2.75(yr)-.165 G(ecei)
-2.75 E -.165(ve)-.275 G(rs join the group, their Join messages con).165
E -.165(ve)-.44 G -.198(rg).165 G 2.75(eo).198 G 2.75(nt)-2.75 G(he)
-2.75 E(RP)72 218.6 Q 2.75(,a)-1.221 G(nd form a distrib)-2.75 E
(ution tree for group G that is rooted at the RP)-.22 E 5.5(.T)-1.221 G
(his is kno)-5.5 E(wn as the RP T)-.275 E(ree)-.385 E
(\(RPT\), and is also kno)72 231.6 Q(wn as the shared tree because it i\
s shared by all sources sending to that)-.275 E 2.75(group. Join)72
244.6 R(messages are resent periodically so long as the recei)2.75 E
-.165(ve)-.275 G 2.75(rr).165 G(emains in the group.)-2.75 E(When)5.5 E
(all recei)72 257.6 Q -.165(ve)-.275 G(rs on a leaf-netw).165 E(ork lea)
-.11 E .33 -.165(ve t)-.22 H
(he group, the DR will send a PIM \(*,G\) Prune message).165 E(to)72
270.6 Q -.11(wa)-.275 G(rds the RP for that multicast group. Ho).11 E
(we)-.275 E -.165(ve)-.275 G 2.75(ri).165 G 2.75(ft)-2.75 G
(he prune message is not sent for an)-2.75 E 2.75(yr)-.165 G(eason,)
-2.75 E(the state will e)72 283.6 Q -.165(ve)-.275 G(ntually time out.)
.165 E 2.75(Am)72 300.2 S(ulticast data sender just starts sending data\
 destined for a multicast group.)-2.75 E(The sender')5.5 E 2.75(sl)-.605
G(ocal)-2.75 E(router \(DR\) tak)72 313.2 Q(es those data pack)-.11 E
(ets, unicast-encapsulates them, and sends them directly to the)-.11 E
(RP)72 326.2 Q 5.5(.T)-1.221 G(he RP recei)-5.5 E -.165(ve)-.275 G 2.75
(st).165 G(hese encapsulated data pack)-2.75 E
(ets, decapsulates them, and forw)-.11 E(ards them onto)-.11 E
(the shared tree.)72 339.2 Q(The pack)5.5 E(ets then follo)-.11 E 2.75
(wt)-.275 G(he \(*,G\) multicast tree state in the routers on the RP)
-2.75 E -.385(Tr)72 352.2 S(ee, being replicated where).385 E -.165(ve)
-.275 G 2.75(rt).165 G(he RP T)-2.75 E(ree branches, and e)-.385 E -.165
(ve)-.275 G(ntually reaching all the recei).165 E -.165(ve)-.275 G(rs)
.165 E(for that multicast group.)72 365.2 Q
(The process of encapsulating data pack)5.5 E
(ets to the RP is called re)-.11 E(gistering,)-.165 E
(and the encapsulation pack)72 378.2 Q(ets are kno)-.11 E(wn as PIM Re)
-.275 E(gister pack)-.165 E(ets.)-.11 E
(At the end of phase one, multicast traf)72 394.8 Q(\214c is \215o)-.275
E(wing encapsulated to the RP)-.275 E 2.75(,a)-1.221 G(nd then nati)
-2.75 E -.165(ve)-.275 G(ly o).165 E -.165(ve)-.165 G(r).165 E
(the RP tree to the multicast recei)72 407.8 Q -.165(ve)-.275 G(rs.).165
E F1(Phase T)72 446.8 Q -.11(wo)-.814 G 2.75(:R).11 G(egister Stop)-2.75
E F0(Re)72 463.4 Q(gister)-.165 E(-encapsulation of data pack)-.22 E
(ets is inef)-.11 E(\214cient for tw)-.275 E 2.75(or)-.11 G(easons:)
-2.75 E 7.15<8345>72 480 S(ncapsulation and decapsulation may be relati)
-7.15 E -.165(ve)-.275 G(ly e).165 E(xpensi)-.165 E .33 -.165(ve o)-.275
H(perations for a router to).165 E
(perform, depending on whether or not the router has appropriate hardw)
83 493 Q(are for these tasks.)-.11 E 7.15<8354>72 509.6 S(ra)-7.535 E
-.165(ve)-.22 G(ling all the w).165 E(ay to the RP)-.11 E 2.75(,a)-1.221
G(nd then back do)-2.75 E(wn the shared tree may entail the pack)-.275 E
(ets)-.11 E(tra)83 522.6 Q -.165(ve)-.22 G(ling a relati).165 E -.165
(ve)-.275 G(ly long distance to reach recei).165 E -.165(ve)-.275 G
(rs that are close to the sender).165 E 5.5(.F)-.605 G(or some)-5.665 E
(applications, this increased latenc)83 535.6 Q 2.75(yi)-.165 G 2.75(su)
-2.75 G(ndesirable.)-2.75 E(Although Re)72 552.2 Q(gister)-.165 E
(-encapsulation may continue inde\214nitely)-.22 E 2.75(,f)-.715 G
(or these reasons, the RP will)-2.75 E
(normally choose to switch to nati)72 565.2 Q .33 -.165(ve f)-.275 H
(orw).165 E 2.75(arding. T)-.11 F 2.75(od)-.88 G 2.75(ot)-2.75 G
(his, when the RP recei)-2.75 E -.165(ve)-.275 G 2.75(sar).165 G -.165
(eg)-2.75 G(ister).165 E(-)-.22 E(encapsulated data pack)72 578.2 Q(et \
from source S on group G, it will normally initiate an \(S,G\) source-)
-.11 E(speci\214c Join to)72 591.2 Q -.11(wa)-.275 G(rds S.).11 E
(This join message tra)5.5 E -.165(ve)-.22 G(ls hop-by-hop to).165 E
-.11(wa)-.275 G(rds S, instantiating \(S,G\)).11 E
(multicast tree state in the routers along the path.)72 604.2 Q
(\(S,G\) multicast tree state is used only to forw)5.5 E(ard)-.11 E
(pack)72 617.2 Q(ets for group G if those pack)-.11 E
(ets come from source S.)-.11 E(Ev)5.5 E
(entually the Join message reaches)-.165 E(S')72 630.2 Q 2.75(ss)-.605 G
(ubnet or a router that already has \(S,G\) multicast tree state, and t\
hen pack)-2.75 E(ets from S start to)-.11 E<8d6f>72 643.2 Q 2.75(wf)
-.275 G(ollo)-2.75 E(wing the \(S,G\) tree state to)-.275 E -.11(wa)
-.275 G(rds the RP).11 E 5.5(.T)-1.221 G(hese data pack)-5.5 E
(ets may also reach routers)-.11 E(with \(*,G\) state along the path to)
72 656.2 Q -.11(wa)-.275 G(rds the RP - if so, the).11 E 2.75(yc)-.165 G
(an short-cut onto the RP tree at this)-2.75 E(point.)72 669.2 Q(While \
the RP is in the process of joining the source-speci\214c tree for S, t\
he data pack)72 685.8 Q(ets will)-.11 E
(continue being encapsulated to the RP)72 698.8 Q 5.5(.W)-1.221 G
(hen pack)-5.5 E(ets from S also start to arri)-.11 E .33 -.165(ve n)
-.275 H(ati).165 E -.165(ve)-.275 G(ly at the).165 E(the RP)72 711.8 Q
2.75(,t)-1.221 G(he RP will be recei)-2.75 E(ving tw)-.275 E 2.75(oc)
-.11 G(opies of each of these pack)-2.75 E 2.75(ets. At)-.11 F
(this point, the RP starts)2.75 E(to discard the encapsulated cop)72
724.8 Q 2.75(yo)-.11 G 2.75(ft)-2.75 G(hese pack)-2.75 E
(ets, and it sends a Re)-.11 E(gister)-.165 E(-Stop message back to)-.22
E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 182.971
(elas Section)-.165 F 2.75(3. [P)2.75 F(age 6])-.165 E EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(S')72 85 Q 2.75(sD)-.605 G 2.75
(Rt)-2.75 G 2.75(op)-2.75 G(re)-2.75 E -.165(ve)-.275 G
(nt the DR unnecessarily encapsulating the pack).165 E(ets.)-.11 E
(At the end of phase 2, traf)72 101.6 Q(\214c will be \215o)-.275 E
(wing nati)-.275 E -.165(ve)-.275 G
(ly from S along a source-speci\214c tree to the).165 E(RP)72 114.6 Q
2.75(,a)-1.221 G(nd from there along the shared tree to the recei)-2.75
E -.165(ve)-.275 G 2.75(rs. Where).165 F(the tw)2.75 E 2.75(ot)-.11 G
(rees intersect, traf)-2.75 E<8c63>-.275 E
(may transfer from the source-speci\214c tree to the RP tree, and so a)
72 127.6 Q -.22(vo)-.22 G(id taking a long detour via the).22 E(RP)72
140.6 Q(.)-1.221 E(It should be noted that a sender may start sending b\
efore or after a recei)72 157.2 Q -.165(ve)-.275 G 2.75(rj).165 G
(oins the group, and)-2.75 E(thus phase tw)72 170.2 Q 2.75(om)-.11 G
(ay happen before the shared tree to the recei)-2.75 E -.165(ve)-.275 G
2.75(ri).165 G 2.75(sb)-2.75 G(uilt.)-2.97 E/F1 11/Times-Bold@0 SF
(Phase 3: Shortest-P)72 209.2 Q(ath T)-.11 E -.198(re)-.814 G(e).198 E
F0(Although ha)72 225.8 Q(ving the RP join back to)-.22 E -.11(wa)-.275
G(rds the source remo).11 E -.165(ve)-.165 G 2.75(st).165 G
(he encapsulation o)-2.75 E -.165(ve)-.165 G(rhead, it does).165 E
(not completely optimize the forw)72 238.8 Q(arding paths.)-.11 E -.165
(Fo)5.5 G 2.75(rm).165 G(an)-2.75 E 2.75(yr)-.165 G(ecei)-2.75 E -.165
(ve)-.275 G(rs the route via the RP may).165 E(in)72 251.8 Q -.22(vo)
-.44 G(lv).22 E 2.75(eas)-.165 G(igni\214cant detour when compared with\
 the shortest path from the source to the recei)-2.75 E -.165(ve)-.275 G
-.605(r.).165 G 1.76 -.88(To o)72 268.4 T(btain lo).88 E
(wer latencies, a router on the sender')-.275 E 2.75(sL)-.605 G
(AN, typically the DR, may optionally initiate)-2.75 E 2.75(at)72 281.4
S(ransfer from the shared tree to a source-speci\214c shortest-path tre\
e \(SPT\).)-2.75 E 1.76 -.88(To d)5.5 H 2.75(ot).88 G(his, it issues)
-2.75 E(an \(S,G\) Join to)72 294.4 Q -.11(wa)-.275 G(rds S.).11 E
(This instantiates state in the routers along the path to S.)5.5 E(Ev)
5.5 E(entually this)-.165 E(join either reaches S')72 307.4 Q 2.75(ss)
-.605 G(ubnet, or reaches a router that already has \(S,G\) state.)-2.75
E(When this happens,)5.5 E(data pack)72 320.4 Q
(ets from S start to \215o)-.11 E 2.75(wf)-.275 G(ollo)-2.75 E
(wing the \(S,G\) state until the)-.275 E 2.75(yr)-.165 G
(each the recei)-2.75 E -.165(ve)-.275 G -.605(r.).165 G
(At this point the recei)72 337 Q -.165(ve)-.275 G 2.75(r\().165 G
(or a router upstream of the recei)-2.75 E -.165(ve)-.275 G
(r\) will be recei).165 E(ving tw)-.275 E 2.75(oc)-.11 G(opies of the)
-2.75 E(data - one from the SPT and one from the RPT)72 350 Q 5.5(.W)
-.814 G(hen the \214rst traf)-5.5 E(\214c starts to arri)-.275 E .33
-.165(ve f)-.275 H(rom the).165 E(SPT)72 363 Q 2.75(,t)-.814 G
(he DR or upstream router starts to drop the pack)-2.75 E
(ets for G from S that arri)-.11 E .33 -.165(ve v)-.275 H
(ia the RP tree.).165 E
(In addition, it sends an \(S,G\) prune message to)72 376 Q -.11(wa)
-.275 G(rds the RP).11 E 5.5(.T)-1.221 G(his is kno)-5.5 E
(wn as an \(S,G,rpt\) Prune.)-.275 E(The prune message tra)72 389 Q
-.165(ve)-.22 G(ls hop-by-hop, instantiating state along the path to)
.165 E -.11(wa)-.275 G(rds the RP).11 E(indicating that traf)72 402 Q
(\214c from S for G should NO)-.275 E 2.75(Tb)-.44 G 2.75(ef)-2.75 G
(orw)-2.75 E(arded in this direction.)-.11 E(The prune is)5.5 E(propag)
72 415 Q
(ated until it reaches the RP or a router that still needs the traf)
-.055 E(\214c from S for other recei)-.275 E -.165(ve)-.275 G(rs.).165 E
(By no)72 431.6 Q 1.43 -.715(w, t)-.275 H(he recei).715 E -.165(ve)-.275
G 2.75(rw).165 G(ill be recei)-2.75 E(ving traf)-.275 E
(\214c from S along the shortest-path tree between the)-.275 E(recei)72
444.6 Q -.165(ve)-.275 G 2.75(ra).165 G(nd S.)-2.75 E
(In addition, the RP is recei)5.5 E(ving the traf)-.275 E
(\214c from S, b)-.275 E(ut this traf)-.22 E(\214c is no longer)-.275 E
(reaching the recei)72 457.6 Q -.165(ve)-.275 G 2.75(ra).165 G
(long the RP tree.)-2.75 E(As f)5.5 E(ar as the recei)-.11 E -.165(ve)
-.275 G 2.75(ri).165 G 2.75(sc)-2.75 G(oncerned, this is the \214nal)
-2.75 E(distrib)72 470.6 Q(ution tree.)-.22 E F1(Sour)72 509.6 Q
(ce-speci\214c J)-.198 E(oins)-.165 E F0(IGMPv3 permits a recei)72 526.2
Q -.165(ve)-.275 G 2.75(rt).165 G 2.75(oj)-2.75 G
(oin a group and specify that it only w)-2.75 E(ants to recei)-.11 E .33
-.165(ve t)-.275 H(raf).165 E(\214c for a)-.275 E(group if that traf)72
539.2 Q(\214c comes from a particular source.)-.275 E(If a recei)5.5 E
-.165(ve)-.275 G 2.75(rd).165 G(oes this, and no other recei)-2.75 E
-.165(ve)-.275 G(r).165 E(on the LAN requires all the traf)72 552.2 Q
(\214c for the group, then the DR may omit performing a \(*,G\) join to)
-.275 E(set up the shared tree, and instead issue a source-speci\214c \
\(S,G\) join only)72 565.2 Q(.)-.715 E(The range of multicast addresses\
 from 232.0.0.0 to 232.255.255.255 is currently set aside for)72 581.8 Q
(source-speci\214c multicast in IPv4.)72 594.8 Q -.165(Fo)5.5 G 2.75(rg)
.165 G(roups in this range, recei)-2.75 E -.165(ve)-.275 G
(rs should only issue source-).165 E(speci\214c IGMPv3 joins.)72 607.8 Q
(If a PIM router recei)5.5 E -.165(ve)-.275 G 2.75(san).165 G
(on-source-speci\214c join for a group in this)-2.75 E
(range, it should ignore it, as described in Section 4.8.)72 620.8 Q F1
(Sour)72 646.8 Q(ce-speci\214c Prunes)-.198 E F0
(IGMPv3 also permits a recei)72 663.4 Q -.165(ve)-.275 G 2.75(rt).165 G
2.75(oj)-2.75 G(oin a group and specify that it only w)-2.75 E
(ants to recei)-.11 E .33 -.165(ve t)-.275 H(raf).165 E(\214c for)-.275
E 2.75(ag)72 676.4 S(roup if that traf)-2.75 E<8c63>-.275 E/F2 11
/Times-Italic@0 SF(does not)2.75 E F0
(come from a speci\214c source or sources.)2.75 E
(In this case, the DR will)5.5 E(perform a \(*,G\) join as normal, b)72
689.4 Q(ut may combine this with an \(S,G,rpt\) prune for each of the)
-.22 E(sources the recei)72 702.4 Q -.165(ve)-.275 G 2.75(rd).165 G
(oes not wish to recei)-2.75 E -.165(ve)-.275 G(.).165 E(Fenner/Handle)
72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 182.971(elas Section)-.165 F
2.75(3. [P)2.75 F(age 7])-.165 E EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF
(Multi-access T)72 85 Q(ransit LANs)-.814 E F0(The o)72 101.6 Q -.165
(ve)-.165 G(rvie).165 E 2.75(ws)-.275 G 2.75(of)-2.75 G
(ar has concerned itself with point-to-point links.)-2.86 E(Ho)5.5 E(we)
-.275 E -.165(ve)-.275 G .88 -.44(r, u).165 H(sing multi-access).44 E
(LANs such as Ethernet for transit is not uncommon.)72 114.6 Q
(This can cause complications for three)5.5 E(reasons:)72 127.6 Q 7.15
<8354>72 144.2 S .22 -.11(wo o)-8.03 H 2.75(rm).11 G
(ore routers on the LAN may issue \(*,G\) Joins to dif)-2.75 E
(ferent upstream routers on the)-.275 E(LAN because the)83 157.2 Q 2.75
(yh)-.165 G -2.475 -.22(av e)-2.75 H(inconsistent MRIB entries re)2.97 E
-.055(ga)-.165 G(rding ho).055 E 2.75(wt)-.275 G 2.75(or)-2.75 G
(each the RP)-2.75 E 5.5(.B)-1.221 G(oth paths)-5.5 E
(on the RP tree will be set up, causing tw)83 170.2 Q 2.75(oc)-.11 G
(opies of all the shared tree traf)-2.75 E(\214c to appear on the)-.275
E(LAN.)83 183.2 Q 7.15<8354>72 199.8 S .22 -.11(wo o)-8.03 H 2.75(rm).11
G(ore routers on the LAN may issue \(S,G\) Joins to dif)-2.75 E
(ferent upstream routers on the)-.275 E(LAN because the)83 212.8 Q 2.75
(yh)-.165 G -2.475 -.22(av e)-2.75 H(inconsistent MRIB entries re)2.97 E
-.055(ga)-.165 G(rding ho).055 E 2.75(wt)-.275 G 2.75(or)-2.75 G
(each source S.)-2.75 E(Both)5.5 E
(paths on the source-speci\214c tree will be set up, causing tw)83 225.8
Q 2.75(oc)-.11 G(opies of all the traf)-2.75 E(\214c from S to)-.275 E
(appear on the LAN.)83 238.8 Q 7.15<8341>72 255.4 S(router on the LAN m\
ay issue a \(*,G\) Join to one upstream router on the LAN, and another)
-4.4 E(router on the LAN may issue an \(S,G\) Join to a dif)83 268.4 Q
(ferent upstream router on the same LAN.)-.275 E -.385(Tr)83 281.4 S(af)
.385 E(\214c from S may reach the LAN o)-.275 E -.165(ve)-.165 G 2.75
(rb).165 G(oth the RPT and the SPT)-2.75 E 5.5(.I)-.814 G 2.75(ft)-5.5 G
(he recei)-2.75 E -.165(ve)-.275 G 2.75(rb).165 G(ehind the)-2.75 E(do)
83 294.4 Q(wnstream \(*,G\) router doesn')-.275 E 2.75(ti)-.198 G
(ssue an \(S,G,rpt\) prune, then this condition w)-2.75 E(ould persist.)
-.11 E(All of these problems are caused by there being more than one up\
stream router with join state for)72 311 Q
(the group or source-group pair)72 324 Q 5.5(.P)-.605 G(IM does not pre)
-5.5 E -.165(ve)-.275 G(nt such duplicate joins from occurring -).165 E
(instead when duplicate data pack)72 337 Q
(ets appear on the LAN from dif)-.11 E(ferent routers, these routers)
-.275 E(notice this, and then elect a single forw)72 350 Q(arder)-.11 E
5.5(.T)-.605 G(his election is performed using PIM Assert)-5.5 E
(messages, which resolv)72 363 Q 2.75(et)-.165 G(he problem in f)-2.75 E
-.22(avo)-.11 G 2.75(ro).22 G 2.75(ft)-2.75 G
(he upstream router which has \(S,G\) state, or if)-2.75 E
(neither or both router has \(S,G\) state, then in f)72 376 Q -.22(avo)
-.11 G 2.75(ro).22 G 2.75(ft)-2.75 G
(he router with the best metric to the RP for)-2.75 E
(RP trees, or the best metric to the source to source-speci\214c trees.)
72 389 Q(These Assert messages are also recei)72 405.6 Q -.165(ve)-.275
G 2.75(db).165 G 2.75(yt)-2.75 G(he do)-2.75 E
(wnstream routers on the LAN, and these cause)-.275 E
(subsequent join messages to be sent to the upstream router that w)72
418.6 Q(on the Assert.)-.11 E F1(RP Disco)72 444.6 Q -.11(ve)-.11 G(ry)
.11 E F0(PIM-SM routers need to kno)72 461.2 Q 2.75(wt)-.275 G
(he address of the RP for each group for which the)-2.75 E 2.75(yh)-.165
G -2.475 -.22(av e)-2.75 H(\(*,G\))2.97 E 2.75(state. This)72 474.2 R(a\
ddress is obtained either through a bootstrap mechanism or through stat\
ic)2.75 E/F2 10/Symbol SF<ef>555 486.2 Q<ef>-4.94 -10 M<ef>-4.94 -10 M
F0(con\214guration.)72 487.2 Q(One dynamic w)72 503.8 Q(ay to do this i\
s to use the Bootstrap Router \(BSR\) mechanism [4]. One router in)-.11
E(each PIM domain is elected the Bootstrap Router through a simple elec\
tion process.)72 516.8 Q(All the)5.5 E(routers in the domain that are c\
on\214gured to be candidates to be RPs periodically unicast their)72
529.8 Q(candidac)72 542.8 Q 2.75(yt)-.165 G 2.75(ot)-2.75 G(he BSR.)
-2.75 E(From the candidates, the BSR picks an RP-set, and periodically)
5.5 E(announces this set in a bootstrap message.)72 555.8 Q
(Bootstrap messages are \215ooded hop-by-hop)5.5 E F2<ef>555 567.8 Q<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M F0
(throughout the domain until all routers in the domain kno)72 568.8 Q
2.75(wt)-.275 G(he RP-Set.)-2.75 E 1.76 -.88(To m)72 585.4 T
(ap a group to an RP).88 E 2.75(,ar)-1.221 G
(outer hashes the group address into the RP-set using an order)-2.75 E
(-)-.22 E(preserving hash function \(one that minimizes changes if the \
RP set changes\).)72 598.4 Q(The resulting RP is)5.5 E
(the one that it uses as the RP for that group.)72 611.4 Q F1(4.)72
650.4 Q/F3 14/Times-Bold@0 SF(Pr)5.5 E(otocol Speci\214cation)-.252 E F0
(The speci\214cation of PIM-SM is brok)72 667 Q(en into se)-.11 E -.165
(ve)-.275 G(ral parts:).165 E 7.15<8353>72 683.6 S
(ection 4.1 details the protocol state stored.)-7.15 E 7.15<8353>72
700.2 S(ection 4.2 speci\214es the data pack)-7.15 E(et forw)-.11 E
(arding rules.)-.11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)
-.385 E 182.971(elas Section)-.165 F 2.75(4. [P)2.75 F(age 8])-.165 E EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 7.15<8353>72 85 S
(ection 4.3 speci\214es the PIM Re)-7.15 E
(gister generation and processing rules.)-.165 E 7.15<8353>72 101.6 S(e\
ction 4.4 speci\214es the PIM Join/Prune generation and processing rule\
s.)-7.15 E 7.15<8353>72 118.2 S
(ection 4.5 speci\214es the PIM Assert generation and processing rules.)
-7.15 E 7.15<8344>72 134.8 S
(esignated Router \(DR\) election is speci\214ed in Section 4.6.)-7.15 E
/F1 10/Symbol SF<ef>555 150.4 Q F0 7.15<8353>72 151.4 S
(ection 4.7 speci\214es the RP disco)-7.15 E -.165(ve)-.165 G
(ry mechanisms.).165 E 7.15<8354>72 168 S(he subset of PIM required to \
support Source-Speci\214c Multicast, PIM-SSM, is described in)-7.15 E
(Section 4.8.)83 181 Q 7.15<8350>72 197.6 S(IM pack)-7.15 E
(et formats are speci\214ed in Section 4.9.)-.11 E 7.15<8341>72 214.2 S
(summary of PIM-SM timers and their def)-4.4 E(ault v)-.11 E
(alues is gi)-.275 E -.165(ve)-.275 G 2.75(ni).165 G 2.75(nS)-2.75 G
(ection 4.10.)-2.75 E/F2 11/Times-Bold@0 SF(4.1.)72 240.2 Q/F3 13
/Times-Bold@0 SF(PIM Pr)5.5 E(otocol State)-.234 E F0(This section spec\
i\214es all the protocol state that a PIM implementation should maintai\
n in order to)72 256.8 Q(function correctly)72 269.8 Q 5.5(.W)-.715 G
2.75(et)-6.38 G(erm this state the)-2.75 E/F4 11/Times-Italic@0 SF
-1.947 -.605(Tr e)2.75 H 2.75(eI).605 G(nformation Base)-2.75 E F0
(or TIB, as it holds the state of all)2.75 E(the multicast distrib)72
282.8 Q(ution trees at this router)-.22 E 5.5(.I)-.605 G 2.75(nt)-5.5 G
(his speci\214cation we de\214ne PIM mechanisms in)-2.75 E
(terms of the TIB.)72 295.8 Q(Ho)5.5 E(we)-.275 E -.165(ve)-.275 G .88
-.44(r, o).165 H(nly a v).44 E(ery simple implementation w)-.165 E
(ould actually implement pack)-.11 E(et)-.11 E(forw)72 308.8 Q
(arding operations in terms of this state.)-.11 E
(Most implementations will use this state to b)5.5 E(uild a)-.22 E
(multicast forw)72 321.8 Q(arding table, which w)-.11 E
(ould then be updated when the rele)-.11 E -.275(va)-.275 G
(nt state in the TIB).275 E(changes.)72 334.8 Q
(Although we specify precisely the state to be k)72 351.4 Q
(ept, this does not mean that an implementation of)-.11 E
(PIM-SM needs to hold the state in this form.)72 364.4 Q
(This is actually an abstract state de\214nition, which is)5.5 E
(needed in order to specify the router')72 377.4 Q 2.75(sb)-.605 G(eha)
-2.75 E(vior)-.22 E 5.5(.A)-.605 G
(PIM-SM implementation is free to hold)-2.75 E(whate)72 390.4 Q -.165
(ve)-.275 G 2.75(ri).165 G(nternal state it requires, and will still be\
 conformant with this speci\214cation so long as it)-2.75 E
(results in the same e)72 403.4 Q(xternally visible protocol beha)-.165
E(vior as an abstract router that holds the)-.22 E(follo)72 416.4 Q
(wing state.)-.275 E 1.76 -.88(We d)72 433 T -.275(iv).88 G
(ide TIB state into four sections:).275 E(\(*,*,RP\) state)72 449.6 Q
(State that maintains per)97 462.6 Q(-RP trees, for all groups serv)-.22
E(ed by a gi)-.165 E -.165(ve)-.275 G 2.75(nR).165 G -1.221(P.)-2.75 G
(\(*,G\) state)72 479.2 Q(State that maintains the RP tree for G.)97
492.2 Q(\(S,G\) state)72 508.8 Q(State that maintains a source-speci\
\214c tree for source S and group G.)97 521.8 Q(\(S,G,rpt\) state)72
538.4 Q(State that maintains source-speci\214c information about source\
 S on the RP tree for G.)97 551.4 Q -.165(Fo)5.5 G(r).165 E -.165(ex)97
564.4 S(ample, if a source is being recei).165 E -.165(ve)-.275 G 2.75
(do).165 G 2.75(nt)-2.75 G
(he source-speci\214c tree, it will normally ha)-2.75 E .33 -.165(ve b)
-.22 H(een).165 E(pruned of)97 577.4 Q 2.75(ft)-.275 G(he RP tree.)-2.75
E(This prune state is \(S,G,rpt\) state.)5.5 E
(The state that should be k)72 594 Q(ept is described belo)-.11 E 4.18
-.715(w. O)-.275 H 2.75(fc).715 G
(ourse, implementations will only maintain)-2.75 E
(state when it is rele)72 607 Q -.275(va)-.275 G(nt to forw).275 E
(arding operations - for e)-.11 E(xample, the "NoInfo" state might be)
-.165 E(assumed from the lack of other state information, rather than b\
eing held e)72 620 Q(xplicitly)-.165 E(.)-.715 E F2 2.75(4.1.1. General)
72 646 R(Pur)2.75 E(pose State)-.11 E F0 2.75(Ar)72 662.6 S
(outer holds the follo)-2.75 E(wing non-group-speci\214c state:)-.275 E
-.165(Fo)97 679.2 S 2.75(re).165 G(ach interf)-2.75 E(ace:)-.11 E 7.15
<834f>122 695.8 S -.165(ve)-7.15 G(rride Interv).165 E(al)-.275 E 7.15
<8350>122 712.4 S(ropag)-7.15 E(ation Delay)-.055 E(Fenner/Handle)72 769
Q(y/Holbrook/K)-.165 E(ouv)-.385 E 166.471(elas Section)-.165 F 2.75
(4.1.1. [P)2.75 F(age 9])-.165 E EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 7.15<8353>122 85 S
(uppression state: One of {"Enable", "Disable"})-7.15 E/F1 11
/Times-Bold@0 SF(Neighbor State:)122 101.6 Q F0 -.165(Fo)133 118.2 S
2.75(re).165 G(ach neighbor:)-2.75 E 7.15<8349>158 134.8 S
(nformation from neighbor')-7.15 E 2.75(sH)-.605 G(ello)-2.75 E 7.15
<834e>158 151.4 S(eighbor')-7.15 E 2.75(sG)-.605 G(en ID.)-2.75 E 7.15
<834e>158 168 S(eighbor li)-7.15 E -.165(ve)-.275 G(ness timer \(NL).165
E(T\))-1.012 E F1(Designated Router \(DR\) State:)122 184.6 Q F0 7.15
<8344>133 201.2 S(esignated Router')-7.15 E 2.75(sI)-.605 G 2.75(PA)
-2.75 G(ddress)-2.75 E 7.15<8344>133 217.8 S(R')-7.15 E 2.75(sD)-.605 G
2.75(RP)-2.75 G(riority)-2.75 E(The Ov)72 234.4 Q(erride Interv)-.165 E
(al, the Propag)-.275 E(ation Delay and the Interf)-.055 E
(ace suppression state are described in)-.11 E
(section 4.6.3. Designated Router state is described in section 4.6.)72
247.4 Q F1 2.75(4.1.2. \(*,*,RP\))72 273.4 R(State)2.75 E F0 -.165(Fo)72
290 S 2.75(re).165 G -.165(ve)-3.025 G(ry RP a router k).165 E
(eeps the follo)-.11 E(wing state:)-.275 E F1(\(*,*,RP\) state:)97 306.6
Q F0 -.165(Fo)122 319.6 S 2.75(re).165 G(ach interf)-2.75 E(ace:)-.11 E
F1(PIM \(*,*,RP\) J)147 336.2 Q(oin/Prune State:)-.165 E F0 7.15<8353>
172 352.8 S
(tate: One of {"NoInfo" \(NI\), "Join" \(J\), "PrunePending" \(PP\)})
-7.15 E 7.15<8350>172 369.4 S(rune Pending T)-7.15 E(imer \(PPT\))-.385
E 7.15<834a>172 386 S(oin/Prune Expiry T)-7.15 E(imer \(ET\))-.385 E
(Not interf)122 402.6 Q(ace speci\214c:)-.11 E 7.15<8355>147 419.2 S
(pstream Join/Prune T)-7.15 E(imer \(JT\))-.385 E 7.15<834c>147 435.8 S
(ast RPF Neighbor to)-7.15 E -.11(wa)-.275 G(rds RP that w).11 E
(as used)-.11 E(PIM \(*,*,RP\) Join/Prune state is the result of recei)
72 452.4 Q(ving PIM \(*,*,RP\) Join/Prune messages on this)-.275 E
(interf)72 465.4 Q(ace, and is speci\214ed in section 4.4.1.)-.11 E(The\
 upstream \(*,*,RP\) Join/Prune timer is used to send out periodic Join\
\(*,*,RP\) messages, and)72 482 Q(to o)72 495 Q -.165(ve)-.165 G
(rride Prune\(*,*,RP\) messages from peers on an upstream LAN interf)
.165 E(ace.)-.11 E(The last RPF neighbor to)72 511.6 Q -.11(wa)-.275 G
(rds the RP is stored because if the MRIB changes then the RPF).11 E
(neighbor to)72 524.6 Q -.11(wa)-.275 G(rds the RP may change.).11 E
(If it does so, then we need to trigger a ne)5.5 E 2.75(wJ)-.275 G
(oin\(*,*,RP\) to)-2.75 E(the ne)72 537.6 Q 2.75(wu)-.275 G
(pstream neighbor and a Prune\(*,*,RP\) to the old upstream neighbor)
-2.75 E 5.5(.S)-.605 G(imilarly)-5.5 E 2.75(,i)-.715 G 2.75(fa)-2.75 G(\
router detects through a changed GenID in a Hello message that the upst\
ream neighbor to)72 550.6 Q -.11(wa)-.275 G(rds).11 E(the RP has reboot\
ed, then it should re-instantiate state by sending a Join\(*,*,RP\).)72
563.6 Q(These)5.5 E(mechanisms are speci\214ed in Section 4.4.5.)72
576.6 Q F1 2.75(4.1.3. \(*,G\))72 602.6 R(State)2.75 E F0 -.165(Fo)72
619.2 S 2.75(re).165 G -.165(ve)-3.025 G(ry group G a router k).165 E
(eeps the follo)-.11 E(wing state:)-.275 E F1(\(*,G\) state:)97 635.8 Q
F0 -.165(Fo)122 648.8 S 2.75(re).165 G(ach interf)-2.75 E(ace:)-.11 E F1
(Local Membership:)147 665.4 Q F0(State: One of {"NoInfo", "Include"})
172 678.4 Q F1(PIM \(*,G\) J)147 695 Q(oin/Prune State:)-.165 E F0 7.15
<8353>172 711.6 S
(tate: One of {"NoInfo" \(NI\), "Join" \(J\), "PrunePending" \(PP\)})
-7.15 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.1.3. [P)2.75 F(age 10])-.165 E EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 7.15<8350>172 85 S
(rune Pending T)-7.15 E(imer \(PPT\))-.385 E 7.15<834a>172 101.6 S
(oin/Prune Expiry T)-7.15 E(imer \(ET\))-.385 E/F1 11/Times-Bold@0 SF
(\(*,G\) Assert W)147 118.2 Q(inner State)-.198 E F0 7.15<8353>172 134.8
S(tate: One of {"NoInfo" \(NI\), "I lost Assert" \(L\), "I w)-7.15 E
(on Assert" \(W\)})-.11 E 7.15<8341>172 151.4 S(ssert T)-7.15 E
(imer \(A)-.385 E(T\))-1.221 E 7.15<8341>172 168 S(ssert winner')-7.15 E
2.75(sI)-.605 G 2.75(PA)-2.75 G(ddress)-2.75 E 7.15<8341>172 184.6 S
(ssert winner')-7.15 E 2.75(sA)-.605 G(ssert Metric)-2.75 E(Not interf)
122 201.2 Q(ace speci\214c:)-.11 E 7.15<8355>147 217.8 S
(pstream Join/Prune T)-7.15 E(imer \(JT\))-.385 E 7.15<834c>147 234.4 S
(ast RP Used)-7.15 E 7.15<834c>147 251 S(ast RPF Neighbor to)-7.15 E
-.11(wa)-.275 G(rds RP that w).11 E(as used)-.11 E(Local membership is \
the result of the local membership mechanism \(such as IGMP\) running o\
n)72 267.6 Q(that interf)72 280.6 Q 2.75(ace. It)-.11 F(need not be k)
2.75 E(ept if this router is not the DR on that interf)-.11 E
(ace unless this router)-.11 E -.11(wo)72 293.6 S 2.75(na\().11 G
(*,G\) assert on this interf)-2.75 E
(ace for this group, although implementations may optionally k)-.11 E
(eep)-.11 E(this state in case the)72 306.6 Q 2.75(yb)-.165 G
(ecome the DR or assert winner)-2.75 E 5.5(.T)-.605 G
(his information is used by the)-5.5 E/F2 11/Courier@0 SF
(pim_include\(*,G\))72 319.6 Q F0(macro described in section 4.1.6.)2.75
E(PIM \(*,G\) Join/Prune state is the result of recei)72 336.2 Q
(ving PIM \(*,G\) Join/Prune messages on this)-.275 E(interf)72 349.2 Q
(ace, and is speci\214ed in section 4.4.2. The state is used by the mac\
ros that calculate the)-.11 E(outgoing interf)72 362.2 Q
(ace list in section 4.1.6, and in the)-.11 E F2(JoinDesired\(*,G\))2.75
E F0(macro \(de\214ned in)2.75 E(section 4.4.6\) that is used in decidi\
ng whether a Join\(*,G\) should be sent upstream.)72 375.2 Q
(\(*,G\) Assert W)72 391.8 Q
(inner state is the result of sending or recei)-.44 E
(ving \(*,G\) assert messages on this)-.275 E(interf)72 404.8 Q 2.75
(ace. It)-.11 F(is speci\214ed in section 4.5.2.)2.75 E(The upstream \(\
*,G\) Join/Prune timer is used to send out periodic Join\(*,G\) message\
s, and to)72 421.4 Q -.165(ove)72 434.4 S
(rride Prune\(*,G\) messages from peers on an upstream LAN interf).165 E
(ace.)-.11 E(The last RP used must be stored because if the RP Set chan\
ges \(section 4.7\) then state must be)72 451 Q(torn do)72 464 Q
(wn and reb)-.275 E(uilt for groups whose RP changes.)-.22 E
(The last RPF neighbor to)72 480.6 Q -.11(wa)-.275 G
(rds the RP is stored because if the MRIB changes then the RPF).11 E
(neighbor to)72 493.6 Q -.11(wa)-.275 G(rds the RP may change.).11 E
(If it does so, then we need to trigger a ne)5.5 E 2.75(wJ)-.275 G
(oin\(*,G\) to the)-2.75 E(ne)72 506.6 Q 2.75(wu)-.275 G
(pstream neighbor and a Prune\(*,G\) to the old upstream neighbor)-2.75
E 5.5(.S)-.605 G(imilarly)-5.5 E 2.75(,i)-.715 G 2.75(far)-2.75 G(outer)
-2.75 E(detects through a changed GenID in a Hello message that the ups\
tream neighbor to)72 519.6 Q -.11(wa)-.275 G(rds the RP).11 E(has reboo\
ted, then it should re-instantiate state by sending a Join\(*,G\).)72
532.6 Q(These mechanisms are)5.5 E(speci\214ed in Section 4.4.6.)72
545.6 Q F1 2.75(4.1.4. \(S,G\))72 571.6 R(State)2.75 E F0 -.165(Fo)72
588.2 S 2.75(re).165 G -.165(ve)-3.025 G
(ry source/group pair \(S,G\) a router k).165 E(eeps the follo)-.11 E
(wing state:)-.275 E F1(\(S,G\) state:)97 604.8 Q F0 -.165(Fo)122 621.4
S 2.75(re).165 G(ach interf)-2.75 E(ace:)-.11 E F1(Local Membership:)147
638 Q F0(State: One of {"NoInfo", "Include"})172 651 Q F1(PIM \(S,G\) J)
147 667.6 Q(oin/Prune State:)-.165 E F0 7.15<8353>172 684.2 S
(tate: One of {"NoInfo" \(NI\), "Join" \(J\), "PrunePending" \(PP\)})
-7.15 E 7.15<8350>172 700.8 S(rune Pending T)-7.15 E(imer \(PPT\))-.385
E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.1.4. [P)2.75 F(age 11])-.165 E EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 7.15<834a>172 85 S
(oin/Prune Expiry T)-7.15 E(imer \(ET\))-.385 E/F1 11/Times-Bold@0 SF
(\(S,G\) Assert W)147 101.6 Q(inner State)-.198 E F0 7.15<8353>172 118.2
S(tate: One of {"NoInfo" \(NI\), "I lost Assert" \(L\), "I w)-7.15 E
(on Assert" \(W\)})-.11 E 7.15<8341>172 134.8 S(ssert T)-7.15 E
(imer \(A)-.385 E(T\))-1.221 E 7.15<8341>172 151.4 S(ssert winner')-7.15
E 2.75(sI)-.605 G 2.75(PA)-2.75 G(ddress)-2.75 E 7.15<8341>172 168 S
(ssert winner')-7.15 E 2.75(sA)-.605 G(ssert Metric)-2.75 E(Not interf)
122 184.6 Q(ace speci\214c:)-.11 E 7.15<8355>147 201.2 S
(pstream \(S,G\) Join/Prune T)-7.15 E(imer \(JT\))-.385 E 7.15<834c>147
217.8 S(ast RPF Neighbor to)-7.15 E -.11(wa)-.275 G(rds S that w).11 E
(as used)-.11 E 7.15<8353>147 234.4 S
(PT bit \(indicates \(S,G\) state is acti)-7.15 E -.165(ve)-.275 G(\))
.165 E 7.15<8328>147 251 S(S,G\) K)-7.15 E(eepAli)-.275 E .33 -.165
(ve T)-.275 H(imer \(KA)-.22 E(T\))-1.221 E(Local membership is the res\
ult of the local source-speci\214c membership mechanism \(such as)72
267.6 Q(IGMP v)72 280.6 Q(ersion 3\) running on that interf)-.165 E
(ace and specifying that this particular source should be)-.11 E 2.75
(included. As)72 293.6 R
(stored here, this state is the resulting state after an)2.75 E 2.75(yI)
-.165 G(GMPv3 inconsistencies ha)-2.75 E -.165(ve)-.22 G(been resolv)72
306.6 Q 2.75(ed. It)-.165 F(need not be k)2.75 E
(ept if this router is not the DR on that interf)-.11 E
(ace unless this router)-.11 E -.11(wo)72 319.6 S 2.75(na\().11 G
(S,G\) assert on this interf)-2.75 E(ace for this group.)-.11 E
(This information is used by the)5.5 E/F2 11/Courier@0 SF
(pim_include\(S,G\))72 332.6 Q F0(macro described in section 4.1.6.)2.75
E(PIM \(S,G\) Join/Prune state is the result of recei)72 349.2 Q
(ving PIM \(S,G\) Join/Prune messages on this)-.275 E(interf)72 362.2 Q
(ace, and is speci\214ed in section 4.4.2. The state is used by the mac\
ros that calculate the)-.11 E(outgoing interf)72 375.2 Q
(ace list in section 4.1.6, and in the)-.11 E F2(JoinDesired\(S,G\))2.75
E F0(macro \(de\214ned in)2.75 E(section 4.4.7\) that is used in decidi\
ng whether a Join\(S,G\) should be sent upstream.)72 388.2 Q
(\(S,G\) Assert W)72 404.8 Q
(inner state is the result of sending or recei)-.44 E
(ving \(S,G\) assert messages on this)-.275 E(interf)72 417.8 Q 2.75
(ace. It)-.11 F(is speci\214ed in section 4.5.1.)2.75 E(The upstream \(\
S,G\) Join/Prune timer is used to send out periodic Join\(S,G\) message\
s, and to)72 434.4 Q -.165(ove)72 447.4 S
(rride Prune\(S,G\) messages from peers on an upstream LAN interf).165 E
(ace.)-.11 E(The last RPF neighbor to)72 464 Q -.11(wa)-.275 G
(rds S is stored because if the MRIB changes then the RPF neighbor).11 E
(to)72 477 Q -.11(wa)-.275 G(rds S may change.).11 E
(If it does so, then we need to trigger a ne)5.5 E 2.75(wJ)-.275 G
(oin\(S,G\) to the ne)-2.75 E 2.75(wu)-.275 G(pstream)-2.75 E
(neighbor and a Prune\(S,G\) to the old upstream neighbor)72 490 Q 5.5
(.S)-.605 G(imilarly)-5.5 E 2.75(,i)-.715 G 2.75(ft)-2.75 G
(he router detects through a)-2.75 E
(changed GenID in a Hello message that the upstream neighbor to)72 503 Q
-.11(wa)-.275 G(rds S has rebooted, then it).11 E
(should re-instantiate state by sending a Join\(S,G\).)72 516 Q
(These mechanisms are speci\214ed in Section)5.5 E(4.4.7.)72 529 Q
(The SPTbit is used to indicate whether forw)72 545.6 Q
(arding is taking place on the \(S,G\) Shortest P)-.11 E(ath T)-.165 E
(ree)-.385 E(\(SPT\) or on the \(*,G\) tree.)72 558.6 Q 2.75(Ar)5.5 G
(outer can ha)-2.75 E .33 -.165(ve \()-.22 H
(S,G\) state and still be forw).165 E(arding on \(*,G\) state)-.11 E
(during the interv)72 571.6 Q
(al when the source-speci\214c tree is being constructed.)-.275 E
(When SPTbit is F)5.5 E(ALSE,)-.814 E(only \(*,G\) forw)72 584.6 Q
(arding state is used to forw)-.11 E(ard pack)-.11 E(ets from S to G.)
-.11 E(When SPTbit is TR)5.5 E(UE, both)-.44 E(\(*,G\) and \(S,G\) forw)
72 597.6 Q(arding state are used.)-.11 E(The \(S,G\) K)72 614.2 Q
(eepali)-.275 E .33 -.165(ve T)-.275 H
(imer is updated by data being forw)-.22 E
(arded using this \(S,G\) forw)-.11 E(arding state.)-.11 E
(It is used to k)72 627.2 Q(eep \(S,G\) state ali)-.11 E .33 -.165(ve i)
-.275 H 2.75(nt).165 G(he absence of e)-2.75 E(xplicit \(S,G\) Joins.)
-.165 E(Amongst other things,)5.5 E(this is necessary for the so-called\
 "turnaround rules" - when the RP uses \(S,G\) joins to stop)72 640.2 Q
(encapsulation, and then \(S,G\) prunes to pre)72 653.2 Q -.165(ve)-.275
G(nt traf).165 E(\214c from unnecessarily reaching the RP)-.275 E(.)
-1.221 E F1 2.75(4.1.5. \(S,G,r)72 679.2 R(pt\) State)-.11 E F0 -.165
(Fo)72 695.8 S 2.75(re).165 G -.165(ve)-3.025 G(ry source/group pair \(\
S,G\) for which a router also has \(*,G\) state, it also k).165 E
(eeps the)-.11 E(follo)72 708.8 Q(wing state:)-.275 E(Fenner/Handle)72
769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.1.5. [P)2.75 F(age 12])-.165 E EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(\(S,G,r)
97 85 Q(pt\) state:)-.11 E F0 -.165(Fo)122 101.6 S 2.75(re).165 G
(ach interf)-2.75 E(ace:)-.11 E F1(Local Membership:)147 118.2 Q F0
(State: One of {"NoInfo", "Exclude"})172 131.2 Q F1(PIM \(S,G,r)147
147.8 Q(pt\) J)-.11 E(oin/Prune State:)-.165 E F0 7.15<8353>172 164.4 S
(tate: One of {"NoInfo", "Pruned", "PrunePending"})-7.15 E 7.15<8350>172
181 S(rune Pending T)-7.15 E(imer \(PPT\))-.385 E 7.15<834a>172 197.6 S
(oin/Prune Expiry T)-7.15 E(imer \(ET\))-.385 E(Not interf)122 214.2 Q
(ace speci\214c:)-.11 E F1(Upstr)147 230.8 Q(eam \(S,G,r)-.198 E(pt\) J)
-.11 E(oin/Prune State:)-.165 E F0 7.15<8353>172 247.4 S
(tate: One of {"NotJoined\(*,G\)", "NotPruned\(S,G,rpt\)",)-7.15 E
("Pruned\(S,G,rpt\)"})183 260.4 Q 7.15<834f>172 277 S -.165(ve)-7.15 G
(rride T).165 E(imer \(O)-.385 E(T\))-.44 E(Local membership is the res\
ult of the local source-speci\214c membership mechanism \(such as)72
293.6 Q(IGMPv3\) running on that interf)72 306.6 Q
(ace and specifying that although there is \(*,G\) Include state, this)
-.11 E(particular source should be e)72 319.6 Q 2.75(xcluded. As)-.165 F
(stored here, this state is the resulting state after an)2.75 E(y)-.165
E(IGMPv3 inconsistencies between LAN members ha)72 332.6 Q .33 -.165
(ve b)-.22 H(een resolv).165 E 2.75(ed. It)-.165 F(need not be k)2.75 E
(ept if this)-.11 E(router is not the DR on that interf)72 345.6 Q
(ace unless this router w)-.11 E(on a \(*,G\) assert on this interf)-.11
E(ace for this)-.11 E 2.75(group. This)72 358.6 R
(information is used by the)2.75 E/F2 11/Courier@0 SF
(pim_exclude\(S,G\))2.75 E F0(macro described in section 4.1.6.)2.75 E
(PIM \(S,G,rpt\) Join/Prune state is the result of recei)72 375.2 Q
(ving PIM \(S,G,rpt\) Join/Prune messages on)-.275 E(this interf)72
388.2 Q(ace, and is speci\214ed in section 4.4.4. The state is used by \
the macros that calculate the)-.11 E(outgoing interf)72 401.2 Q(ace lis\
t in section 4.1.6, and in the rules for adding Prune\(S,G,rpt\) messag\
es to)-.11 E(Join\(*,G\) messages speci\214ed in section 4.4.8.)72 414.2
Q(The upstream \(S,G,rpt\) Join/Prune state is used along with the Ov)72
430.8 Q(erride T)-.165 E(imer to send the correct)-.385 E -.165(ove)72
443.8 S(rride messages in response to Join/Prune messages sent by upstr\
eam peers on a LAN.).165 E(This)5.5 E(state and beha)72 456.8 Q
(vior are speci\214ed in section 4.4.9.)-.22 E F1 2.75(4.1.6. State)72
482.8 R(Summarization Macr)2.75 E(os)-.198 E F0
(Using this state, we de\214ne the follo)72 499.4 Q
(wing "macro" de\214nitions which we will use in the descriptions)-.275
E(of the state machines and pseudocode in the follo)72 512.4 Q
(wing sections.)-.275 E
(The most important macros are those that de\214ne the outgoing interf)
72 529 Q(ace list \(or "olist"\) for the)-.11 E(rele)72 542 Q -.275(va)
-.275 G(nt state.).275 E(An olist can be "immediate" if it is b)5.5 E
(uilt directly from the state of the rele)-.22 E -.275(va)-.275 G
(nt type.).275 E -.165(Fo)72 555 S 2.75(re).165 G
(xample, the immediate_olist\(S,G\) is the olist that w)-2.915 E
(ould be b)-.11 E(uilt if the router only had \(S,G\))-.22 E
(state and no \(*,G\) or \(S,G,rpt\) state.)72 568 Q
(In contrast, the "inherited" olist inherits state from other)5.5 E 2.75
(types. F)72 581 R(or e)-.165 E
(xample, the inherited_olist\(S,G\) is the olist that is rele)-.165 E
-.275(va)-.275 G(nt for forw).275 E(arding a pack)-.11 E(et)-.11 E
(from S to G using both source-speci\214c and group-speci\214c state.)72
594 Q(There is no immediate_olist\(S,G,rpt\) as \(S,G,rpt\) state is ne)
72 610.6 Q -.055(ga)-.165 G(ti).055 E .33 -.165(ve s)-.275 H
(tate - it remo).165 E -.165(ve)-.165 G 2.75(si).165 G(nterf)-2.75 E
(aces in)-.11 E
(the \(*,G\) olist from the olist that is actually used to forw)72 623.6
Q(ard traf)-.11 E 2.75(\214c. The)-.275 F(inherited_olist\(S,G,rpt\) is)
2.75 E(therefore the olist that w)72 636.6 Q(ould be used for a pack)
-.11 E(et from S to G forw)-.11 E(arding on the RP tree.)-.11 E(It is a)
5.5 E(strict subset of immediate_olist\(*,G\).)72 649.6 Q
(Generally speaking, the inherited olists are used for forw)72 666.2 Q
(arding, and the immediate_olists are)-.11 E(used to mak)72 679.2 Q 2.75
(ed)-.11 G(ecisions about state maintenance.)-2.75 E F2
(immediate_olist\(*,*,RP\)=)72 705.2 Q(joins\(*,*,RP\))98.4 718.2 Q F0
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.1.6. [P)2.75 F(age 13])-.165 E EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF
(immediate_olist\(*,G\) =)72 85 Q
(joins\(*,G\) \(+\) pim_include\(*,G\) \(-\) lost_assert\(*,G\))98.4 98
Q(immediate_olist\(S,G\) =)72 124 Q
(joins\(S,G\) \(+\) pim_include\(S,G\) \(-\) lost_assert\(S,G\))98.4 137
Q(inherited_olist\(S,G,rpt\) =)72 163 Q 6.6(\(j)124.8 176 S
(oins\(*,*,RP\(G\)\) \(+\) joins\(*,G\) \(-\) prunes\(S,G,rpt\) \))-6.6
E(\(+\) \( pim_include\(*,G\) \(-\) pim_exclude\(S,G\)\))98.4 189 Q
(\(-\) \( lost_assert\(*,G\) \(+\) lost_assert\(S,G,rpt\) \))98.4 202 Q
(inherited_olist\(S,G\) =)72 228 Q
(inherited_olist\(S,G,rpt\) \(+\) immediate_olist\(S,G\))98.4 241 Q F0(\
The macros pim_include\(*,G\) and pim_include\(S,G\) indicate the inter\
f)72 257.6 Q(aces to which traf)-.11 E(\214c might)-.275 E(be forw)72
270.6 Q(arded because of hosts that are local members on that interf)
-.11 E 2.75(ace. Note)-.11 F(that normally only)2.75 E
(the DR cares about local membership, b)72 283.6 Q
(ut when an assert happens, the assert winner tak)-.22 E(es o)-.11 E
-.165(ve)-.165 G(r).165 E(responsibility for forw)72 296.6 Q
(arding traf)-.11 E(\214c to local members that ha)-.275 E .33 -.165
(ve r)-.22 H(equested traf).165 E(\214c on a group or)-.275 E
(source/group pair)72 309.6 Q(.)-.605 E F1(pim_include\(*,G\) =)72 339.2
Q 6.6({a)91.8 352.2 S(ll interfaces I such that:)-6.6 E 6.6(\(\(I)105
365.2 S(_am_DR\( I \) AND lost_assert\(*,G,I\) == FALSE \))-6.6 E
(OR AssertWinner\(*,G,I\) == me \))118.2 378.2 Q 6.6
(AND local_receiver_include\(*,G,I\))105 391.2 R(})6.6 E
(pim_include\(S,G\) =)72 417.2 Q 6.6({a)98.4 430.2 S
(ll interfaces I such that:)-6.6 E 6.6(\(\()111.6 443.2 S
(I_am_DR\( I \) AND lost_assert\(S,G,I\) == FALSE \))-6.6 E
(OR AssertWinner\(S,G,I\) == me \))124.8 456.2 Q 6.6
(AND local_receiver_include\(S,G,I\))118.2 469.2 R(})6.6 E
(pim_exclude\(S,G\) =)72 495.2 Q 6.6({a)98.4 508.2 S
(ll interfaces I such that:)-6.6 E 6.6(\(\()111.6 521.2 S
(I_am_DR\( I \) AND lost_assert\(S,G,I\) == FALSE \))-6.6 E
(OR AssertWinner\(S,G,I\) == me \))124.8 534.2 Q 6.6
(AND local_receiver_exclude\(S,G,I\))118.2 547.2 R(})6.6 E F0
(The clause "local_recei)72 576.8 Q -.165(ve)-.275 G(r_include\(S,G,I\)\
" is true if the IGMP module or other local membership).165 E
(mechanism has determined that there are local members on interf)72
589.8 Q(ace I that desire to recei)-.11 E .33 -.165(ve t)-.275 H(raf)
.165 E<8c63>-.275 E(sent speci\214cally by S to G.)72 602.8 Q
("local_recei)5.5 E -.165(ve)-.275 G
(r_include\(*,G,I\)" is true if the IGMP module or other).165 E(local m\
embership mechanism has determined that there are local members on inte\
rf)72 615.8 Q(ace I that)-.11 E(desire to recei)72 628.8 Q .33 -.165
(ve a)-.275 H(ll traf).165 E(\214c sent to G.)-.275 E("local_recei)5.5 E
-.165(ve)-.275 G(r_e).165 E(xclude\(S,G,I\) is true if)-.165 E
(local_recei)72 641.8 Q -.165(ve)-.275 G(r_include\(*,G,I\) is true b)
.165 E(ut none of the local members desire to recei)-.22 E .33 -.165
(ve t)-.275 H(raf).165 E(\214c from)-.275 E(S.)72 654.8 Q(Fenner/Handle)
72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F
2.75(4.1.6. [P)2.75 F(age 14])-.165 E EP
%%Page: 15 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(The set "joins\(*,*,RP\)" is the set of all interf)72 85 Q
(aces on which the router has recei)-.11 E -.165(ve)-.275 G 2.75(d\()
.165 G(*,*,RP\) Joins:)-2.75 E/F1 11/Courier@0 SF(joins\(*,*,RP\) =)72
101.6 Q 6.6({a)98.4 114.6 S(ll interfaces I such that)-6.6 E
(DownstreamJPState\(*,*,RP,I\) is either Joined or)111.6 127.6 Q
(PrunePending })138 140.6 Q F0(Do)72 157.2 Q(wnstreamJPState\(*,*,RP)
-.275 E
(,I\) is the state of the \214nite state machine in section 4.4.1.)
-1.221 E(The set "joins\(*,G\)" is the set of all interf)72 173.8 Q
(aces on which the router has recei)-.11 E -.165(ve)-.275 G 2.75(d\()
.165 G(*,G\) Joins:)-2.75 E F1(joins\(*,G\) =)72 190.4 Q 6.6({a)98.4
203.4 S(ll interfaces I such that)-6.6 E
(DownstreamJPState\(*,G,I\) is either Joined or PrunePending })111.6
216.4 Q F0(Do)72 233 Q(wnstreamJPState\(*,G,I\) is the state of the \
\214nite state machine in section 4.4.2.)-.275 E
(The set "joins\(S,G\)" is the set of all interf)72 249.6 Q
(aces on which the router has recei)-.11 E -.165(ve)-.275 G 2.75(d\()
.165 G(S,G\) Joins:)-2.75 E F1(joins\(S,G\) =)72 266.2 Q 6.6({a)98.4
279.2 S(ll interfaces I such that)-6.6 E
(DownstreamJPState\(S,G,I\) is either Joined or PrunePending })111.6
292.2 Q F0(Do)72 308.8 Q(wnstreamJPState\(S,G,I\) is the state of the \
\214nite state machine in section 4.4.3.)-.275 E
(The set "prunes\(S,G,rpt\)" is the set of all interf)72 325.4 Q
(aces on which the router has recei)-.11 E -.165(ve)-.275 G 2.75(d\()
.165 G(*,G\) joins)-2.75 E(and \(S,G,rpt\) prunes.)72 338.4 Q F1
(prunes\(S,G,rpt\) =)72 355 Q 6.6({a)98.4 368 S
(ll interfaces I such that)-6.6 E
(DownstreamJPState\(S,G,rpt,I\) is Pruned or PruneTmp })111.6 381 Q F0
(Do)72 397.6 Q(wnstreamJPState\(S,G,rpt,I\) is the state of the \214nit\
e state machine in section 4.4.4.)-.275 E
(The set "lost_assert\(*,G\)" is the set of all interf)72 414.2 Q
(aces on which the router has recei)-.11 E -.165(ve)-.275 G 2.75(d\()
.165 G(*,G\) joins)-2.75 E -.22(bu)72 427.2 S 2.75(th).22 G
(as lost a \(*,G\) assert.)-2.75 E
(The macro lost_assert\(*,G,I\) is de\214ned in Section 4.5.5.)5.5 E F1
(lost_assert\(*,G\) =)72 443.8 Q 6.6({a)98.4 456.8 S
(ll interfaces I such that)-6.6 E(lost_assert\(*,G,I\) == TRUE })111.6
469.8 Q F0(The set "lost_assert\(S,G,rpt\)" is the set of all interf)72
486.4 Q(aces on which the router has recei)-.11 E -.165(ve)-.275 G 2.75
(d\().165 G(*,G\))-2.75 E(joins b)72 499.4 Q
(ut has lost an \(S,G\) assert.)-.22 E
(The macro lost_assert\(S,G,rpt,I\) is de\214ned in Section 4.5.5.)5.5 E
F1(lost_assert\(S,G,rpt\) =)72 516 Q 6.6({a)98.4 529 S
(ll interfaces I such that)-6.6 E(lost_assert\(S,G,rpt,I\) == TRUE })
111.6 542 Q F0(The set "lost_assert\(S,G\)" is the set of all interf)72
558.6 Q(aces on which the router has recei)-.11 E -.165(ve)-.275 G 2.75
(d\().165 G(S,G\) joins)-2.75 E -.22(bu)72 571.6 S 2.75(th).22 G
(as lost an \(S,G\) assert.)-2.75 E
(The macro lost_assert\(S,G,I\) is de\214ned in Section 4.5.5.)5.5 E F1
(lost_assert\(S,G\) =)72 588.2 Q 6.6({a)98.4 601.2 S
(ll interfaces I such that)-6.6 E(lost_assert\(S,G,I\) == TRUE })111.6
614.2 Q F0(The follo)72 656.8 Q
(wing pseudocode macro de\214nitions are also used in man)-.275 E 2.75
(yp)-.165 G(laces in the speci\214cation.)-2.75 E
(Basically RPF' is the RPF neighbor to)72 669.8 Q -.11(wa)-.275 G
(rds an RP or source unless a PIM-Assert has o).11 E -.165(ve)-.165 G
(rridden).165 E(the normal choice of neighbor)72 682.8 Q(.)-.605 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.1.6. [P)2.75 F(age 15])-.165 E EP
%%Page: 16 16
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF
(neighbor RPF'\(*,G\) {)85.2 85 Q
(if \( I_Am_Assert_Loser\(*,G,RPF_interface\(RP\(G\)\)\) \) {)111.6 98 Q
(return AssertWinner\(*, G, RPF_interface\(RP\(G\)\) \))144.6 111 Q 6.6
(}e)111.6 124 S(lse {)-6.6 E(return MRIB.next_hop\( RP\(G\) \))144.6 137
Q(})111.6 150 Q(})85.2 163 Q(neighbor RPF'\(S,G,rpt\) {)85.2 188 Q
(if\( I_Am_Assert_Loser\(S, G, RPF_interface\(RP\(G\)\) \) \) {)111.6
201 Q(return AssertWinner\(S, G, RPF_interface\(RP\(G\)\) \))144.6 214 Q
6.6(}e)111.6 227 S(lse {)-6.6 E(return RPF'\(*,G\))144.6 240 Q(})111.6
253 Q(})85.2 266 Q(neighbor RPF'\(S,G\) {)85.2 291 Q
(if \( I_Am_Assert_loser\(S, G, RPF_interface\(S\) \)\) {)111.6 304 Q
(return AssertWinner\(S, G, RPF_interface\(S\) \))144.6 317 Q 6.6(}e)
111.6 330 S(lse {)-6.6 E(return MRIB.next_hop\( S \))144.6 343 Q(})111.6
356 Q(})85.2 369 Q F0
(RPF'\(*,G\) and RPF'\(S,G\) indicate the neighbor from which data pack)
72 391.6 Q(ets should be coming and)-.11 E
(to which joins should be sent on the RP tree and SPT respecti)72 404.6
Q -.165(ve)-.275 G(ly).165 E(.)-.715 E(RPF'\(S,G,rpt\) is basically RPF\
'\(*,G\) modi\214ed by the result of an Assert\(S,G\) on)72 421.2 Q
(RPF_interf)72 434.2 Q 2.75(ace\(RP\(G\)\). In)-.11 F(such a case, pack)
2.75 E(ets from S will be originating from a dif)-.11 E(ferent router)
-.275 E(than RPF'\(*,G\).)72 447.2 Q(If we only ha)5.5 E .33 -.165(ve a)
-.22 H(cti).165 E .33 -.165(ve \()-.275 H
(*,G\) Join state, we need to accept pack).165 E(ets from)-.11 E(RPF'\(\
S,G,rpt\), and add a Prune\(S,G,rpt\) to the periodic Join\(*,G\) messa\
ges that we send to)72 460.2 Q(RPF'\(*,G\) \(See Section 4.4.8\).)72
473.2 Q(The function)72 489.8 Q F1(MRIB.next_hop\( S \))2.75 E F0
(returns the ne)2.75 E(xt-hop PIM neighbor to)-.165 E -.11(wa)-.275 G
(rd the host S, as).11 E(indicated by the current MRIB.)72 502.8 Q
(If S is directly adjacent, then)5.5 E F1(MRIB.next_hop\( S \))2.75 E F0
(returns)2.75 E 2.75(NULL. At)72 515.8 R(the RP for G,)2.75 E F1
(MRIB.next_hop\( RP\(G \)\))2.75 E F0(returns NULL.)2.75 E(I_Am_Assert_\
loser\(S, G, I\) is true if the Assert start machine \(in section 4.5.1\
\) for \(S,G\) on)72 532.4 Q(Interf)72 545.4 Q
(ace I is in "I am Assert Loser" state.)-.11 E(I_Am_Assert_loser\(*, G,\
 I\) is true if the Assert start machine \(in section 4.5.2\) for \(*,G\
\) on)72 562 Q(Interf)72 575 Q(ace I is in "I am Assert Loser" state.)
-.11 E/F2 11/Times-Bold@0 SF(4.2.)72 601 Q/F3 13/Times-Bold@0 SF(Data P)
5.5 E(ack)-.13 E(et F)-.13 E(orwarding Rules)-.325 E F0(The PIM-SM pack)
72 617.6 Q(et forw)-.11 E(arding rules are de\214ned belo)-.11 E 2.75
(wi)-.275 G 2.75(np)-2.75 G(seudocode.)-2.75 E F1(iif)97 634.2 Q F0
(is the incoming interf)2.75 E(ace of the pack)-.11 E(et.)-.11 E F1(S)97
647.2 Q F0(is the source address of the pack)2.75 E(et.)-.11 E F1(G)97
660.2 Q F0(is the destination address of the pack)2.75 E
(et \(group address\).)-.11 E F1(RP)97 673.2 Q F0
(is the address of the Rendezv)2.75 E(ous Point for this group.)-.22 E
F1(RPF_interface\(S\))97 686.2 Q F0(is the interf)2.75 E
(ace the MRIB indicates w)-.11 E(ould be used to route pack)-.11 E(ets)
-.11 E(to S.)97 699.2 Q F1(RPF_interface\(RP\))97 712.2 Q F0
(is the interf)2.75 E(ace the MRIB indicates w)-.11 E
(ould be used to route pack)-.11 E(ets)-.11 E(to RP)97 725.2 Q 2.75(,e)
-1.221 G(xcept at the RP when it is the decapsulation interf)-2.915 E
(ace \(the "virtual" interf)-.11 E(ace on)-.11 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 169.221(elas Section)-.165 F 2.75
(4.2. [P)2.75 F(age 16])-.165 E EP
%%Page: 17 17
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(which re)97 85 Q(gister pack)
-.165 E(ets are recei)-.11 E -.165(ve)-.275 G(d\).).165 E
(First, we restart \(or start\) the K)72 101.6 Q(eepali)-.275 E .33
-.165(ve t)-.275 H
(imer if the source is on a directly connected subnet.).165 E
(Second, we check to see if the SPT bit should be set because we')72
118.2 Q .33 -.165(ve n)-.55 H .55 -.275(ow s).165 H(witched from the RP)
.275 E(tree to the SPT)72 131.2 Q(.)-.814 E(Ne)72 147.8 Q
(xt we check to see whether the pack)-.165 E
(et should be accepted based on TIB state and the interf)-.11 E(ace)-.11
E(that the pack)72 160.8 Q(et arri)-.11 E -.165(ve)-.275 G 2.75(do).165
G(n.)-2.75 E(If the pack)72 177.4 Q(et should be forw)-.11 E
(arded using \(S,G\) state, we then b)-.11 E(uild an outgoing interf)
-.22 E(ace list for)-.11 E(the pack)72 190.4 Q 2.75(et. If)-.11 F
(this list is not empty)2.75 E 2.75(,t)-.715 G
(hen we refresh the \(S,G\) state k)-2.75 E(eepali)-.11 E .33 -.165
(ve t)-.275 H(imer).165 E(.)-.605 E(If the pack)72 207 Q
(et should be forw)-.11 E
(arded using \(*,*,RP\) or \(*,G\) state, then we just b)-.11 E
(uild an outgoing)-.22 E(interf)72 220 Q(ace list for the pack)-.11 E
(et. W)-.11 E 2.75(ea)-.88 G
(lso check if we should initiate a switch to start recei)-2.75 E
(ving this)-.275 E(source on a shortest path tree.)72 233 Q
(Finally we remo)72 249.6 Q .33 -.165(ve t)-.165 H(he incoming interf)
.165 E(ace from the outgoing interf)-.11 E(ace list we')-.11 E .33 -.165
(ve c)-.55 H(reated, and if).165 E(the resulting outgoing interf)72
262.6 Q(ace list is not empty)-.11 E 2.75(,w)-.715 G 2.75(ef)-2.75 G
(orw)-2.75 E(ard the pack)-.11 E(et out of those interf)-.11 E(aces.)
-.11 E(On receipt on a data from S to G on interf)72 281.6 Q(ace iif:)
-.11 E/F1 11/Courier@0 SF(if\( DirectlyConnected\(S\) == TRUE \) {)78.6
307.6 Q(set KeepaliveTimer\(S,G\) to Keepalive_Period)111.6 320.6 Q(#)
111.6 333.6 Q F0(Note: re)6.6 E
(gister state transition may happen as a result)-.165 E F1(#)111.6 346.6
Q F0(of restarting K)6.6 E(eepali)-.275 E -.165(ve)-.275 G -.385(Ti).165
G(mer).385 E 2.75(,a)-.44 G(nd must be dealt with here.)-2.75 E F1(})
78.6 359.6 Q(Update_SPTbit\(S,G,iif\))78.6 385.6 Q(oiflist = NULL)78.6
398.6 Q(if\( iif == RPF_interface\(S\) AND UpstreamJPState\(S,G\) == Jo\
ined \) {)78.6 424.6 Q(oiflist = inherited_olist\(S,G\))98.4 437.6 Q
(if\( oiflist != NULL \) {)98.4 450.6 Q(restart KeepaliveTimer\(S,G\))
124.8 463.6 Q(})98.4 476.6 Q 6.6(}e)78.6 489.6 S
(lse if\( iif == RPF_interface\(RP\) AND SPTbit\(S,G\) == FALSE\) {)-6.6
E(oiflist = inherited_olist\(S,G,rpt\))91.8 502.6 Q
(CheckSwitchToSpt\(S,G\))91.8 515.6 Q 6.6(}e)78.6 528.6 S(lse {)-6.6 E
(#)98.4 541.6 Q F0(Note: RPF check f)6.6 E(ailed)-.11 E F1
(if \( SPTbit\(S,G\) == TRUE AND iif is in inherited_olist\(S,G\) \) {)
98.4 554.6 Q(send Assert\(S,G\) on iif)118.2 567.6 Q 6.6(}e)98.4 580.6 S
(lse if \( SPTbit\(S,G\) == FALSE AND)-6.6 E
(iif is in inherited_olist\(S,G,rpt\) {)177.6 593.6 Q
(send Assert\(*,G\) on iif)118.2 606.6 Q(})98.4 619.6 Q(})78.6 632.6 Q
(oiflist = oiflist \(-\) iif)78.6 658.6 Q
(forward packet on all interfaces in oiflist)78.6 671.6 Q F0
(This pseudocode emplo)72 690.6 Q(ys se)-.11 E -.165(ve)-.275 G
(ral "macro" de\214nitions:).165 E F1(directly_connected\(S\))72 707.2 Q
F0(is TR)2.75 E(UE if the source S is on an)-.44 E 2.75(ys)-.165 G
(ubnet that is directly)-2.75 E(connected to this router \(or for pack)
72 720.2 Q(ets originating on this router\).)-.11 E(Fenner/Handle)72 769
Q(y/Holbrook/K)-.165 E(ouv)-.385 E 169.221(elas Section)-.165 F 2.75
(4.2. [P)2.75 F(age 17])-.165 E EP
%%Page: 18 18
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF
(inherited_olist\(S,G\))72 85 Q F0(and)2.75 E F1
(inherited_olist\(S,G,rpt\))2.75 E F0(are de\214ned in Section 4.1.)2.75
E(Basically)72 114.6 Q F1(inherited_olist\(S,G\))2.75 E F0
(is the outgoing interf)2.75 E(ace list for pack)-.11 E(ets forw)-.11 E
(arded on)-.11 E(\(S,G\) state taking into account \(*,*,RP\) state, \(\
*,G\) state, asserts, etc.)72 127.6 Q F1(inherited_olist\(S,G,rpt\))72
144.2 Q F0(is the outgoing interf)2.75 E(ace for pack)-.11 E(ets forw)
-.11 E(arded on \(*,*,RP\))-.11 E(or \(*,G\) state taking into account \
\(S,G,rpt\) prune state, and asserts, etc.)72 157.2 Q
(Update_SPTbit\(S,G,iif\) is de\214ned in section 4.2.2.)72 173.8 Q
(CheckSwitchT)72 190.4 Q(oSpt\(S,G\) is de\214ned in section 4.2.1.)-.88
E(UpstreamJPState\(S,G\) is the state of the \214nite state machine in \
section 4.4.7.)72 207 Q -.275(Ke)72 223.6 S(epali).275 E -.165(ve)-.275
G(_Period is de\214ned in Section 4.10.).165 E
(Data triggered PIM-Assert messages sent from the abo)72 240.2 Q .33
-.165(ve f)-.165 H(orw).165 E(arding code should be rate-limited)-.11 E
(in a implementation-dependent manner)72 253.2 Q(.)-.605 E/F2 11
/Times-Bold@0 SF 2.75(4.2.1. Last)72 292.2 R(hop switcho)2.75 E -.11(ve)
-.11 G 2.75(rt).11 G 2.75(ot)-2.75 G(he SPT)-2.75 E F0
(In Sparse-Mode PIM, last-hop routers join the shared tree to)72 308.8 Q
-.11(wa)-.275 G(rds the RP).11 E 2.75(.O)-1.221 G(nce traf)-2.75 E
(\214c from)-.275 E(sources to joined groups arri)72 321.8 Q -.165(ve)
-.275 G 2.75(sa).165 G 2.75(tal)-2.75 G
(ast-hop router it has the option of switching to recei)-2.75 E .33
-.165(ve t)-.275 H(he).165 E(traf)72 334.8 Q
(\214c on a shortest path tree \(SPT\).)-.275 E
(The decision for a rotuer to switch to the SPT is controlled as follo)
72 351.4 Q(ws:)-.275 E F1(void)108 383.4 Q(CheckSwitchToSpt\(S,G\) {)108
396.4 Q(if \( \( pim_include\(*,G\) \(-\) pim_exclude\(S,G\))121.2 409.4
Q(\(+\) pim_include\(S,G\) != NULL \))167.4 422.4 Q
(AND SwitchToSptDesired\(S,G\) \) {)154.2 435.4 Q
(restart KeepAliveTimer\(S,G\);)167.4 448.4 Q(})121.2 461.4 Q(})108
474.4 Q F0(SwitchT)72 506.4 Q(oSptDesired\(S,G\) is a polic)-.88 E 2.75
(yf)-.165 G(unction that is implementation de\214ned. An "in\214nite)
-2.75 E(threshhold" polic)72 519.4 Q 2.75(yc)-.165 G
(an be implemented making SwitchT)-2.75 E(oSptDesired\(S,G\) return f)
-.88 E(alse all the)-.11 E 2.75(time. A)72 532.4 R
("switch on \214rst pack)2.75 E(et" polic)-.11 E 2.75(yc)-.165 G
(an be implemented by making SwitchT)-2.75 E(oSptDesired\(S,G\))-.88 E
(return true once a single pack)72 545.4 Q(et has been recei)-.11 E
-.165(ve)-.275 G 2.75(df).165 G(or the source and group.)-2.75 E F2 2.75
(4.2.2. Setting)72 584.4 R(and Clearing the \(S,G\) SPT bit)2.75 E F0
(The \(S,G\) SPTbit is used to distinguish whether to forw)72 601 Q
(ard on \(*,*,RP\)/\(*,G\) or on \(S,G\) state.)-.11 E(When switching f\
rom the RP tree to the source tree, there is a transition period when d\
ata is)72 614 Q(arri)72 627 Q(ving due to upstream \(*,*,RP\)/\(*,G\) s\
tate while upstream \(S,G\) state is being established)-.275 E
(during which time a router should continue to forw)72 640 Q
(ard only on \(*,*,RP\)/\(*,G\) state.)-.11 E(This pre)5.5 E -.165(ve)
-.275 G(nts).165 E(temporary black-holes that w)72 653 Q
(ould be caused by sending a Prune\(S,G,rpt\) before the upstream)-.11 E
(\(S,G\) state has \214nished being established.)72 666 Q
(Thus, when a pack)72 682.6 Q(et arri)-.11 E -.165(ve)-.275 G
(s, the \(S,G\) SPTbit is updated as follo).165 E(ws:)-.275 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.2.2. [P)2.75 F(age 18])-.165 E EP
%%Page: 19 19
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF(void)108 85
Q(Update_SPTbit\(S,G,iif\) {)108 98 Q(if \( iif == RPF_interface\(S\))
121.2 111 Q(AND JoinDesired\(S,G\) == TRUE)160.8 124 Q
(AND \( DirectlyConnected\(S\) == TRUE)160.8 137 Q
(OR RPF_interface\(S\) != RPF_interface\(RP\))200.4 150 Q
(OR inherited_olist\(S,G,rpt\) == NULL)200.4 163 Q
(OR RPF'\(S,G\) == RPF'\(*,G\) \) \) {)200.4 176 Q
(Set SPTbit\(S,G\) to TRUE)141 189 Q(})121.2 202 Q(})108 215 Q F0
(Additionally a router sets SPTbit\(S,G\) to TR)72 234 Q
(UE when it recei)-.44 E -.165(ve)-.275 G 2.75(sa).165 G 2.75(nA)-2.75 G
(ssert\(S,G\) on)-2.75 E(RPF_interf)72 247 Q(ace\(S\).)-.11 E F1
(JoinDesired\(S,G\))72 263.6 Q F0
(is de\214ned in Section 4.4.7, and indicates whether we ha)2.75 E .33
-.165(ve t)-.22 H(he appropriate).165 E
(\(S,G\) Join state to wish to send a Join\(S,G\) upstream.)72 276.6 Q
(Basically Update_SPTbit will set the SPT bit if we ha)72 293.2 Q .33
-.165(ve t)-.22 H(he appropriate \(S,G\) join state and the).165 E(pack)
72 306.2 Q(et arri)-.11 E -.165(ve)-.275 G 2.75(do).165 G 2.75(nt)-2.75
G(he correct upstream interf)-2.75 E
(ace for S, and one or more of the follo)-.11 E(wing)-.275 E
(conditions applies:)72 319.2 Q 14(1. The)72 335.8 R(source is directly\
 connected, in which case the switch to the SPT is a no-op.)2.75 E 14
(2. The)72 352.4 R(RPF interf)2.75 E(ace to S is dif)-.11 E
(ferent from the RPF interf)-.275 E(ace to the RP)-.11 E 5.5(.T)-1.221 G
(he pack)-5.5 E(et arri)-.11 E -.165(ve)-.275 G 2.75(do).165 G(n)-2.75 E
(RPF_interf)97 365.4 Q(ace\(S\), and so the SPT must ha)-.11 E .33 -.165
(ve b)-.22 H(een completed.).165 E 14(3. No-one)72 382 R -.11(wa)2.75 G
(nts the pack).11 E(et on the RP tree.)-.11 E 14(4. RPF'\(S,G\))72 398.6
R(== RPF'\(*,G\).)2.75 E(In this case the router will ne)5.5 E -.165(ve)
-.275 G 2.75(rb).165 G 2.75(ea)-2.75 G(ble to tell if the SPT has)-2.75
E(been completed, so it should just switch immediately)97 411.6 Q(.)
-.715 E(In the case where the RPF interf)72 428.2 Q
(ace is the same for the RP and for S, b)-.11 E(ut RPF'\(S,G\) and)-.22
E(RPF'\(*,G\) dif)72 441.2 Q(fer)-.275 E 2.75(,t)-.44 G(hen we w)-2.75 E
(ait for an Assert\(S,G\) which indicates that the upstream router with)
-.11 E(\(S,G\) state belie)72 454.2 Q -.165(ve)-.275 G 2.75(st).165 G
(he SPT has been completed.)-2.75 E(Ho)5.5 E(we)-.275 E -.165(ve)-.275 G
2.75(ri).165 G(tem \(3\) abo)-2.75 E .33 -.165(ve i)-.165 H 2.75(sn).165
G(eeded because)-2.75 E(there may not be an)72 467.2 Q 2.75(y\()-.165 G
(*,G\) state to trigger an Assert\(S,G\) to happen.)-2.75 E(The SPT bit\
 is cleared in the \(S,G\) upstream state machine \(see Section 4.4.7\)\
 when)72 483.8 Q(JoinDesired\(S,G\) becomes F)72 496.8 Q(ALSE.)-.814 E
/F2 11/Times-Bold@0 SF(4.3.)72 535.8 Q/F3 13/Times-Bold@0 SF
(PIM Register Messages)5.5 E F2(Ov)72 561.8 Q(er)-.11 E(view)-.11 E F0(\
The Designated Router \(DR\) on a LAN or point-to-point link encapsulat\
es multicast pack)72 578.4 Q(ets from)-.11 E
(local sources to the RP for the rele)72 591.4 Q -.275(va)-.275 G
(nt group unless it recently recei).275 E -.165(ve)-.275 G 2.75(daR).165
G -.165(eg)-2.75 G(ister Stop message).165 E
(for that \(S,G\) or \(*,G\) from the RP)72 604.4 Q 5.5(.W)-1.221 G
(hen the DR recei)-5.5 E -.165(ve)-.275 G 2.75(saR).165 G -.165(eg)-2.75
G(ister Stop message from the RP).165 E(,)-1.221 E(it starts a Re)72
617.4 Q(gister Stop timer to maintain this state.)-.165 E
(Just before the Re)5.5 E(gister Stop timer e)-.165 E(xpires,)-.165 E
(the DR sends a Null-Re)72 630.4 Q(gister Message to the RP to allo)
-.165 E 2.75(wt)-.275 G(he RP to refresh the Re)-2.75 E(gister Stop)
-.165 E(information at the DR.)72 643.4 Q(If the Re)5.5 E
(gister Stop timer actually e)-.165 E(xpires, the DR will resume)-.165 E
/F4 10/Symbol SF<ef>555 655.4 Q F0(encapsulating pack)72 656.4 Q
(ets from the source to the RP)-.11 E(.)-1.221 E F2 2.75(4.3.1. Sending)
72 695.4 R(Register Messages fr)2.75 E(om the DR)-.198 E F0(Ev)72 712 Q
(ery PIM-SM router has the capability to be a DR.)-.165 E
(The state machine belo)5.5 E 2.75(wi)-.275 G 2.75(su)-2.75 G(sed to)
-2.75 E(implement Re)72 725 Q(gister functionality)-.165 E 5.5(.F)-.715
G(or the purposes of speci\214cation, we represent the mechanism)-5.665
E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.3.1. [P)2.75 F(age 19])-.165 E EP
%%Page: 20 20
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(to encapsulate pack)72 85 Q
(ets to the RP as a Re)-.11 E(gister)-.165 E(-T)-.22 E(unnel interf)
-.495 E(ace, which is added to or remo)-.11 E -.165(ve)-.165 G(d).165 E
(from the \(S,G\) olist.)72 98 Q(The tunnel interf)5.5 E(ace then tak)
-.11 E(es part in the normal pack)-.11 E(et forw)-.11 E(arding rules)
-.11 E(speci\214ed in Section 4.2.)72 111 Q(If re)72 127.6 Q(gister sta\
te is maintained, it is maintained only for directly connected sources,\
 and is)-.165 E(per)72 140.6 Q 2.75(-\(S,G\). There)-.22 F
(are four states in the DR')2.75 E 2.75(sp)-.605 G(er)-2.75 E
(-\(S,G\) Re)-.22 E(gister state-machine:)-.165 E/F1 11/Times-Bold@0 SF
-.165(Jo)72 157.2 S(in \(J\)).165 E F0(The re)97 170.2 Q
(gister tunnel is "joined" \(the join is actually implicit, b)-.165 E
(ut the DR acts as if the RP has)-.22 E
(joined the DR on the tunnel interf)97 183.2 Q(ace\).)-.11 E F1
(Prune \(P\))72 199.8 Q F0(The re)97 212.8 Q
(gister tunnel is "pruned" \(this occurs when a Re)-.165 E
(gister Stop is recei)-.165 E -.165(ve)-.275 G(d\).).165 E F1 -.165(Jo)
72 229.4 S(in P).165 E(ending \(JP\))-.22 E F0(The re)97 242.4 Q
(gister tunnel is pruned b)-.165 E
(ut the DR is contemplating adding it back.)-.22 E F1(No Inf)72 259 Q
2.75(o\()-.275 G(NI\))-2.75 E F0(No information.)97 272 Q(This is the i\
nitial state, and the state when the router is not the DR.)5.5 E
(In addition, a Re)72 288.6 Q(gisterStop timer \(RST\) is k)-.165 E
(ept if the state machine in not in the No Info state.)-.11 E 27 237 396
496 -259.476 325 108 567.076 PBEGIN
%%BeginDocument: register-std.ps
%%Creator: idraw
%%DocumentFonts: Helvetica Times-Italic
%%Pages: 1
%%BoundingBox: 27 237 523 562
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 52 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def
/Times-Italic reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 8 8 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 9
895 699
1080 656
1099 489
1095 292
1019 185
900 139
620 141
441 142
336 230
9 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 5
301 697
180 733
220 806
292 814
295 745
5 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 3
894 696
604 633
350 694
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 3
894 696
607 806
343 725
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 3
892 695
815 496
879 311
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 3
889 261
1002 482
922 659
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 3
302 698
644 564
864 307
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 3
891 265
575 417
336 661
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 2
891 264
350 264
2 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 3
301 698
382 483
319 308
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I 3
299 263
205 474
273 657
3 BSpl
%I 2
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 179.5 ] concat
%I
301 697 48 48 Elli
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 273.5 -36.5 ] concat
%I
301 697 48 48 Elli
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22.5 -36.5 ] concat
%I
301 697 48 48 Elli
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 273.5 179.5 ] concat
%I
301 697 48 48 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 116.5 533 ] concat
%I
[
(Join)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 118 322.5 ] concat
%I
[
(No)
(Info)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 409 315.5 ] concat
%I
[
(Prune)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 417 531.5 ] concat
%I
[
(JP)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 30 582.5 ] concat
%I
[
(RP Changed)
([update reg tunnel])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 260 539 ] concat
%I
[
(RP Changed)
([Add reg tunnel])
([Cancel RegStop timer])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 477 505 ] concat
%I
[
(ActiveDR\(S,G\))
(-> FALSE)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 126.5 422.5 ] concat
%I
[
(ActiveDR\(S,G\))
(-> FALSE)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 212 498 ] concat
%I
[
(RegStop received from RP)
([Set RegStop timer to)
(randomized RSI - probetime])
([Remove reg tunnel])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 246 307.5 ] concat
%I
[
(ActiveDR\(S,G\))
(-> FALSE)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 36 473 ] concat
%I
[
(ActiveDR\(S,G\))
(->TRUE)
([Add reg tunnel)
(to olist\(S,G\)])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 200.5 580.5 ] concat
%I
[
(RegStop timer expires)
([Add reg tunnel to olist\(S,G\)] )
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 209 381 ] concat
%I
[
(RP Changed)
([Add reg tunnel to olist\(S,G\)])
([Cancel RegStop timer])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-times-medium-r-normal--8-80-75-75-p-44-iso8859-1
Times-Italic 8 SetF
%I t
[ 1 0 0 1 49.5 326.5 ] concat
%I
[
(Note: RegStop)
(timer doesn't)
(run in NoInfo)
(state)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 356 466 ] concat
%I
[
(RegStop received )
(from RP)
([Set RegStop timer)
(to randomized RSI)
(-probetime])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 422 405.5 ] concat
%I
[
(RegStop timer)
(expired)
([Send Null Register])
([Set RegStop timer)
(to probetime])
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND F1(Figur)188.294 606.076 Q 2.75(e1)-.198 G 2.75(:P)-2.75 G(er)
-2.97 E(-\(S,G\) r)-.407 E(egister state-machine at a DR)-.198 E F0
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.3.1. [P)2.75 F(age 20])-.165 E EP
%%Page: 21 21
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In tab)72 85 Q
(ular form, the state-machine is:)-.22 E .44 LW 503.99 95.75 72 95.75 DL
/F1 11/Times-Bold@0 SF(Ev)310.132 106 Q(ent)-.11 E 503.99 110.75 140.895
110.75 DL(Pr)75.538 126.5 Q .33 -.165(ev S)-.198 H(tate).165 E(Register)
147.202 121 Q(-)-.407 E(Stop T)147.202 134 Q(imer)-.198 E(expir)147.202
147 Q(es)-.198 E(CouldRegister)212.728 121 Q(\255>T)212.728 134 Q(rue)
-.814 E(CouldRegister)291.168 121 Q(\255>F)291.168 134 Q(alse)-.275 E
(Register)369.608 121 Q(-)-.407 E(Stop)369.608 134 Q -.198(re)369.608
147 S(cei).198 E -.11(ve)-.11 G(d).11 E(RP changed)440.337 121 Q 503.99
151.75 72 151.75 DL 503.99 153.75 72 153.75 DL F0 61.863(--)147.202 164
S 2.75(>Js)-61.863 G 35.881(tate -)-2.75 F 67.066(--)74.777 G
(add tunnel)212.728 177 Q F1(No Inf)75.538 170.5 Q 2.75(o\()-.275 G
(NI\))-2.75 E 503.99 181.75 72 181.75 DL F0 -51.699 61.863(-- -)147.202
192 T 2.75(>N)-61.863 G 2.75(Is)-2.75 G 28.555(tate ->)-2.75 F 2.75(Ps)
2.75 G 26.333(tate ->)-2.75 F 2.75(Js)2.75 G(tate)-2.75 E(remo)291.168
205 Q .33 -.165(ve t)-.165 H(unnel).165 E F1 -.165(Jo)75.538 218 S
(in \(J\)).165 E F0(remo)369.608 205 Q -.165(ve)-.165 G(tunnel; set)
369.608 218 Q(Re)369.608 231 Q(gister)-.165 E(-Stop)-.22 E(timer\(*\))
369.608 244 Q(redirect)440.337 205 Q(tunnel to ne)440.337 218 Q(w)-.275
E(RP)440.337 231 Q 503.99 248.75 72 248.75 DL(-> J state)147.202 259 Q
74.777(--)25.717 G 2.75(>N)-74.777 G 2.75(Is)-2.75 G 28.555(tate ->)
-2.75 F 2.75(Ps)2.75 G 26.333(tate ->)-2.75 F 2.75(Js)2.75 G(tate)-2.75
E(add tunnel)147.202 272 Q(remo)97.832 E .33 -.165(ve t)-.165 H(unnel)
.165 E F1 -.165(Jo)75.538 285 S(in P).165 E(ending)-.22 E(\(JP\))75.538
298 Q F0(set Re)369.608 272 Q(gister)-.165 E(-)-.22 E(Stop timer\(*\))
369.608 285 Q(redirect)440.337 272 Q(tunnel to ne)440.337 285 Q(w)-.275
E(RP; cancel)440.337 298 Q(Re)440.337 311 Q(gister)-.165 E(-Stop)-.22 E
(timer)440.337 324 Q 503.99 328.75 72 328.75 DL(-> JP state)147.202 339
Q 74.777(--)19.601 G 2.75(>N)-74.777 G 2.75(Is)-2.75 G 28.555(tate -)
-2.75 F(-> J state)67.066 E(remo)291.168 352 Q .33 -.165(ve t)-.165 H
(unnel).165 E F1(Prune \(P\))75.538 371.5 Q F0(set Re)147.202 352 Q
(gister)-.165 E(-)-.22 E(Stop)147.202 365 Q(timer\(**\);)147.202 378 Q
(send null)147.202 391 Q(re)147.202 404 Q(gister)-.165 E(redirect)
440.337 352 Q(tunnel to ne)440.337 365 Q(w)-.275 E(RP; cancel)440.337
378 Q(Re)440.337 391 Q(gister)-.165 E(-Stop)-.22 E(timer)440.337 404 Q
503.99 408.75 72 408.75 DL 435.03 110.75 435.03 408.75 DL 364.301 110.75
364.301 408.75 DL 285.861 110.75 285.861 408.75 DL 207.421 110.75
207.421 408.75 DL 140.895 95.75 140.895 408.75 DL 142.895 95.75 142.895
408.75 DL 503.99 95.75 503.99 408.75 DL 72 95.75 72 408.75 DL(Notes:)72
426.6 Q/F2 11/Courier@0 SF(\(*\))72 443.2 Q F0(The Re)2.75 E
(gisterStopT)-.165 E(imer is set to a random v)-.385 E
(alue chosen uniformly from the interv)-.275 E(al \( 0.5 *)-.275 E(Re)97
456.2 Q(gister_Suppression_T)-.165 E(ime, 1.5 * Re)-.385 E
(gister_Suppression_T)-.165 E(ime\) minus)-.385 E(Re)97 469.2 Q
(gister_Probe_T)-.165 E(ime;)-.385 E(Subtracting of)72 485.8 Q 2.75(fr)
-.275 G -.165(eg)-2.75 G(ister_probe_time is a bit unnecessary because \
it is really small compared to).165 E(re)72 498.8 Q
(gister suppression timeout, b)-.165 E(ut w)-.22 E
(as in the old spec and is k)-.11 E(ept for compatibility)-.11 E(.)-.715
E(\(**\) The Re)72 515.4 Q(gisterStopT)-.165 E(imer is set to re)-.385 E
(gister_probe_time.)-.165 E(The macro "CouldRe)72 532 Q
(gister" in the state machine is de\214ned as:)-.165 E F2
(Bool CouldRegister\(S,G\) {)85.2 564 Q
(return \( I_am_DR\( RPF_interface\(S\) \) AND)105 577 Q
(KeepaliveTimer\(S,G\) is running AND)164.4 590 Q
(DirectlyConnected\(S\) == TRUE \))164.4 603 Q(})85.2 616 Q F0
(Note that on reception of a pack)72 638.6 Q
(et at the DR from a directly connected source,)-.11 E F2
(KeepaliveTimer\(S,G\))72 651.6 Q F0(needs to be set by the pack)2.75 E
(et forw)-.11 E(arding rules)-.11 E/F3 11/Times-Italic@0 SF(befor)2.75 E
(e)-.407 E F0(computing)2.75 E F2(CouldRegister\(S,G\))72 664.6 Q F0
(in the re)2.75 E(gister state machine, or the \214rst pack)-.165 E
(et from a source w)-.11 E(on')-.11 E 2.75(tb)-.198 G(e)-2.75 E(re)72
677.6 Q(gistered.)-.165 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E
(ouv)-.385 E 160.971(elas Section)-.165 F 2.75(4.3.1. [P)2.75 F(age 21])
-.165 E EP
%%Page: 22 22
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF
(Encapsulating data pack)72 85 Q(ets in the Register T)-.11 E(unnel)
-1.012 E F0(Conceptually)72 101.6 Q 2.75(,t)-.715 G(he Re)-2.75 E
(gister T)-.165 E(unnel is an interf)-.495 E
(ace with a smaller MTU than the underlying IP)-.11 E(interf)72 114.6 Q
(ace to)-.11 E -.11(wa)-.275 G(rds the RP).11 E 5.5(.I)-1.221 G 2.75(Pf)
-5.5 G(ragmentation on pack)-2.75 E(ets forw)-.11 E(arded on the Re)-.11
E(gister T)-.165 E(unnel is)-.495 E
(performed based upon this smaller MTU.)72 127.6 Q
(The encapsulating DR may perform P)5.5 E(ath-MTU)-.165 E(Disco)72 140.6
Q -.165(ve)-.165 G(ry to the RP to determine the ef).165 E(fecti)-.275 E
.33 -.165(ve M)-.275 H(TU of the tunnel.).165 E(This smaller MTU tak)5.5
E(es both)-.11 E(the outer IP header and the PIM re)72 153.6 Q
(gister header o)-.165 E -.165(ve)-.165 G(rhead into account.).165 E
(If a multicast pack)5.5 E(et is)-.11 E(fragmented on the w)72 166.6 Q
(ay into the Re)-.11 E(gister T)-.165 E
(unnel, each fragment is encapsulated indi)-.495 E(vidually so)-.275 E
(contains IP)72 179.6 Q 2.75(,P)-1.221 G(IM, and inner IP headers.)-2.75
E(In IPv6, an ICMP Fragmentation Required message may be sent by the en\
capsulating DR.)72 196.2 Q(Just lik)72 212.8 Q 2.75(ea)-.11 G .33 -.165
(ny f)-2.75 H(orw).165 E(arded pack)-.11 E
(et, the TTL of the original data pack)-.11 E
(et is decremented before it is)-.11 E(encapsulated in the Re)72 225.8 Q
(gister T)-.165 E(unnel.)-.495 E
(The IP ECN bits should be copied from the original pack)72 242.4 Q
(et to the IP header of the encapsulating)-.11 E(pack)72 255.4 Q 2.75
(et. The)-.11 F 2.75(yS)-.165 G(HOULD NO)-2.75 E 2.75(Tb)-.44 G 2.75(es)
-2.75 G(et independently by the encapsulating router)-2.75 E(.)-.605 E
(The Dif)72 272 Q
(fserv Code Point \(DSCP\) should be copied from the original pack)-.275
E(et to the IP header of the)-.11 E(encapsulating pack)72 285 Q 2.75
(et. It)-.11 F(MA)2.75 E 2.75(Yb)-1.155 G 2.75(es)-2.75 G
(et independently by the encapsulating router)-2.75 E 2.75(,b)-.44 G
(ased upon static)-2.75 E(con\214guration or traf)72 298 Q
(\214c classi\214cation.)-.275 E
(See [11] for more discussion on setting the DSCP on)5.5 E(tunnels.)72
311 Q/F2 10/Symbol SF<ef>555 336 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M F1
(Handling RegisterStop\(*,G\) Messages at the DR)72 337 Q F2<ef>555
352.6 Q F0(An old RP might send a Re)72 353.6 Q
(gisterStop message with the source address set to all-zeros.)-.165 E
(This w)5.5 E(as)-.11 E
(the normal course of action in RFC 2326 when the re)72 366.6 Q
(gister message matched ag)-.165 E(ainst \(*,G\) state)-.055 E
(at the RP)72 379.6 Q 2.75(,a)-1.221 G(nd w)-2.75 E(as de\214ned as mea\
ning "stop encapsulating all sources for this group".)-.11 E(Ho)5.5 E
(we)-.275 E -.165(ve)-.275 G -.44(r,).165 G(the beha)72 392.6 Q
(vior of such a Re)-.22 E
(gisterStop\(*,G\) is ambiguous or incorrect in some circumstances.)
-.165 E 1.76 -.88(We s)72 409.2 T(pecify that an RP should not send Re)
.88 E(gisterStop\(*,G\) messages, b)-.165 E(ut for compatibility)-.22 E
2.75(,aD)-.715 G(R)-2.75 E(should be able to accept one if it is recei)
72 422.2 Q -.165(ve)-.275 G(d.).165 E F2<ef>555 437.8 Q F0 2.75(AR)72
438.8 S -.165(eg)-2.75 G(isterStop\(*,G\) should be treated as a Re).165
E(gisterStop\(S,G\) for all e)-.165 E(xisting \(S,G\) Re)-.165 E
(gister state)-.165 E 2.75(machines. A)72 451.8 R
(router should not apply a Re)2.75 E
(gisterStop\(*,G\) to sources that become acti)-.165 E .33 -.165(ve a)
-.275 H(fter the).165 E(Re)72 464.8 Q(gisterStop\(*,G\) w)-.165 E
(as recei)-.11 E -.165(ve)-.275 G(d.).165 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.3.2. [P)2.75 F(age 22])-.165 E EP
%%Page: 23 23
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF 2.75
(4.3.2. Recei)72 85 R(ving Register Messages at the RP)-.11 E F0
(When an RP recei)72 101.6 Q -.165(ve)-.275 G 2.75(saR).165 G -.165(eg)
-2.75 G(ister message, the course of action is decided according to the)
.165 E(follo)72 114.6 Q(wing pseudocode:)-.275 E/F2 11/Courier@0 SF
(packet_arrives_on_rp_tunnel\( pkt \) {)72 133.6 Q
(if\( outer.dst is not one of my addresses \) {)98.4 146.6 Q
(drop the packet silently.)124.8 159.6 Q(#)124.8 172.6 Q F0
(note that this should not happen if the lo)6.6 E(wer layer is w)-.275 E
(orking)-.11 E F2(})98.4 185.6 Q
(if\( I_am_RP\( G \) && outer.dst == RP\(G\) \) {)98.4 198.6 Q
(restart KeepaliveTimer\(S,G\))124.8 211.6 Q
(if\(\( inherited_olist\(S,G\) == NULL \) OR SPTbit\(S,G\)\) {)124.8
224.6 Q(send RegisterStop\(S,G\) to outer.src)151.2 237.6 Q 6.6(}e)124.8
250.6 S(lse {)-6.6 E(if\( ! pkt.NullRegisterBit \) {)151.2 263.6 Q
(decapsulate and pass the inner packet to the normal)177.6 276.6 Q
(forwarding path for forwarding on the \(*,G\) tree.)177.6 289.6 Q(})
151.2 302.6 Q(})124.8 315.6 Q 6.6(}e)98.4 328.6 S(lse {)-6.6 E
(send RegisterStop\(S,G\) to outer.src)124.8 341.6 Q(#)124.8 354.6 Q F0
(Note \(*\))6.6 E F2(})98.4 367.6 Q(})72 380.6 Q(outer.dst)72 416.2 Q F0
(is the IP destination address of the encapsulating header)2.75 E(.)
-.605 E F2(outer.src)72 442.2 Q F0
(is the IP source address of the encapsulating header)2.75 E 2.75(,i)
-.44 G(.e., the DR')-2.75 E 2.75(sa)-.605 G(ddress.)-2.75 E F2
(I_am_RP\(G\))72 468.2 Q F0(is true if the group-to-RP mapping indicate\
s that this router is the RP for the)2.75 E(group.)72 481.2 Q
(Note \(*\): This may block traf)72 497.8 Q(\214c from S for Re)-.275 E
(gister_Suppression_T)-.165 E(ime if the DR learned about a)-.385 E(ne)
97 510.8 Q 2.75(wg)-.275 G(roup-to-RP mapping before the RP did.)-2.75 E
(Ho)5.5 E(we)-.275 E -.165(ve)-.275 G .88 -.44(r, t).165 H(his doesn')
.44 E 2.75(tm)-.198 G(atter unless we \214gure)-2.75 E(out some w)97
523.8 Q(ay for the RP to also accept \(*,G\) joins when it doesn')-.11 E
2.75(ty)-.198 G(et realize that it is about)-2.75 E
(to become the RP for G.)97 536.8 Q
(This will all get sorted out once the RP learns the ne)5.5 E 2.75(wg)
-.275 G(roup-to-rp)-2.75 E 2.75(mapping. W)97 549.8 R 2.75(ed)-.88 G
(ecided to do nothing about this and just accept the f)-2.75 E
(act that PIM may suf)-.11 E(fer)-.275 E(interrupted \(*,G\) connecti)97
562.8 Q(vity follo)-.275 E(wing an RP change.)-.275 E -.275(Ke)72 579.4
S(epali).275 E -.165(ve)-.275 G -.385(Ti).165 G
(mer\(S,G\) is restarted at the RP when pack).385 E(ets arri)-.11 E .33
-.165(ve o)-.275 H 2.75(nt).165 G(he proper tunnel interf)-2.75 E(ace.)
-.11 E(This may cause the upstream \(S,G\) state machine to trigger a j\
oin if the inherited_olist\(S,G\) is not)72 592.4 Q(NULL;)72 605.4 Q
(An RP should preserv)72 622 Q 2.75(e\()-.165 G(S,G\) state that w)-2.75
E(as created in response to a Re)-.11 E(gister message for at least)
-.165 E 2.75(\(3*R)72 635 S -.165(eg)-2.75 G(ister_Suppression_T).165 E
(ime \), otherwise the RP may stop joining \(S,G\) before the DR for S)
-.385 E(has restarted sending re)72 648 Q 2.75(gisters. T)-.165 F(raf)
-.385 E(\214c w)-.275 E(ould then be interrupted until the Re)-.11 E
(gister)-.165 E(-Stop timer)-.22 E -.165(ex)72 661 S(pires at the DR.)
.165 E(Thus, at the RP)72 677.6 Q 2.75(,K)-1.221 G(eepali)-3.025 E -.165
(ve)-.275 G -.385(Ti).165 G(mer\(S,G\) should be restarted to \( 3 * Re)
.385 E(gister_Suppression_T)-.165 E(ime +)-.385 E(Re)72 690.6 Q
(gister_Probe_T)-.165 E(ime \).)-.385 E(Just lik)72 707.2 Q 2.75(ea)-.11
G .33 -.165(ny f)-2.75 H(orw).165 E(arded pack)-.11 E
(et, the TTL of the original data pack)-.11 E
(et is decremented after it is)-.11 E(decapsulated from the Re)72 720.2
Q(gister T)-.165 E(unnel.)-.495 E .4 LW 555 724.7 555 734.7 DL 555 714.7
555 724.7 DL 555 704.7 555 714.7 DL 555 694.7 555 704.7 DL 555 684.7 555
694.7 DL 555 680.1 555 690.1 DL(Fenner/Handle)72 769 Q(y/Holbrook/K)
-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75(4.3.2. [P)2.75 F
(age 23])-.165 E EP
%%Page: 24 24
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(The IP ECN bits should be copied from the IP header of the Re)72 85 Q
(gister pack)-.165 E(et to the decapsulated)-.11 E(pack)72 98 Q(et.)-.11
E(The Dif)72 114.6 Q(fserv Code Point \(DSCP\) should be copied from th\
e IP header of the Re)-.275 E(gister pack)-.165 E(et to)-.11 E
(the decapsulated pack)72 127.6 Q 2.75(et. The)-.11 F(RP MA)2.75 E 2.75
(Yr)-1.155 G(etain the DSCP of the inner pack)-2.75 E
(et, or re-classify the)-.11 E(pack)72 140.6 Q(et and apply a dif)-.11 E
(ferent DSCP)-.275 E 5.5(.S)-1.221 G
(cenarios where each of these might be useful are discussed)-5.5 E/F1 10
/Symbol SF<ef>555 152.6 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(in [11].)72 153.6 Q/F2 11/Times-Bold@0 SF(4.4.)72 179.6 Q/F3 13
/Times-Bold@0 SF(PIM J)5.5 E(oin/Prune Messages)-.195 E F0 2.75(AP)72
196.2 S(IM Join/Prune message consists of a list of groups and a list o\
f Joined and Pruned sources for)-2.75 E(each group.)72 209.2 Q
(When processing a recei)8.25 E -.165(ve)-.275 G 2.75(dJ).165 G
(oin/Prune message, each Joined or Pruned source for a)-2.75 E
(Group is ef)72 222.2 Q(fecti)-.275 E -.165(ve)-.275 G
(ly considered indi).165 E(vidually)-.275 E 2.75(,a)-.715 G
(nd applies to one or more of the follo)-2.75 E(wing state)-.275 E 2.75
(machines. When)72 235.2 R(considering a Join/Prune message whose PIM D\
estination \214eld addresses this)2.75 E(router)72 248.2 Q 2.75(,\()-.44
G(*,*,RP\) Joins and Prunes can af)-2.75 E
(fect the \(*,*,RP\) and \(S,G,rpt\) do)-.275 E(wnstream state)-.275 E
(machines, \(*,G\) Joins and Prunes can af)72 261.2 Q
(fect both the \(*,G\) and \(S,G,rpt\) do)-.275 E(wnstream state)-.275 E
(machines, while \(S,G\) and \(S,G,rpt\) Joins and Prunes can only af)72
274.2 Q(fect their respecti)-.275 E .33 -.165(ve d)-.275 H -.275(ow).165
G(nstream).275 E(state machines.)72 287.2 Q(When considering a Join/Pru\
ne message whose PIM Destination \214eld addresses)5.5 E(another router)
72 300.2 Q 2.75(,m)-.44 G(ost Join or Prune messages could af)-2.75 E
(fect each upstream state machine.)-.275 E F2 2.75(4.4.1. Recei)72 326.2
R(ving \(*,*,RP\) J)-.11 E(oin/Prune Messages)-.165 E F0(The per)72
342.8 Q(-interf)-.22 E(ace state-machine for recei)-.11 E
(ving \(*,*,RP\) Join/Prune Messages is gi)-.275 E -.165(ve)-.275 G 2.75
(nb).165 G(elo)-2.75 E -.715(w.)-.275 G(There are three states:)72 355.8
Q F2(NoInf)97 372.4 Q 2.75(o\()-.275 G(NI\))-2.75 E F0(The interf)122
385.4 Q(ace has no \(*,*,RP\) Join state and no timers running.)-.11 E
F2 -.165(Jo)97 402 S(in \(J\)).165 E F0(The interf)122 415 Q
(ace has \(*,*,RP\) Join state which will cause us to forw)-.11 E
(ard pack)-.11 E(ets destined)-.11 E(for an)122 428 Q 2.75(yg)-.165 G
(roup handled by RP from this interf)-2.75 E(ace e)-.11 E
(xcept if there is also \(S,G,rpt\) prune)-.165 E(information \(see Sec\
tion 4.4.4\) or the router lost an assert on this interf)122 441 Q(ace.)
-.11 E F2(PruneP)97 457.6 Q(ending \(PP\))-.22 E F0
(The router has recei)122 470.6 Q -.165(ve)-.275 G 2.75(daP).165 G
(rune\(*,*,RP\) on this interf)-2.75 E(ace from a do)-.11 E
(wnstream neighbor)-.275 E(and is w)122 483.6 Q
(aiting to see whether the prune will be o)-.11 E -.165(ve)-.165 G
(rridden by another do).165 E(wnstream)-.275 E(router)122 496.6 Q 5.5
(.F)-.605 G(or forw)-5.665 E
(arding purposes, the PrunePending state functions e)-.11 E(xactly lik)
-.165 E 2.75(et)-.11 G(he)-2.75 E(Join state.)122 509.6 Q
(In addition the state-machine uses tw)72 526.2 Q 2.75(ot)-.11 G(imers:)
-2.75 E F2(ExpiryT)97 542.8 Q(imer \(ET\))-.198 E F0
(This timer is restarted when a v)122 555.8 Q
(alid Join\(*,*,RP\) is recei)-.275 E -.165(ve)-.275 G 2.75(d. Expiry)
.165 F(of the)2.75 E(ExpiryT)122 568.8 Q(imer causes the interf)-.385 E
(ace state to re)-.11 E -.165(ve)-.275 G(rt to NoInfo for this group.)
.165 E F2(PruneP)97 585.4 Q(endingT)-.22 E(imer \(PPT\))-.198 E F0
(This timer is set when a v)122 598.4 Q(alid Prune\(*,*,RP\) is recei)
-.275 E -.165(ve)-.275 G 2.75(d. Expiry).165 F(of the)2.75 E
(PrunePendingT)122 611.4 Q(imer causes the interf)-.385 E
(ace state to re)-.11 E -.165(ve)-.275 G(rt to NoInfo for this group.)
.165 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.4.1. [P)2.75 F(age 24])-.165 E EP
%%Page: 25 25
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 309 365 225 225 -208 208 193.5
293 PBEGIN
%%BeginDocument: starstarrp-std.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 309 365 534 573
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 7.56686e-15 7.25873e-43 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
897 575
917 407
701 461
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 4
897 576
977 608
977 544
929 560
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 4
621 701
589 781
653 781
637 733
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 5
621 509
653 445
621 429
589 445
605 477
5 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
845 605
749 525
653 525
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
845 605
717 621
653 685
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 701
781 701
829 637
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 509
669 605
637 669
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 701
573 605
605 541
3 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 289.5 129.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 369.5 437.5 ] concat
%I
[
(NI)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 289.5 225.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 372 533 ] concat
%I
[
(J)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 401.5 177.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 480 484.5 ] concat
%I
[
(PP)
] Text
End

End %I eop

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 346 595 ] concat
%I
[
(\(*,*,RP\) Join)
([Refresh ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 506 500 ] concat
%I
[
(\(*,*,RP\) Prune)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 491 429 ] concat
%I
[
(ET Expires)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 401 511 ] concat
%I
[
(\(*,*,RP\) Join)
([Refresh ET])
([Cancel PPT])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 324.5 492.5 ] concat
%I
[
(ET )
(Expires)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 377.5 473 ] concat
%I
[
(\(*,*,RP\) Join)
([Start ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 350.5 392 ] concat
%I
[
(\(*,*,RP\) Prune)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 419 546.5 ] concat
%I
[
(\(*,*,RP\) Prune)
([Start PPT])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 402.495 447.502 ] concat
%I
[
(PPT Expires)
([Send PruneEcho])
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND/F1 11/Times-Bold@0 SF(Figur)167.009 332 Q 2.75(e2)-.198 G 2.75
(:D)-2.75 G -.11(ow)-2.75 G(nstr).11 E(eam \(*,*,RP\) per)-.198 E
(-interface state-machine)-.407 E F0(In tab)72 354.6 Q
(ular form, the per)-.22 E(-interf)-.22 E
(ace \(*,*,RP\) state-machine is:)-.11 E .44 LW 503.994 365.35 72 365.35
DL F1(Ev)319.524 375.6 Q(ent)-.11 E 503.994 380.35 157.997 380.35 DL(Pr)
78.894 389.6 Q .33 -.165(ev S)-.198 H(tate).165 E(Recei)169.338 390.6 Q
-.11(ve)-.11 G -.165(Jo)169.338 403.6 S(in\(*,*,RP\)).165 E(Recei)
254.491 390.6 Q -.11(ve)-.11 G(Prune\(*,*,RP\))254.491 403.6 Q(Prune P)
342.383 390.6 Q(ending)-.22 E -.198(Ti)342.383 403.6 S(mer Expir).198 E
(es)-.198 E(Expiry T)432.827 390.6 Q(imer)-.198 E(Expir)432.827 403.6 Q
(es)-.198 E 503.994 408.35 72 408.35 DL 503.994 410.35 72 410.35 DL F0
(-> J state)169.338 420.6 Q(-> NI state)45.344 E 86.781(--)40.757 G F1
(NoInf)78.894 433.6 Q 2.75(o\()-.275 G(NI\))-2.75 E F0(start Expiry)
169.338 433.6 Q -.385(Ti)169.338 446.6 S(mer).385 E 503.994 451.35 72
451.35 DL(-> J state)169.338 461.6 Q(-> PP state)45.344 E 86.781(--)
40.13 G 2.75(>N)-86.781 G 2.75(Is)-2.75 G(tate)-2.75 E F1 -.165(Jo)
78.894 474.6 S(in \(J\)).165 E F0(restart Expiry)169.338 474.6 Q -.385
(Ti)169.338 487.6 S(mer).385 E(start Prune)254.491 474.6 Q(Pending T)
254.491 487.6 Q(imer)-.385 E 503.994 492.35 72 492.35 DL(-> J state)
169.338 502.6 Q(-> PP state)45.344 E(-> NI state)40.13 E(-> NI state)
43.309 E F1(Prune P)78.894 522.1 Q(ending)-.22 E(\(PP\))78.894 535.1 Q
F0(restart Expiry)169.338 515.6 Q -.385(Ti)169.338 528.6 S(mer; cancel)
.385 E(Prune Pending)169.338 541.6 Q -.385(Ti)169.338 554.6 S(mer).385 E
(Send Prune-)342.383 515.6 Q(Echo\(*,*,RP\))342.383 528.6 Q 503.994
559.35 72 559.35 DL 422.486 380.35 422.486 559.35 DL 332.042 380.35
332.042 559.35 DL 244.15 380.35 244.15 559.35 DL 157.997 365.35 157.997
559.35 DL 159.997 365.35 159.997 559.35 DL 503.994 365.35 503.994 559.35
DL 72 365.35 72 559.35 DL(The transition e)72 577.2 Q -.165(ve)-.275 G
(nts "Recei).165 E .33 -.165(ve J)-.275 H(oin\(*,*,RP\)" and "Recei).165
E .33 -.165(ve P)-.275 H(rune\(*,*,RP\)" imply recei).165 E(ving a Join)
-.275 E(or Prune tar)72 590.2 Q(geted to this router')-.198 E 2.75(sa)
-.605 G(ddress on the recei)-2.75 E -.165(ve)-.275 G 2.75(di).165 G
(nterf)-2.75 E 2.75(ace. If)-.11 F(the destination address is)2.75 E(no\
t correct, these state transitions in this state machine must not occur)
72 603.2 Q 2.75(,a)-.44 G(lthough seeing such a)-2.75 E(pack)72 616.2 Q
(et may cause state transitions in other state machines.)-.11 E
(On unnumbered interf)72 632.8 Q
(aces on point-to-point links, the router')-.11 E 2.75(sa)-.605 G
(ddress should be the same as the)-2.75 E
(source address it chose for the hello pack)72 645.8 Q(et it sent o)-.11
E -.165(ve)-.165 G 2.75(rt).165 G(hat interf)-2.75 E 2.75(ace. Ho)-.11 F
(we)-.275 E -.165(ve)-.275 G 2.75(ro).165 G 2.75(np)-2.75 G
(oint-to-point)-2.75 E(links we also recommend that PIM messages with a\
 0.0.0.0 destination address are also accepted.)72 658.8 Q
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.4.1. [P)2.75 F(age 25])-.165 E EP
%%Page: 26 26
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF -.814(Tr)
72 85 S(ansitions fr).814 E(om NoInf)-.198 E 2.75(oS)-.275 G(tate)-2.75
E F0(When in NoInfo state, the follo)72 101.6 Q(wing e)-.275 E -.165(ve)
-.275 G(nt may trigger a transition:).165 E F1(Recei)97 118.2 Q .22 -.11
(ve J)-.11 H(oin\(*,*,RP\))-.055 E F0 2.75(AJ)122 131.2 S
(oin\(*,*,RP\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)
-2.75 G(nterf)-2.75 E(ace I with its Upstream Neighbor Address set to)
-.11 E(the router')122 144.2 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E
(The \(*,*,RP\) do)122 160.8 Q(wnstream state machine on interf)-.275 E
(ace I transitions to the Join state.)-.11 E(The Expiry T)122 173.8 Q
(imer \(ET\) is started, and set to the HoldT)-.385 E
(ime from the triggering)-.385 E/F2 10/Symbol SF<ef>555 185.8 Q<ef>-4.94
-10 M F0(Join/Prune message.)122 186.8 Q F1 -.814(Tr)72 212.8 S
(ansitions fr).814 E(om J)-.198 E(oin State)-.165 E F0
(When in Join state, the follo)72 229.4 Q(wing e)-.275 E -.165(ve)-.275
G(nts may trigger a transition:).165 E F1(Recei)97 246 Q .22 -.11(ve J)
-.11 H(oin\(*,*,RP\))-.055 E F0 2.75(AJ)122 259 S
(oin\(*,*,RP\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)
-2.75 G(nterf)-2.75 E(ace I with its Upstream Neighbor Address set to)
-.11 E(the router')122 272 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E
(The \(*,*,RP\) do)122 288.6 Q(wnstream state machine on interf)-.275 E
(ace I remains in Join state, and the)-.11 E(Expiry T)122 301.6 Q
(imer \(ET\) is restarted, set to maximum of its current v)-.385 E
(alue and the HoldT)-.275 E(ime)-.385 E F2<ef>555 313.6 Q<ef>-4.94 -10 M
<ef>-4.94 -10 M F0(from the triggering Join/Prune message.)122 314.6 Q
F1(Recei)97 331.2 Q .22 -.11(ve P)-.11 H(rune\(*,*,RP\)).11 E F0 2.75
(AP)122 344.2 S(rune\(*,*,RP\) is recei)-2.75 E -.165(ve)-.275 G 2.75
(do).165 G 2.75(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to)-.11 E(the router')122
357.2 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(*,*,RP\) do)122 373.8
Q(wnstream state machine on interf)-.275 E
(ace I transitions to the PrunePending)-.11 E 2.75(state. The)122 386.8
R(PrunePending timer is started; it is set to the J/P_Ov)2.75 E
(erride_Interv)-.165 E(al if the)-.275 E
(router has more than one neighbor on that interf)122 399.8 Q
(ace; otherwise it is set to zero causing)-.11 E(it to e)122 412.8 Q
(xpire immediately)-.165 E(.)-.715 E F1(Expiry T)97 429.4 Q(imer Expir)
-.198 E(es)-.198 E F0(The Expiry T)122 442.4 Q
(imer for the \(*,*,RP\) do)-.385 E(wnstream state machine on interf)
-.275 E(ace I e)-.11 E(xpires.)-.165 E(The \(*,*,RP\) do)122 459 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E F1 -.814(Tr)72 485 S
(ansitions fr).814 E(om PruneP)-.198 E(ending State)-.22 E F0
(When in PrunePending state, the follo)72 501.6 Q(wing e)-.275 E -.165
(ve)-.275 G(nts may trigger a transition:).165 E F1(Recei)97 518.2 Q .22
-.11(ve J)-.11 H(oin\(*,*,RP\))-.055 E F0 2.75(AJ)122 531.2 S
(oin\(*,*,RP\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)
-2.75 G(nterf)-2.75 E(ace I with its Upstream Neighbor Address set to)
-.11 E(the router')122 544.2 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E
(The \(*,*,RP\) do)122 560.8 Q(wnstream state machine on interf)-.275 E
(ace I transitions to the Join state.)-.11 E
(The PrunePending timer is canceled \(without triggering an e)122 573.8
Q(xpiry e)-.165 E -.165(ve)-.275 G 2.75(nt\). The).165 F(Expiry)2.75 E
-.385(Ti)122 586.8 S(mer is restarted, set to maximum of its current v)
.385 E(alue and the HoldT)-.275 E(ime from the)-.385 E F2<ef>555 598.8 Q
<ef>-4.94 -10 M<ef>-4.94 -10 M F0(triggering Join/Prune message.)122
599.8 Q F1(Expiry T)97 616.4 Q(imer Expir)-.198 E(es)-.198 E F0
(The Expiry T)122 629.4 Q(imer for the \(*,*,RP\) do)-.385 E
(wnstream state machine on interf)-.275 E(ace I e)-.11 E(xpires.)-.165 E
(The \(*,*,RP\) do)122 646 Q(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E F1(PruneP)97 662.6 Q
(ending T)-.22 E(imer Expir)-.198 E(es)-.198 E F0(The PrunePending T)122
675.6 Q(imer for the \(*,*,RP\) do)-.385 E
(wnstream state machine on interf)-.275 E(ace I)-.11 E -.165(ex)122
688.6 S(pires.).165 E(The \(*,*,RP\) do)122 705.2 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E 2.75(AP)122 718.2 S
(runeEcho\(*,*,RP\) is sent onto the subnet connected to interf)-2.75 E
(ace I.)-.11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.4.1. [P)2.75 F(age 26])-.165 E EP
%%Page: 27 27
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(The action "Send PruneEcho\(*,\
*,RP\)" is triggered when the router stops forw)122 85 Q(arding)-.11 E
(on an interf)122 98 Q(ace as a result of a prune.)-.11 E 2.75(AP)5.5 G
(runeEcho\(*,*,RP\) is simply a Prune\(*,*,RP\))-2.75 E
(message sent by the upstream router on a LAN with its o)122 111 Q
(wn address in the Upstream)-.275 E/F1 10/Symbol SF<ef>555 123 Q<ef>
-4.94 -10 M F0(Neighbor Address \214eld.)122 124 Q
(Its purpose is to add additional reliability so that if a Prune)5.5 E
(that should ha)122 137 Q .33 -.165(ve b)-.22 H(een o).165 E -.165(ve)
-.165 G(rridden by another router is lost locally on the LAN, then the)
.165 E(PruneEcho may be recei)122 150 Q -.165(ve)-.275 G 2.75(da).165 G
(nd cause the o)-2.75 E -.165(ve)-.165 G(rride to happen.).165 E 2.75
(AP)5.5 G(runeEcho\(*,*,RP\))-2.75 E
(need not be sent on a point-to-point interf)122 163 Q(ace.)-.11 E/F2 11
/Times-Bold@0 SF 2.75(4.4.2. Recei)72 202 R(ving \(*,G\) J)-.11 E
(oin/Prune Messages)-.165 E F0(When a router recei)72 218.6 Q -.165(ve)
-.275 G 2.75(saJ).165 G(oin\(*,G\) or Prune\(*,G\) it must \214rst chec\
k to see whether the RP in the)-2.75 E
(message matches RP\(G\) \(the router')72 231.6 Q 2.75(si)-.605 G
(dea of who the RP is\).)-2.75 E(If the RP in the message does not)5.5 E
(match RP\(G\) the Join or Prune should be silently dropped.)72 244.6 Q
(If a router has no RP information \(e.g.)5.5 E(has not recently recei)
72 257.6 Q -.165(ve)-.275 G 2.75(daB).165 G
(SR message\) then it may choose to accept Join\(*,G\) or Prune\(*,G\))
-2.75 E(and treat the RP in the message as RP\(G\).)72 270.6 Q(The per)
72 287.2 Q(-interf)-.22 E(ace state-machine for recei)-.11 E
(ving \(*,G\) Join/Prune Messages is gi)-.275 E -.165(ve)-.275 G 2.75
(nb).165 G(elo)-2.75 E 4.18 -.715(w. T)-.275 H(here).715 E
(are three states:)72 300.2 Q F2(NoInf)97 316.8 Q 2.75(o\()-.275 G(NI\))
-2.75 E F0(The interf)122 329.8 Q
(ace has no \(*,G\) Join state and no timers running.)-.11 E F2 -.165
(Jo)97 346.4 S(in \(J\)).165 E F0(The interf)122 359.4 Q
(ace has \(*,G\) Join state which will cause us to forw)-.11 E(ard pack)
-.11 E(ets destined for)-.11 E 2.75(Gf)122 372.4 S(rom this interf)-2.75
E(ace e)-.11 E
(xcept if there is also \(S,G,rpt\) prune information \(see Section)
-.165 E(4.4.4\) or the router lost an assert on this interf)122 385.4 Q
(ace.)-.11 E F2(PruneP)97 402 Q(ending \(PP\))-.22 E F0
(The router has recei)122 415 Q -.165(ve)-.275 G 2.75(daP).165 G
(rune\(*,G\) on this interf)-2.75 E(ace from a do)-.11 E
(wnstream neighbor)-.275 E(and is w)122 428 Q
(aiting to see whether the prune will be o)-.11 E -.165(ve)-.165 G
(rridden by another do).165 E(wnstream)-.275 E(router)122 441 Q 5.5(.F)
-.605 G(or forw)-5.665 E
(arding purposes, the PrunePending state functions e)-.11 E(xactly lik)
-.165 E 2.75(et)-.11 G(he)-2.75 E(Join state.)122 454 Q
(In addition the state-machine uses tw)72 470.6 Q 2.75(ot)-.11 G(imers:)
-2.75 E F2(ExpiryT)97 487.2 Q(imer \(ET\))-.198 E F0
(This timer is restarted when a v)122 500.2 Q(alid Join\(*,G\) is recei)
-.275 E -.165(ve)-.275 G 2.75(d. Expiry).165 F(of the ExpiryT)2.75 E
(imer)-.385 E(causes the interf)122 513.2 Q(ace state to re)-.11 E -.165
(ve)-.275 G(rt to NoInfo for this group.).165 E F2(PruneP)97 529.8 Q
(endingT)-.22 E(imer \(PPT\))-.198 E F0(This timer is set when a v)122
542.8 Q(alid Prune\(*,G\) is recei)-.275 E -.165(ve)-.275 G 2.75
(d. Expiry).165 F(of the)2.75 E(PrunePendingT)122 555.8 Q
(imer causes the interf)-.385 E(ace state to re)-.11 E -.165(ve)-.275 G
(rt to NoInfo for this group.).165 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.2. [P)2.75 F(age 27])-.165 E EP
%%Page: 28 28
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 309 365 222 222 -208 208 195
293 PBEGIN
%%BeginDocument: starg-std.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 309 365 531 573
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 7.56686e-15 7.25873e-43 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
897 575
917 407
701 461
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 4
897 576
977 608
977 544
929 560
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 4
621 701
589 781
653 781
637 733
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 5
621 509
653 445
621 429
589 445
605 477
5 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
845 605
749 525
653 525
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
845 605
717 621
653 685
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 701
781 701
829 637
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 509
669 605
637 669
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 701
573 605
605 541
3 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 289.5 129.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 369.5 437.5 ] concat
%I
[
(NI)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 289.5 225.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 372 533 ] concat
%I
[
(J)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 401.5 177.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 480 484.5 ] concat
%I
[
(PP)
] Text
End

End %I eop

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 491 429 ] concat
%I
[
(ET Expires)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 324.5 492.5 ] concat
%I
[
(ET )
(Expires)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 402.495 447.502 ] concat
%I
[
(PPT Expires)
([Send PruneEcho])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 346 595 ] concat
%I
[
(Join\(*,G\))
([Refresh ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 419 546.5 ] concat
%I
[
(Prune\(*,G\))
([Start PPT])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 506 500 ] concat
%I
[
(Prune\(*,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 401 511 ] concat
%I
[
(Join\(*,G\))
([Refresh ET])
([Cancel PPT])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 377.5 473 ] concat
%I
[
(Join\(*,G\))
([Start ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 350.5 392 ] concat
%I
[
(Prune\(*,G\))
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND/F1 11/Times-Bold@0 SF(Figur)174.187 332 Q 2.75(e3)-.198 G 2.75
(:D)-2.75 G -.11(ow)-2.75 G(nstr).11 E(eam \(*,G\) per)-.198 E
(-interface state-machine)-.407 E F0(In tab)72 354.6 Q
(ular form, the per)-.22 E(-interf)-.22 E(ace \(*,G\) state-machine is:)
-.11 E .44 LW 503.995 365.35 72 365.35 DL F1(Ev)319.728 375.6 Q(ent)-.11
E 503.995 380.35 158.337 380.35 DL(Pr)79.03 389.6 Q .33 -.165(ev S)-.198
H(tate).165 E(Recei)169.882 390.6 Q -.11(ve)-.11 G -.165(Jo)169.882
403.6 S(in\(*,G\)).165 E(Recei)255.443 390.6 Q -.11(ve)-.11 G
(Prune\(*,G\))255.443 403.6 Q(Prune P)341.84 390.6 Q(ending)-.22 E -.198
(Ti)341.84 403.6 S(mer Expir).198 E(es)-.198 E(Expiry T)432.692 390.6 Q
(imer)-.198 E(Expir)432.692 403.6 Q(es)-.198 E 503.995 408.35 72 408.35
DL 503.995 410.35 72 410.35 DL F0(-> J state)169.882 420.6 Q
(-> NI state)45.752 E 87.189(--)39.262 G F1(NoInf)79.03 433.6 Q 2.75
(o\()-.275 G(NI\))-2.75 E F0(start Expiry)169.882 433.6 Q -.385(Ti)
169.882 446.6 S(mer).385 E 503.995 451.35 72 451.35 DL(-> J state)
169.882 461.6 Q(-> PP state)45.752 E 87.189(--)38.635 G 2.75(>N)-87.189
G 2.75(Is)-2.75 G(tate)-2.75 E F1 -.165(Jo)79.03 474.6 S(in \(J\)).165 E
F0(restart Expiry)169.882 474.6 Q -.385(Ti)169.882 487.6 S(mer).385 E
(start Prune)255.443 474.6 Q(Pending T)255.443 487.6 Q(imer)-.385 E
503.995 492.35 72 492.35 DL(-> J state)169.882 502.6 Q(-> PP state)
45.752 E(-> NI state)38.635 E(-> NI state)43.717 E F1(Prune P)79.03
522.1 Q(ending)-.22 E(\(PP\))79.03 535.1 Q F0(restart Expiry)169.882
515.6 Q -.385(Ti)169.882 528.6 S(mer; cancel).385 E(Prune Pending)
169.882 541.6 Q -.385(Ti)169.882 554.6 S(mer).385 E(Send Prune-)341.84
515.6 Q(Echo\(*,G\))341.84 528.6 Q 503.995 559.35 72 559.35 DL 422.147
380.35 422.147 559.35 DL 331.295 380.35 331.295 559.35 DL 244.898 380.35
244.898 559.35 DL 158.337 365.35 158.337 559.35 DL 160.337 365.35
160.337 559.35 DL 503.995 365.35 503.995 559.35 DL 72 365.35 72 559.35
DL(The transition e)72 577.2 Q -.165(ve)-.275 G(nts "Recei).165 E .33
-.165(ve J)-.275 H(oin\(*,G\)" and "Recei).165 E .33 -.165(ve P)-.275 H
(rune\(*,G\)" imply recei).165 E(ving a Join or)-.275 E(Prune tar)72
590.2 Q(geted to this router')-.198 E 2.75(sa)-.605 G
(ddress on the recei)-2.75 E -.165(ve)-.275 G 2.75(di).165 G(nterf)-2.75
E 2.75(ace. If)-.11 F(the destination address is not)2.75 E
(correct, these state transitions in this state machine must not occur)
72 603.2 Q 2.75(,a)-.44 G(lthough seeing such a pack)-2.75 E(et)-.11 E
(may cause state transitions in other state machines.)72 616.2 Q
(On unnumbered interf)72 632.8 Q
(aces on point-to-point links, the router')-.11 E 2.75(sa)-.605 G
(ddress should be the same as the)-2.75 E
(source address it chose for the hello pack)72 645.8 Q(et it sent o)-.11
E -.165(ve)-.165 G 2.75(rt).165 G(hat interf)-2.75 E 2.75(ace. Ho)-.11 F
(we)-.275 E -.165(ve)-.275 G 2.75(ro).165 G 2.75(np)-2.75 G
(oint-to-point)-2.75 E(links we also recommend that PIM messages with a\
 0.0.0.0 destination address are also accepted.)72 658.8 Q F1 -.814(Tr)
72 684.8 S(ansitions fr).814 E(om NoInf)-.198 E 2.75(oS)-.275 G(tate)
-2.75 E F0(When in NoInfo state, the follo)72 701.4 Q(wing e)-.275 E
-.165(ve)-.275 G(nt may trigger a transition:).165 E(Fenner/Handle)72
769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.2. [P)2.75 F(age 28])-.165 E EP
%%Page: 29 29
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(Recei)97
85 Q .22 -.11(ve J)-.11 H(oin\(*,G\))-.055 E F0 2.75(AJ)122 98 S
(oin\(*,G\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)
-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to the)-.11 E(router')122
111 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(*,G\) do)122 127.6 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the Join state.)-.11 E(The)5.5 E(Expiry T)122
140.6 Q(imer \(ET\) is started, and set to the HoldT)-.385 E
(ime from the triggering Join/Prune)-.385 E/F2 10/Symbol SF<ef>555 152.6
Q<ef>-4.94 -10 M F0(message.)122 153.6 Q F1 -.814(Tr)72 179.6 S
(ansitions fr).814 E(om J)-.198 E(oin State)-.165 E F0
(When in Join state, the follo)72 196.2 Q(wing e)-.275 E -.165(ve)-.275
G(nts may trigger a transition:).165 E F1(Recei)97 212.8 Q .22 -.11
(ve J)-.11 H(oin\(*,G\))-.055 E F0 2.75(AJ)122 225.8 S
(oin\(*,G\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)
-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to the)-.11 E(router')122
238.8 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(*,G\) do)122 255.4 Q
(wnstream state machine on interf)-.275 E
(ace I remains in Join state, and the)-.11 E(Expiry T)122 268.4 Q
(imer \(ET\) is restarted, set to maximum of its current v)-.385 E
(alue and the HoldT)-.275 E(ime)-.385 E F2<ef>555 280.4 Q<ef>-4.94 -10 M
<ef>-4.94 -10 M F0(from the triggering Join/Prune message.)122 281.4 Q
F1(Recei)97 298 Q .22 -.11(ve P)-.11 H(rune\(*,G\)).11 E F0 2.75(AP)122
311 S(rune\(*,G\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75
(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to the)-.11 E(router')122
324 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(*,G\) do)122 340.6 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the PrunePending)-.11 E 2.75(state. The)122 353.6
R(PrunePending timer is started; it is set to the J/P_Ov)2.75 E
(erride_Interv)-.165 E(al if the)-.275 E
(router has more than one neighbor on that interf)122 366.6 Q
(ace; otherwise it is set to zero causing)-.11 E(it to e)122 379.6 Q
(xpire immediately)-.165 E(.)-.715 E F1(Expiry T)97 396.2 Q(imer Expir)
-.198 E(es)-.198 E F0(The Expiry T)122 409.2 Q(imer for the \(*,G\) do)
-.385 E(wnstream state machine on interf)-.275 E(ace I e)-.11 E(xpires.)
-.165 E(The \(*,G\) do)122 425.8 Q(wnstream state machine on interf)
-.275 E(ace I transitions to the NoInfo state.)-.11 E F1 -.814(Tr)72
451.8 S(ansitions fr).814 E(om PruneP)-.198 E(ending State)-.22 E F0
(When in PrunePending state, the follo)72 468.4 Q(wing e)-.275 E -.165
(ve)-.275 G(nts may trigger a transition:).165 E F1(Recei)97 485 Q .22
-.11(ve J)-.11 H(oin\(*,G\))-.055 E F0 2.75(AJ)122 498 S
(oin\(*,G\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)
-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to the)-.11 E(router')122
511 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(*,G\) do)122 527.6 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the Join state.)-.11 E(The)5.5 E
(PrunePending timer is canceled \(without triggering an e)122 540.6 Q
(xpiry e)-.165 E -.165(ve)-.275 G 2.75(nt\). The).165 F(Expiry)2.75 E
-.385(Ti)122 553.6 S(mer is restarted, set to maximum of its current v)
.385 E(alue and the HoldT)-.275 E(ime from the)-.385 E F2<ef>555 565.6 Q
<ef>-4.94 -10 M<ef>-4.94 -10 M F0(triggering Join/Prune message.)122
566.6 Q F1(Expiry T)97 583.2 Q(imer Expir)-.198 E(es)-.198 E F0
(The Expiry T)122 596.2 Q(imer for the \(*,G\) do)-.385 E
(wnstream state machine on interf)-.275 E(ace I e)-.11 E(xpires.)-.165 E
(The \(*,G\) do)122 612.8 Q(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E F1(PruneP)97 629.4 Q
(ending T)-.22 E(imer Expir)-.198 E(es)-.198 E F0(The PrunePending T)122
642.4 Q(imer for the \(*,G\) do)-.385 E
(wnstream state machine on interf)-.275 E(ace I)-.11 E -.165(ex)122
655.4 S(pires.).165 E(The \(*,G\) do)122 672 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E(A)5.5 E
(PruneEcho\(*,G\) is sent onto the subnet connected to interf)122 685 Q
(ace I.)-.11 E(The action "Send PruneEcho\(*,G\)" is triggered when the\
 router stops forw)122 701.6 Q(arding on)-.11 E(an interf)122 714.6 Q
(ace as a result of a prune.)-.11 E 2.75(AP)5.5 G
(runeEcho\(*,G\) is simply a Prune\(*,G\) message)-2.75 E(Fenner/Handle)
72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F
2.75(4.4.2. [P)2.75 F(age 29])-.165 E EP
%%Page: 30 30
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(sent by the upstream router on a LAN with its o)122 85 Q
(wn address in the Upstream Neighbor)-.275 E/F1 10/Symbol SF<ef>555 97 Q
<ef>-4.94 -10 M F0(Address \214eld.)122 98 Q(Its purpose is to add addi\
tional reliability so that if a Prune that should)5.5 E(ha)122 111 Q .33
-.165(ve b)-.22 H(een o).165 E -.165(ve)-.165 G(rridden by another rout\
er is lost locally on the LAN, then the PruneEcho).165 E(may be recei)
122 124 Q -.165(ve)-.275 G 2.75(da).165 G(nd cause the o)-2.75 E -.165
(ve)-.165 G(rride to happen.).165 E 2.75(AP)5.5 G
(runeEcho\(*,G\) need not be)-2.75 E(sent on a point-to-point interf)122
137 Q(ace.)-.11 E/F2 11/Times-Bold@0 SF 2.75(4.4.3. Recei)72 163 R
(ving \(S,G\) J)-.11 E(oin/Prune Messages)-.165 E F0(The per)72 179.6 Q
(-interf)-.22 E(ace state machine for recei)-.11 E
(ving \(S,G\) Join/Prune messages is gi)-.275 E -.165(ve)-.275 G 2.75
(nb).165 G(elo)-2.75 E 1.43 -.715(w, a)-.275 H(nd is).715 E
(almost identical to that for \(*,G\) messages.)72 192.6 Q
(There are three states:)5.5 E F2(NoInf)97 209.2 Q 2.75(o\()-.275 G
(NI\))-2.75 E F0(The interf)122 222.2 Q
(ace has no \(S,G\) Join state and no \(S,G\) timers running.)-.11 E F2
-.165(Jo)97 238.8 S(in \(J\)).165 E F0(The interf)122 251.8 Q
(ace has \(S,G\) Join state which will cause us to forw)-.11 E(ard pack)
-.11 E(ets from S)-.11 E(destined for G from this interf)122 264.8 Q
(ace if the \(S,G\) state is acti)-.11 E .33 -.165(ve \()-.275 H
(the SPTbit is set\) e).165 E(xcept)-.165 E
(if the router lost an assert on this interf)122 277.8 Q(ace.)-.11 E F2
(PruneP)97 294.4 Q(ending \(PP\))-.22 E F0(The router has recei)122
307.4 Q -.165(ve)-.275 G 2.75(daP).165 G(rune\(S,G\) on this interf)
-2.75 E(ace from a do)-.11 E(wnstream neighbor)-.275 E(and is w)122
320.4 Q(aiting to see whether the prune will be o)-.11 E -.165(ve)-.165
G(rridden by another do).165 E(wnstream)-.275 E(router)122 333.4 Q 5.5
(.F)-.605 G(or forw)-5.665 E
(arding purposes, the PrunePending state functions e)-.11 E(xactly lik)
-.165 E 2.75(et)-.11 G(he)-2.75 E(Join state.)122 346.4 Q
(In addition there are tw)72 363 Q 2.75(ot)-.11 G(imers:)-2.75 E F2
(ExpiryT)97 379.6 Q(imer \(ET\))-.198 E F0(This timer is set when a v)
122 392.6 Q(alid Join\(S,G\) is recei)-.275 E -.165(ve)-.275 G 2.75
(d. Expiry).165 F(of the ExpiryT)2.75 E(imer causes)-.385 E(the interf)
122 405.6 Q(ace state to re)-.11 E -.165(ve)-.275 G
(rt to NoInfo for this group.).165 E F2(PruneP)97 422.2 Q(endingT)-.22 E
(imer \(PPT\))-.198 E F0(This timer is set when a v)122 435.2 Q
(alid Prune\(S,G\) is recei)-.275 E -.165(ve)-.275 G 2.75(d. Expiry).165
F(of the)2.75 E(PrunePendingT)122 448.2 Q(imer causes the interf)-.385 E
(ace state to re)-.11 E -.165(ve)-.275 G(rt to NoInfo for this group.)
.165 E 309 365 225 225 -202 202 193.5 669.2 PBEGIN
%%BeginDocument: sg-std.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 309 365 534 567
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 7.56686e-15 7.25873e-43 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
897 575
917 407
701 461
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 4
897 576
977 608
977 544
929 560
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 4
621 701
589 781
653 781
637 733
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 5
621 509
653 445
621 429
589 445
605 477
5 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
845 605
749 525
653 525
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
845 605
717 621
653 685
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 701
781 701
829 637
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 509
669 605
637 669
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 701
573 605
605 541
3 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 289.5 129.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 369.5 437.5 ] concat
%I
[
(NI)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 289.5 225.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 372 533 ] concat
%I
[
(J)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 401.5 177.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 480 484.5 ] concat
%I
[
(PP)
] Text
End

End %I eop

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 491 429 ] concat
%I
[
(ET Expires)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 324.5 492.5 ] concat
%I
[
(ET )
(Expires)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 405.996 446.001 ] concat
%I
[
(PPT Expires)
([Send PruneEcho])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 348.5 589 ] concat
%I
[
(Join\(S,G\))
([Refresh ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 419 546.5 ] concat
%I
[
(Prune\(S,G\))
([Start PPT])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 506 500 ] concat
%I
[
(Prune\(S,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 401 511 ] concat
%I
[
(Join\(S,G\))
([Refresh ET])
([Cancel PPT])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 377.5 473 ] concat
%I
[
(Join\(S,G\))
([Start ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 350.5 392 ] concat
%I
[
(Prune\(S,G\))
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND F2(Figur)173.879 708.2 Q 2.75(e4)-.198 G 2.75(:D)-2.75 G -.11
(ow)-2.75 G(nstr).11 E(eam per)-.198 E(-interface \(S,G\) state-machine)
-.407 E F0(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.4.3. [P)2.75 F(age 30])-.165 E EP
%%Page: 31 31
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In tab)72 85 Q
(ular form, the state machine is:)-.22 E .44 LW 503.995 95.75 72 95.75
DL/F1 11/Times-Bold@0 SF(Ev)319.728 106 Q(ent)-.11 E 503.995 110.75
158.337 110.75 DL(Pr)79.03 120 Q .33 -.165(ev S)-.198 H(tate).165 E
(Recei)169.882 121 Q -.11(ve)-.11 G -.165(Jo)169.882 134 S(in\(S,G\))
.165 E(Recei)255.443 121 Q -.11(ve)-.11 G(Prune\(S,G\))255.443 134 Q
(Prune P)341.84 121 Q(ending)-.22 E -.198(Ti)341.84 134 S(mer Expir).198
E(es)-.198 E(Expiry T)432.692 121 Q(imer)-.198 E(Expir)432.692 134 Q(es)
-.198 E 503.995 138.75 72 138.75 DL 503.995 140.75 72 140.75 DL F0
(-> J state)169.882 151 Q(-> NI state)45.752 E 87.189(--)39.262 G F1
(NoInf)79.03 164 Q 2.75(o\()-.275 G(NI\))-2.75 E F0(start Expiry)169.882
164 Q -.385(Ti)169.882 177 S(mer).385 E 503.995 181.75 72 181.75 DL
(-> J state)169.882 192 Q(-> PP state)45.752 E 87.189(--)38.635 G 2.75
(>N)-87.189 G 2.75(Is)-2.75 G(tate)-2.75 E F1 -.165(Jo)79.03 205 S
(in \(J\)).165 E F0(restart Expiry)169.882 205 Q -.385(Ti)169.882 218 S
(mer).385 E(start Prune)255.443 205 Q(Pending T)255.443 218 Q(imer)-.385
E 503.995 222.75 72 222.75 DL(-> J state)169.882 233 Q(-> PP state)
45.752 E(-> NI state)38.635 E(-> NI state)43.717 E F1(Prune P)79.03
252.5 Q(ending)-.22 E(\(PP\))79.03 265.5 Q F0(restart Expiry)169.882 246
Q -.385(Ti)169.882 259 S(mer; cancel).385 E(Prune Pending)169.882 272 Q
-.385(Ti)169.882 285 S(mer).385 E(Send Prune-)341.84 246 Q(Echo\(S,G\))
341.84 259 Q 503.995 289.75 72 289.75 DL 422.147 110.75 422.147 289.75
DL 331.295 110.75 331.295 289.75 DL 244.898 110.75 244.898 289.75 DL
158.337 95.75 158.337 289.75 DL 160.337 95.75 160.337 289.75 DL 503.995
95.75 503.995 289.75 DL 72 95.75 72 289.75 DL(The transition e)72 307.6
Q -.165(ve)-.275 G(nts "Recei).165 E .33 -.165(ve J)-.275 H
(oin\(S,G\)" and "Recei).165 E .33 -.165(ve P)-.275 H
(rune\(S,G\)" imply recei).165 E(ving a Join or)-.275 E(Prune tar)72
320.6 Q(geted to this router')-.198 E 2.75(sa)-.605 G
(ddress on the recei)-2.75 E -.165(ve)-.275 G 2.75(di).165 G(nterf)-2.75
E 2.75(ace. If)-.11 F(the destination address is not)2.75 E
(correct, these state transitions in this state machine must not occur)
72 333.6 Q 2.75(,a)-.44 G(lthough seeing such a pack)-2.75 E(et)-.11 E
(may cause state transitions in other state machines.)72 346.6 Q
(On unnumbered interf)72 363.2 Q
(aces on point-to-point links, the router')-.11 E 2.75(sa)-.605 G
(ddress should be the same as the)-2.75 E
(source address it chose for the hello pack)72 376.2 Q(et it sent o)-.11
E -.165(ve)-.165 G 2.75(rt).165 G(hat interf)-2.75 E 2.75(ace. Ho)-.11 F
(we)-.275 E -.165(ve)-.275 G 2.75(ro).165 G 2.75(np)-2.75 G
(oint-to-point)-2.75 E(links we also recommend that PIM messages with a\
 0.0.0.0 destination address are also accepted.)72 389.2 Q F1 -.814(Tr)
72 415.2 S(ansitions fr).814 E(om NoInf)-.198 E 2.75(oS)-.275 G(tate)
-2.75 E F0(When in NoInfo state, the follo)72 431.8 Q(wing e)-.275 E
-.165(ve)-.275 G(nt may trigger a transition:).165 E F1(Recei)97 448.4 Q
.22 -.11(ve J)-.11 H(oin\(S,G\))-.055 E F0 2.75(AJ)122 461.4 S
(oin\(S,G\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)
-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to the)-.11 E(router')122
474.4 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G\) do)122 491 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the Join state.)-.11 E(The)5.5 E(Expiry T)122 504
Q(imer \(ET\) is started, and set to the HoldT)-.385 E
(ime from the triggering Join/Prune)-.385 E/F2 10/Symbol SF<ef>555 516 Q
<ef>-4.94 -10 M F0(message.)122 517 Q F1 -.814(Tr)72 543 S(ansitions fr)
.814 E(om J)-.198 E(oin State)-.165 E F0(When in Join state, the follo)
72 559.6 Q(wing e)-.275 E -.165(ve)-.275 G
(nts may trigger a transition:).165 E F1(Recei)97 576.2 Q .22 -.11(ve J)
-.11 H(oin\(S,G\))-.055 E F0 2.75(AJ)122 589.2 S(oin\(S,G\) is recei)
-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to the)-.11 E(router')122
602.2 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G\) do)122 618.8 Q
(wnstream state machine on interf)-.275 E
(ace I remains in Join state, and the)-.11 E(Expiry T)122 631.8 Q
(imer \(ET\) is restarted, set to maximum of its current v)-.385 E
(alue and the HoldT)-.275 E(ime)-.385 E F2<ef>555 643.8 Q<ef>-4.94 -10 M
<ef>-4.94 -10 M F0(from the triggering Join/Prune message.)122 644.8 Q
F1(Recei)97 661.4 Q .22 -.11(ve P)-.11 H(rune\(S,G\)).11 E F0 2.75(AP)
122 674.4 S(rune\(S,G\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G
2.75(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to the)-.11 E(router')122
687.4 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G\) do)122 704 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the PrunePending)-.11 E 2.75(state. The)122 717 R
(PrunePending timer is started; it is set to the J/P_Ov)2.75 E
(erride_Interv)-.165 E(al if the)-.275 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.3. [P)2.75 F(age 31])-.165 E EP
%%Page: 32 32
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(router has more than one neighbor on that interf)122 85 Q
(ace; otherwise it is set to zero causing)-.11 E(it to e)122 98 Q
(xpire immediately)-.165 E(.)-.715 E/F1 11/Times-Bold@0 SF(Expiry T)97
114.6 Q(imer Expir)-.198 E(es)-.198 E F0(The Expiry T)122 127.6 Q
(imer for the \(S,G\) do)-.385 E(wnstream state machine on interf)-.275
E(ace I e)-.11 E(xpires.)-.165 E(The \(S,G\) do)122 144.2 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E F1 -.814(Tr)72 170.2 S
(ansitions fr).814 E(om PruneP)-.198 E(ending State)-.22 E F0
(When in PrunePending state, the follo)72 186.8 Q(wing e)-.275 E -.165
(ve)-.275 G(nts may trigger a transition:).165 E F1(Recei)97 203.4 Q .22
-.11(ve J)-.11 H(oin\(S,G\))-.055 E F0 2.75(AJ)122 216.4 S
(oin\(S,G\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)
-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to the)-.11 E(router')122
229.4 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G\) do)122 246 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the Join state.)-.11 E(The)5.5 E
(PrunePending timer is canceled \(without triggering an e)122 259 Q
(xpiry e)-.165 E -.165(ve)-.275 G 2.75(nt\). The).165 F(Expiry)2.75 E
-.385(Ti)122 272 S(mer is restarted, set to maximum of its current v)
.385 E(alue and the HoldT)-.275 E(ime from the)-.385 E/F2 10/Symbol SF
<ef>555 284 Q<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(triggering Join/Prune message.)122 285 Q F1(Expiry T)97 301.6 Q
(imer Expir)-.198 E(es)-.198 E F0(The Expiry T)122 314.6 Q
(imer for the \(S,G\) do)-.385 E(wnstream state machine on interf)-.275
E(ace I e)-.11 E(xpires.)-.165 E(The \(S,G\) do)122 331.2 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E F1(PruneP)97 347.8 Q
(ending T)-.22 E(imer Expir)-.198 E(es)-.198 E F0(The PrunePending T)122
360.8 Q(imer for the \(S,G\) do)-.385 E
(wnstream state machine on interf)-.275 E(ace I)-.11 E -.165(ex)122
373.8 S(pires.).165 E(The \(S,G\) do)122 390.4 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E(A)5.5 E
(PruneEcho\(S,G\) is sent onto the subnet connected to interf)122 403.4
Q(ace I.)-.11 E(The action "Send PruneEcho\(S,G\)" is triggered when th\
e router stops forw)122 420 Q(arding on)-.11 E(an interf)122 433 Q
(ace as a result of a prune.)-.11 E 2.75(AP)5.5 G
(runeEcho\(S,G\) is simply a Prune\(S,G\) message)-2.75 E
(sent by the upstream router on a LAN with its o)122 446 Q
(wn address in the Upstream Neighbor)-.275 E F2<ef>555 458 Q<ef>-4.94
-10 M F0(Address \214eld.)122 459 Q(Its purpose is to add additional re\
liability so that if a Prune that should)5.5 E(ha)122 472 Q .33 -.165
(ve b)-.22 H(een o).165 E -.165(ve)-.165 G(rridden by another router is\
 lost locally on the LAN, then the PruneEcho).165 E(may be recei)122 485
Q -.165(ve)-.275 G 2.75(da).165 G(nd cause the o)-2.75 E -.165(ve)-.165
G(rride to happen.).165 E 2.75(AP)5.5 G(runeEcho\(S,G\) need not be)
-2.75 E(sent on a point-to-point interf)122 498 Q(ace.)-.11 E F1 2.75
(4.4.4. Recei)72 524 R(ving \(S,G,r)-.11 E(pt\) J)-.11 E
(oin/Prune Messages)-.165 E F0(The per)72 540.6 Q(-interf)-.22 E
(ace state machine for recei)-.11 E
(ving \(S,G,rpt\) Join/Prune messages is gi)-.275 E -.165(ve)-.275 G
2.75(nb).165 G(elo)-2.75 E -.715(w.)-.275 G(There are \214v)72 553.6 Q
2.75(es)-.165 G(tates:)-2.75 E F1(NoInf)97 570.2 Q 2.75(o\()-.275 G
(NI\))-2.75 E F0(The interf)122 583.2 Q
(ace has no \(S,G,rpt\) Prune state and no \(S,G,rpt\) timers running.)
-.11 E F1(Prune \(P\))97 599.8 Q F0(The interf)122 612.8 Q
(ace has \(S,G,rpt\) Prune state which will cause us not to forw)-.11 E
(ard pack)-.11 E(ets)-.11 E(from S destined for G from this interf)122
625.8 Q(ace e)-.11 E -.165(ve)-.275 G 2.75(nt).165 G(hough the interf)
-2.75 E(ace has acti)-.11 E .33 -.165(ve \()-.275 H(*,G\)).165 E
(Join state.)122 638.8 Q(When interf)5.5 E
(ace I is in this state, the macro)-.11 E/F3 11/Courier@0 SF
(prune\(S,G,rpt,I\))2.75 E F0(returns)2.75 E(true.)122 651.8 Q F1
(PruneP)97 668.4 Q(ending \(PP\))-.22 E F0(The router has recei)122
681.4 Q -.165(ve)-.275 G 2.75(daP).165 G(rune\(S,G,rpt\) on this interf)
-2.75 E(ace from a do)-.11 E(wnstream neighbor)-.275 E(and is w)122
694.4 Q(aiting to see whether the prune will be o)-.11 E -.165(ve)-.165
G(rridden by another do).165 E(wnstream)-.275 E(router)122 707.4 Q 5.5
(.F)-.605 G(or forw)-5.665 E
(arding purposes, the PrunePending state functions e)-.11 E(xactly lik)
-.165 E 2.75(et)-.11 G(he)-2.75 E(NoInfo state.)122 720.4 Q
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.4.4. [P)2.75 F(age 32])-.165 E EP
%%Page: 33 33
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF
(PruneTmp \(P'\))97 85 Q F0
(This state is a transient state which for forw)122 98 Q
(arding purposes beha)-.11 E -.165(ve)-.22 G 2.75(se).165 G(xactly lik)
-2.915 E 2.75(et)-.11 G(he)-2.75 E(Prune state.)122 111 Q 2.75(A\()5.5 G
(*,G\) Join has been recei)-2.75 E -.165(ve)-.275 G 2.75(d\().165 G
(which may cancel the \(S,G,rpt\) Prune\).)-2.75 E(As we parse the Join\
/Prune message from top to bottom, we \214rst enter this state if the)
122 124 Q(message contains a \(*,G\) Join.)122 137 Q
(Later in the message we will normally encounter an)5.5 E
(\(S,G,rpt\) prune to re-instate the Prune state.)122 150 Q(Ho)5.5 E(we)
-.275 E -.165(ve)-.275 G 2.75(ri).165 G 2.75(fw)-2.75 G 2.75(er)-2.75 G
(each the end of the)-2.75 E
(message without encountering such a \(S,G,rpt\) prune, then we will re)
122 163 Q -.165(ve)-.275 G(rt to NoInfo).165 E
(state in this state machine.)122 176 Q
(As no time is spent in this state, no timers can e)122 192.6 Q(xpire.)
-.165 E F1(PruneP)97 209.2 Q(endingTmp \(PP'\))-.22 E F0
(This state is a transient state which is identical to P' e)122 222.2 Q
(xcept that it is associated with)-.165 E
(the PP state rather than the P state.)122 235.2 Q -.165(Fo)5.5 G 2.75
(rf).165 G(orw)-2.75 E(arding purposes, PP' beha)-.11 E -.165(ve)-.22 G
2.75(se).165 G(xactly lik)-2.915 E(e)-.11 E(PP state.)122 248.2 Q
(In addition there are tw)72 264.8 Q 2.75(ot)-.11 G(imers:)-2.75 E F1
(ExpiryT)97 281.4 Q(imer \(ET\))-.198 E F0(This timer is set when a v)
122 294.4 Q(alid Prune\(S,G,rpt\) is recei)-.275 E -.165(ve)-.275 G 2.75
(d. Expiry).165 F(of the ExpiryT)2.75 E(imer)-.385 E
(causes this state machine to re)122 307.4 Q -.165(ve)-.275 G
(rt to NoInfo state.).165 E F1(PruneP)97 324 Q(endingT)-.22 E
(imer \(PPT\))-.198 E F0(This timer is set when a v)122 337 Q
(alid Prune\(S,G,rpt\) is recei)-.275 E -.165(ve)-.275 G 2.75(d. Expiry)
.165 F(of the)2.75 E(PrunePendingT)122 350 Q
(imer causes this state machine to mo)-.385 E .33 -.165(ve o)-.165 H
2.75(nt).165 G 2.75(oP)-2.75 G(rune state.)-2.75 E 129 366 354 354 -205
205 129 574 PBEGIN
%%BeginDocument: sgrpt-std.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 129 366 483 571
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 8 8 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.500205 -0 -0 0.500205 113.046 284.116 ] concat
%I 4
526 488
654 568
750 520
750 424
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.500205 -0 -0 0.500205 113.046 284.116 ] concat
%I 4
318 392
254 520
142 520
94 424
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 59 212.5 ] concat
%I 3
636 630
678 541
647 471
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 4
621 701
589 781
653 781
637 733
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 4
173 605
301 461
493 461
589 493
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
413 605
525 589
589 525
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 509
493 509
429 573
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 5
621 509
653 445
621 429
589 445
605 477
5 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
845 605
749 525
653 525
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
845 605
717 621
653 685
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 701
781 701
829 637
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
621 701
573 605
605 541
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
413 605
493 701
589 701
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
173 605
285 557
381 589
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I 3
413 605
285 653
205 621
3 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 65.5 177.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 143.5 484.5 ] concat
%I
[
(PP')
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 185.5 177.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 264.5 485 ] concat
%I
[
(PP)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 289.5 225.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 372 533 ] concat
%I
[
(P)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 289.5 129.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 369.5 437.5 ] concat
%I
[
(NI)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 401.5 177.5 ] concat
%I
173 605 32 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 483 485.5 ] concat
%I
[
(P')
] Text
End

End %I eop

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 168 433 ] concat
%I
[
(End of message)
(for G)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 416 449 ] concat
%I
[
(End of message)
(for G)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 376 481 ] concat
%I
[
(ET)
(Expiry)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 288 537 ] concat
%I
[
(PP Timer)
(Expiry)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 184 554.997 ] concat
%I
[
(Join\(*,*,RP\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 424.095 571 ] concat
%I
[
(Join\(*,*,RP\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 186.498 509.999 ] concat
%I
[
(Join\(*,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 176 473 ] concat
%I
[
(Prune\(S,G,rpt\))
([Refresh ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 256 449 ] concat
%I
[
(Prune\(S,G,rpt\))
([Refresh ET])
([Start PPT])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 304 481 ] concat
%I
[
(Join)
(\(S,G,rpt\) )
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 328 505 ] concat
%I
[
(Join)
(\(S,G,rpt\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 400 497 ] concat
%I
[
(Prune\(S,G,rpt\))
([Refresh ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 424 529 ] concat
%I
[
(Join\(*,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 352 593 ] concat
%I
[
(Prune\(S,G,rpt\))
([Refresh ET])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 352 393 ] concat
%I
[
(Join\(S,G,rpt\))
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND F1(Figur)165.227 613 Q 2.75(e5)-.198 G 2.75(:D)-2.75 G -.11(ow)
-2.75 G(nstr).11 E(eam per)-.198 E(-interface \(S,G,r)-.407 E
(pt\) state-machine)-.11 E F0(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165
E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75(4.4.4. [P)2.75 F
(age 33])-.165 E EP
%%Page: 34 34
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In tab)72 85 Q
(ular form, the state machine is:)-.22 E .44 LW 503.984 95.75 72 95.75
DL/F1 11/Times-Bold@0 SF(Ev)305.301 106 Q(ent)-.11 E 503.984 110.75
131.279 110.75 DL(Pr)75.458 133 Q .33 -.165(ev S)-.198 H(tate).165 E
(Recei)137.466 121 Q -.11(ve)-.11 G -.165(Jo)137.466 134 S(in\(*,G\))
.165 E(or)137.466 147 Q -.165(Jo)137.466 160 S(in\(*,*,RP\(G\)\)).165 E
(Recei)222.222 121 Q -.11(ve)-.11 G -.165(Jo)222.222 134 S(in).165 E
(\(S,G,r)222.222 147 Q(pt\))-.11 E(Recei)279.731 121 Q -.11(ve)-.11 G
(Prune)279.731 134 Q(\(S,G,r)279.731 147 Q(pt\))-.11 E(End of)341.354
121 Q(Message)341.354 134 Q(Prune)398.863 121 Q -.22(Pe)398.863 134 S
(nding).22 E -.198(Ti)398.863 147 S(mer).198 E(Expir)398.863 160 Q(es)
-.198 E(Expiry)450.883 121 Q -.198(Ti)450.883 134 S(mer).198 E(Expir)
450.883 147 Q(es)-.198 E 503.984 164.75 72 164.75 DL 503.984 166.75 72
166.75 DL F0 -49.467 81.093(-- -)137.466 177 T 35.828(n/a n/a)-27.247 F
(-> PP state)279.731 177 Q F1(No Inf)75.458 209.5 Q(o)-.275 E(\(NI\))
75.458 222.5 Q F0(start Prune)279.731 190 Q(Pending)279.731 203 Q -.385
(Ti)279.731 216 S(mer; start).385 E(Expiry)279.731 229 Q -.385(Ti)
279.731 242 S(mer).385 E -.385(Ti)279.731 255 S(mer).385 E 503.984
259.75 72 259.75 DL 53.846(-n)341.354 270 S(/a)-53.846 E(-> P' state)
137.466 270 Q(-> NI state)222.222 270 Q(-> P state)279.731 270 Q F1
(-> NI state)450.883 270 Q(Pruned \(P\))75.458 289.5 Q F0(restart)
279.731 283 Q(Expiry)279.731 296 Q -.385(Ti)279.731 309 S(mer).385 E
503.984 313.75 72 313.75 DL -12.804 57.96(-- n)279.731 324 T(/a)-57.96 E
F1(Prune)75.458 324 Q -.22(Pe)75.458 337 S(nding).22 E(\(PP\))75.458 350
Q F0(-> PP' state)137.466 324 Q(-> NI state)222.222 324 Q(-> P state)
398.863 324 Q 503.984 354.75 72 354.75 DL 60.633(error error)137.466 365
R 35.828(n/a n/a)155.268 F(-> P state)279.731 365 Q(-> NI state)341.354
365 Q F1 -1.012(Te)75.458 371.5 S(mp.)1.012 E(Pruned)75.458 384.5 Q
(\(P'\))75.458 397.5 Q F0(restart)279.731 378 Q(Expiry)279.731 391 Q
-.385(Ti)279.731 404 S(mer).385 E 503.984 408.75 72 408.75 DL 60.633
(error error)137.466 419 R 35.828(n/a n/a)155.268 F(-> PP state)279.731
419 Q(-> NI state)341.354 419 Q F1 -1.012(Te)75.458 419 S(mp.)1.012 E
(Prune)75.458 432 Q -.22(Pe)75.458 445 S(nding).22 E(\(PP'\))75.458 458
Q F0(restart)279.731 432 Q(Expiry)279.731 445 Q -.385(Ti)279.731 458 S
(mer).385 E 503.984 462.75 72 462.75 DL 445.696 110.75 445.696 462.75 DL
393.676 110.75 393.676 462.75 DL 336.167 110.75 336.167 462.75 DL
274.544 110.75 274.544 462.75 DL 217.035 110.75 217.035 462.75 DL
131.279 95.75 131.279 462.75 DL 133.279 95.75 133.279 462.75 DL 503.984
95.75 503.984 462.75 DL 72 95.75 72 462.75 DL(The transition e)72 480.6
Q -.165(ve)-.275 G(nts "Recei).165 E .33 -.165(ve J)-.275 H
(oin\(S,G,rpt\)", "Recei).165 E .33 -.165(ve P)-.275 H
(rune\(S,G,rpt\)", "Recei).165 E .33 -.165(ve J)-.275 H(oin\(*,G\)" and)
.165 E("Recei)72 493.6 Q .33 -.165(ve J)-.275 H
(oin\(*,*,RP\(G\)\)" imply recei).165 E(ving a Join or Prune tar)-.275 E
(geted to this router')-.198 E 2.75(sa)-.605 G(ddress on the)-2.75 E
(recei)72 506.6 Q -.165(ve)-.275 G 2.75(di).165 G(nterf)-2.75 E 2.75
(ace. If)-.11 F(the destination address is not correct, these state tra\
nsitions in this state)2.75 E(machine must not occur)72 519.6 Q 2.75(,a)
-.44 G(lthough seeing such a pack)-2.75 E
(et may cause state transitions in other state)-.11 E(machines.)72 532.6
Q(On unnumbered interf)72 549.2 Q
(aces on point-to-point links, the router')-.11 E 2.75(sa)-.605 G
(ddress should be the same as the)-2.75 E
(source address it chose for the hello pack)72 562.2 Q(et it sent o)-.11
E -.165(ve)-.165 G 2.75(rt).165 G(hat interf)-2.75 E 2.75(ace. Ho)-.11 F
(we)-.275 E -.165(ve)-.275 G 2.75(ro).165 G 2.75(np)-2.75 G
(oint-to-point)-2.75 E(links we also recommend that PIM messages with a\
 0.0.0.0 destination address are also accepted.)72 575.2 Q F1 -.814(Tr)
72 601.2 S(ansitions fr).814 E(om NoInf)-.198 E 2.75(oS)-.275 G(tate)
-2.75 E F0(When in NoInfo \(NI\) state, the follo)72 617.8 Q(wing e)
-.275 E -.165(ve)-.275 G(nt may trigger a transition:).165 E F1(Recei)97
634.4 Q .22 -.11(ve P)-.11 H(rune\(S,G,r).11 E(pt\))-.11 E F0 2.75(AP)
122 647.4 S(rune\(S,G,rpt\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do)
.165 G 2.75(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to)-.11 E(the router')122
660.4 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G,rpt\) do)122 677
Q(wnstream state machine on interf)-.275 E
(ace I transitions to the PrunePending)-.11 E 2.75(state. The)122 690 R
(Expiry T)2.75 E(imer \(ET\) is started, and set to the HoldT)-.385 E
(ime from the triggering)-.385 E/F2 10/Symbol SF<ef>555 702 Q<ef>-4.94
-10 M F0(Join/Prune message.)122 703 Q
(The PrunePending timer is started; it is set to the)5.5 E(J/P_Ov)122
716 Q(erride_Interv)-.165 E
(al if the router has more than one neighbor on that interf)-.275 E
(ace;)-.11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.4.4. [P)2.75 F(age 34])-.165 E EP
%%Page: 35 35
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(otherwise it is set to zero causing it to e)122 85 Q(xpire immediately)
-.165 E(.)-.715 E/F1 11/Times-Bold@0 SF -.814(Tr)72 111 S(ansitions fr)
.814 E(om PruneP)-.198 E(ending State)-.22 E F0
(When in PrunePending \(PP\) state, the follo)72 127.6 Q(wing e)-.275 E
-.165(ve)-.275 G(nts may trigger a transition:).165 E F1(Recei)97 144.2
Q .22 -.11(ve J)-.11 H(oin\(*,G\) or J)-.055 E(oin\(*,*,RP\(G\)\))-.165
E F0 2.75(AJ)122 157.2 S(oin\(*,*,RP\(G\)\) or Join\(*,G\) is recei)
-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor)-.11 E(Address set to the router')122
170.2 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G,rpt\) do)122
186.8 Q(wnstream state machine on interf)-.275 E(ace I transitions to T)
-.11 E(emp.)-.77 E(PrunePending state whilst the remainder of the compo\
und Join/Prune message)122 199.8 Q
(containing the Join\(*,*,RP\(G\)\) or Join\(*,G\) is processed.)122
212.8 Q F1(Recei)97 229.4 Q .22 -.11(ve J)-.11 H(oin\(S,G,r)-.055 E
(pt\))-.11 E F0 2.75(AJ)122 242.4 S(oin\(S,G,rpt\) is recei)-2.75 E
-.165(ve)-.275 G 2.75(do).165 G 2.75(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to)-.11 E(the router')122
255.4 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G,rpt\) do)122 272
Q(wnstream state machine on interf)-.275 E
(ace I transitions to NoInfo state.)-.11 E(ET)5.5 E
(and PPT are canceled.)122 285 Q F1(PruneP)97 301.6 Q(ending T)-.22 E
(imer Expir)-.198 E(es)-.198 E F0(The PrunePending T)122 314.6 Q
(imer for the \(S,G,rpt\) do)-.385 E(wnstream state machine on interf)
-.275 E(ace I)-.11 E -.165(ex)122 327.6 S(pires.).165 E
(The \(S,G,rpt\) do)122 344.2 Q(wnstream state machine on interf)-.275 E
(ace I transitions to the Pruned state.)-.11 E F1 -.814(Tr)72 370.2 S
(ansitions fr).814 E(om Pruned State)-.198 E F0
(When in Pruned \(P\) state, the follo)72 386.8 Q(wing e)-.275 E -.165
(ve)-.275 G(nts may trigger a transition:).165 E F1(Recei)97 403.4 Q .22
-.11(ve J)-.11 H(oin\(*,G\) or J)-.055 E(oin\(*,*,RP\(G\)\))-.165 E F0
2.75(AJ)122 416.4 S(oin\(*,*,RP\(G\)\) or Join\(*,G\) is recei)-2.75 E
-.165(ve)-.275 G 2.75(do).165 G 2.75(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor)-.11 E(Address set to the router')122
429.4 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G,rpt\) do)122 446
Q(wnstream state machine on interf)-.275 E(ace I transitions to T)-.11 E
(emp. Pruned)-.77 E(state whilst the remainder of the compound Join/Pru\
ne message containing the)122 459 Q
(Join\(*,*,RP\(G\)\) or Join\(*,G\) is processed.)122 472 Q F1(Recei)97
488.6 Q .22 -.11(ve J)-.11 H(oin\(S,G,r)-.055 E(pt\))-.11 E F0 2.75(AJ)
122 501.6 S(oin\(S,G,rpt\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do)
.165 G 2.75(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to)-.11 E(the router')122
514.6 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G,rpt\) do)122
531.2 Q(wnstream state machine on interf)-.275 E
(ace I transitions to NoInfo state.)-.11 E(ET)5.5 E
(and PPT are canceled.)122 544.2 Q F1(Recei)97 560.8 Q .22 -.11(ve P)
-.11 H(rune\(S,G,r).11 E(pt\))-.11 E F0 2.75(AP)122 573.8 S
(rune\(S,G,rpt\) is recei)-2.75 E -.165(ve)-.275 G 2.75(do).165 G 2.75
(ni)-2.75 G(nterf)-2.75 E
(ace I with its Upstream Neighbor Address set to)-.11 E(the router')122
586.8 Q 2.75(sa)-.605 G(ddress on I.)-2.75 E(The \(S,G,rpt\) do)122
603.4 Q(wnstream state machine on interf)-.275 E
(ace I remains in Pruned state.)-.11 E(The)5.5 E(Expiry T)122 616.4 Q
(imer \(ET\) is restarted, set to maximum of its current v)-.385 E
(alue and the HoldT)-.275 E(ime)-.385 E/F2 10/Symbol SF<ef>555 628.4 Q
<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(from the triggering Join/Prune message.)122 629.4 Q F1(Expiry T)97 646
Q(imer Expir)-.198 E(es)-.198 E F0(The Expiry T)122 659 Q
(imer for the \(S,G,rpt\) do)-.385 E(wnstream state machine on interf)
-.275 E(ace I e)-.11 E(xpires.)-.165 E(The \(S,G,rpt\) do)122 675.6 Q
(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E(ET and PPT are canceled.)
122 688.6 Q(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.4.4. [P)2.75 F(age 35])-.165 E EP
%%Page: 36 36
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF -.814(Tr)
72 85 S(ansitions fr).814 E(om T)-.198 E(emp. PruneP)-1.012 E
(ending State)-.22 E F0(When in T)72 101.6 Q(emp. PrunePending \(PP'\) \
state and processing a compound Join/Prune message, the)-.77 E(follo)72
114.6 Q(wing e)-.275 E -.165(ve)-.275 G(nts may trigger a transition:)
.165 E F1(Recei)97 131.2 Q .22 -.11(ve P)-.11 H(rune\(S,G,r).11 E(pt\))
-.11 E F0(The compound Join/Prune message contains a Prune\(S,G,rpt\).)
122 144.2 Q(The \(S,G,rpt\) do)122 160.8 Q
(wnstream state machine on interf)-.275 E(ace I transitions back to the)
-.11 E(PrunePending state.)122 173.8 Q(The Expiry T)5.5 E
(imer \(ET\) is restarted, set to maximum of its current)-.385 E/F2 10
/Symbol SF<ef>555 185.8 Q<ef>-4.94 -10 M<ef>-4.94 -10 M F0 -.275(va)122
186.8 S(lue and the HoldT).275 E
(ime from the triggering Join/Prune message.)-.385 E F1(End of Message)
97 203.4 Q F0(The end of the compound Join/Prune message is reached.)122
216.4 Q(The \(S,G,rpt\) do)122 233 Q(wnstream state machine on interf)
-.275 E(ace I transitions to the NoInfo state.)-.11 E
(ET and PPT are canceled.)122 246 Q F1 -.814(Tr)72 272 S(ansitions fr)
.814 E(om T)-.198 E(emp. Pruned State)-1.012 E F0(When in T)72 288.6 Q(\
emp. Pruned \(P'\) state and processing a compound Join/Prune message, \
the follo)-.77 E(wing)-.275 E -2.365 -.275(ev e)72 301.6 T
(nts may trigger a transition:).275 E F1(Recei)97 318.2 Q .22 -.11(ve P)
-.11 H(rune\(S,G,r).11 E(pt\))-.11 E F0
(The compound Join/Prune message contains a Prune\(S,G,rpt\).)122 331.2
Q(The \(S,G,rpt\) do)122 347.8 Q(wnstream state machine on interf)-.275
E(ace I transitions back to the Pruned)-.11 E 2.75(state. The)122 360.8
R(Expiry T)2.75 E
(imer \(ET\) is restarted, set to maximum of its current v)-.385 E
(alue and the)-.275 E F2<ef>555 372.8 Q<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(HoldT)122 373.8 Q(ime from the triggering Join/Prune message.)-.385 E
F1(End of Message)97 390.4 Q F0
(The end of the compound Join/Prune message is reached.)122 403.4 Q
(The \(S,G,rpt\) do)122 420 Q(wnstream state machine on interf)-.275 E
(ace I transitions to the NoInfo state.)-.11 E(ET and PPT are canceled.)
122 433 Q F1(Notes:)72 459 Q F0(Recei)72 475.6 Q
(ving a Prune\(*,*,RP\(G\)\) or Prune\(*,G\) does not af)-.275 E
(fect the \(S,G,rpt\) do)-.275 E(wnstream state)-.275 E(machine.)72
488.6 Q F1 2.75(4.4.5. Sending)72 514.6 R(\(*,*,RP\) J)2.75 E
(oin/Prune Messages)-.165 E F0(The per)72 531.2 Q(-interf)-.22 E
(ace state-machines for \(*,*,RP\) hold join state from do)-.11 E
(wnstream PIM routers.)-.275 E(This)5.5 E
(state then determines whether a router needs to propag)72 544.2 Q
(ate a Join\(*,*,RP\) upstream to)-.055 E -.11(wa)-.275 G(rds the).11 E
(RP)72 557.2 Q(.)-1.221 E(If a router wishes to propag)72 573.8 Q
(ate a Join\(*,*,RP\) upstream, it must also w)-.055 E
(atch for messages on its)-.11 E(upstream interf)72 586.8 Q
(ace from other routers on that subnet, and these may modify its beha)
-.11 E(vior)-.22 E 5.5(.I)-.605 G 2.75(fi)-5.5 G 2.75(ts)-2.75 G(ees)
-2.75 E 2.75(aJ)72 599.8 S
(oin\(*,*,RP\) to the correct upstream neighbor)-2.75 E 2.75(,i)-.44 G
2.75(ts)-2.75 G(hould suppress its o)-2.75 E(wn Join\(*,*,RP\).)-.275 E
(If it sees)5.5 E 2.75(aP)72 612.8 S
(rune\(*,*,RP\) to the correct upstream neighbor)-2.75 E 2.75(,i)-.44 G
2.75(ts)-2.75 G(hould be prepared to o)-2.75 E -.165(ve)-.165 G
(rride that prune by).165 E(sending a Join\(*,*,RP\) almost immediately)
72 625.8 Q 5.5(.F)-.715 G(inally)-5.5 E 2.75(,i)-.715 G 2.75(fi)-2.75 G
2.75(ts)-2.75 G(ees the Generation ID \(see Section 4.6\))-2.75 E
(of the correct upstream neighbor change, it kno)72 638.8 Q
(ws that the upstream neighbor has lost state, and it)-.275 E(should be\
 prepared to refresh the state by sending a Join\(*,*,RP\) almost immed\
iately)72 651.8 Q(.)-.715 E
(In addition if the MRIB changes to indicate that the ne)72 668.4 Q
(xt hop to)-.165 E -.11(wa)-.275 G(rds the RP has changed, the).11 E
(router should prune of)72 681.4 Q 2.75(ff)-.275 G(rom the old ne)-2.75
E(xt hop, and join to)-.165 E -.11(wa)-.275 G(rds the ne).11 E 2.75(wn)
-.275 G -.165(ex)-2.75 G 2.75(th).165 G(op.)-2.75 E
(The upstream \(*,*,RP\) state-machine only contains tw)72 698 Q 2.75
(os)-.11 G(tates:)-2.75 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E
(ouv)-.385 E 160.971(elas Section)-.165 F 2.75(4.4.5. [P)2.75 F(age 36])
-.165 E EP
%%Page: 37 37
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(Not J)72
85 Q(oined)-.165 E F0(The do)97 98 Q(wnstream state-machines indicate t\
hat the router does not need to join the RP tree for)-.275 E
(this group.)97 111 Q F1 -.165(Jo)72 127.6 S(ined).165 E F0(The do)97
140.6 Q(wnstream state-machines indicate that the router w)-.275 E
(ould lik)-.11 E 2.75(et)-.11 G 2.75(oj)-2.75 G(oin the RP tree for)
-2.75 E(this group.)97 153.6 Q(In addition, one timer JT\(*,*,RP\) is k)
72 170.2 Q
(ept which is used to trigger the sending of a Join\(*,*,RP\) to)-.11 E
(the upstream ne)72 183.2 Q(xt hop to)-.165 E -.11(wa)-.275 G
(rds the RP).11 E 2.75(,M)-1.221 G(RIB.ne)-2.75 E(xt_hop\(RP\).)-.165 E
106 361 396 498 -168.578 212 108 370.778 PBEGIN
%%BeginDocument: sending-starstarrp-std.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 106 361 604 573
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 7.56686e-15 7.25873e-43 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -12.5 270.5 ] concat
%I 4
697 435
699 577
777 547
724 466
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -12.5 270.5 ] concat
%I 4
697 435
583 528
670 588
681 467
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -12.5 270.5 ] concat
%I 4
697 435
769 298
626 305
672 405
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -12.5 270.5 ] concat
%I 4
697 435
857 563
871 451
750 454
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -12.5 270.5 ] concat
%I 4
697 435
873 446
857 323
749 413
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
593 592
385 528
273 576
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
209 592
401 656
529 608
3 BSpl
%I 2
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I
209 592 64 32 Elli
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 231.5 192 ] concat
%I
209 592 64 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 134.5 497.5 ] concat
%I
[
(not)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 128 487.5 ] concat
%I
[
(joined)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 324 491.5 ] concat
%I
[
(joined)
] Text
End

Begin %I BSpl
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
none SetP %I p n
%I t
[ 0.142361 -0 -0 0.0953237 401.226 424.701 ] concat
%I 8
677 1262
733 1262
733 802
815 704
813 705
733 618
733 158
677 158
8 BSpl
%I 8
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 422 465.5 ] concat
%I
[
(MRIB.next_hop\(RP\))
(GenID changes)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 520.625 519 ] concat
%I
[
([Lower timer to)
(randomized)
(prune-override interval])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 421.5 538 ] concat
%I
[
(See Prune\(*,*,RP\))
(to MRIB.next_hop\(RP\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 175 466 ] concat
%I
[
(JoinDesired\(*,*,RP\)->FALSE)
([Send Prune\(*,*,RP\)])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 199 595.5 ] concat
%I
[
(Timer Expires)
([Send Join\(*,*,RP\)])
([Set timer to t_periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 171 531 ] concat
%I
[
(JoinDesired\(*,*,RP\)->TRUE)
([Send Join\(*,*,RP\)])
([Set timer to t_periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 251.5 418 ] concat
%I
[
(MRIB.next_hop\(RP\) changes)
([Send Join\(*,*,RP\) to new next hop])
([Send Prune\(*,*,RP\) to old next hop])
([Set timer to t_periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 339 587.5 ] concat
%I
[
(See Join\(*,*,RP\) to MRIB.next_hop\(RP\))
([Raise timer to t_suppressed])
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND F1(Figur)205.388 409.778 Q 2.75(e6)-.198 G 2.75(:U)-2.75 G
(pstr)-2.75 E(eam \(*,*,RP\) state-machine)-.198 E F0(Fenner/Handle)72
769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.5. [P)2.75 F(age 37])-.165 E EP
%%Page: 38 38
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In tab)72 85 Q
(ular form, the state machine is:)-.22 E .44 LW 503.995 95.75 72 95.75
DL/F1 11/Times-Bold@0 SF(Ev)341.203 106 Q(ent)-.11 E 503.995 110.75
194.439 110.75 DL(Pr)92.723 120 Q .33 -.165(ev S)-.198 H(tate).165 E
-.165(Jo)226.524 121 S(inDesir).165 E(ed\(*,*,RP\))-.198 E(->T)226.524
134 Q(rue)-.814 E -.165(Jo)388.925 121 S(inDesir).165 E(ed\(*,*,RP\))
-.198 E(->F)388.925 134 Q(alse)-.275 E 503.995 138.75 72 138.75 DL
503.995 140.75 72 140.75 DL F0(-)388.925 151 Q(-> J state)226.524 151 Q
F1(NotJ)92.723 164 Q(oined \(NJ\))-.165 E F0(Send Join\(*,*,RP\); Set)
226.524 164 Q -.385(Ti)226.524 177 S(mer to t_periodic).385 E 503.995
181.75 72 181.75 DL(-)226.524 192 Q(-> NJ state)388.925 192 Q
(Send Prune\(*,*,RP\))388.925 205 Q F1 -.165(Jo)92.723 198.5 S
(ined \(J\)).165 E 503.995 209.75 72 209.75 DL 357.84 110.75 357.84
209.75 DL 194.439 95.75 194.439 209.75 DL 196.439 95.75 196.439 209.75
DL 503.995 95.75 503.995 209.75 DL 72 95.75 72 209.75 DL F0
(In addition, we ha)72 227.6 Q .33 -.165(ve t)-.22 H(he follo).165 E
(wing transitions which occur within the Joined state:)-.275 E 503.997
238.35 72 238.35 DL F1(In J)244.845 248.6 Q(oined \(J\) State)-.165 E
503.997 253.35 72 253.35 DL 503.997 255.35 72 255.35 DL -.198(Ti)83.895
265.6 S(mer Expir).198 E(es)-.198 E(See J)203.004 265.6 Q(oin\(*,*,RP\))
-.165 E(to)203.004 278.6 Q(MRIB.next_hop\(RP\))203.004 291.6 Q
(See Prune\(*,*,RP\))336.765 265.6 Q(to)336.765 278.6 Q
(MRIB.next_hop\(RP\))336.765 291.6 Q 503.997 296.35 72 296.35 DL 503.997
298.35 72 298.35 DL F0(Send Join\(*,*,RP\);)83.895 308.6 Q(Set T)83.895
321.6 Q(imer to)-.385 E(t_periodic)83.895 334.6 Q(Increase T)203.004
308.6 Q(imer to)-.385 E(t_suppressed)203.004 321.6 Q(Decrease T)336.765
308.6 Q(imer to)-.385 E(t_o)336.765 321.6 Q -.165(ve)-.165 G(rride).165
E 503.997 339.35 72 339.35 DL 318.922 255.35 318.922 339.35 DL 185.161
255.35 185.161 339.35 DL 503.997 238.35 503.997 339.35 DL 72 238.35 72
339.35 DL 503.998 351.35 72 351.35 DL F1(In J)244.846 361.6 Q
(oined \(J\) State)-.165 E 503.998 366.35 72 366.35 DL 503.998 368.35 72
368.35 DL(MRIB.next_hop\(RP\) changes)103.085 378.6 Q
(MRIB.next_hop\(RP\) GenID)340.308 378.6 Q(changes)340.308 391.6 Q
503.998 396.35 72 396.35 DL 503.998 398.35 72 398.35 DL F0
(Send Join\(*,*,RP\) to ne)103.085 408.6 Q 2.75(wn)-.275 G -.165(ex)
-2.75 G(t).165 E(hop; Send Prune\(*,*,RP\) to old)103.085 421.6 Q(ne)
103.085 434.6 Q(xt hop; set T)-.165 E(imer to t_periodic)-.385 E
(Decrease T)340.308 408.6 Q(imer to t_o)-.385 E -.165(ve)-.165 G(rride)
.165 E 503.998 439.35 72 439.35 DL 293.68 368.35 293.68 439.35 DL
503.998 351.35 503.998 439.35 DL 72 351.35 72 439.35 DL
(This state machine uses the follo)72 457.2 Q(wing macro:)-.275 E/F2 11
/Courier@0 SF(bool JoinDesired\(*,*,RP\) {)85.2 476.2 Q
(if immediate_olist\(*,*,RP\) != NULL)105 489.2 Q(return TRUE)131.4
502.2 Q(else)105 515.2 Q(return FALSE)131.4 528.2 Q(})85.2 541.2 Q F0
(JoinDesired\(*,*,RP\) is true when the router has recei)72 560.2 Q
-.165(ve)-.275 G 2.75(d\().165 G(*,*,RP\) Joins from an)-2.75 E 2.75(yd)
-.165 G -.275(ow)-2.75 G(nstream).275 E(interf)72 573.2 Q 2.75
(ace. Note)-.11 F(that although JoinDesired is true, the router')2.75 E
2.75(ss)-.605 G(ending of a Join\(*,*,RP\) message)-2.75 E(may be suppr\
essed by another router sending a Join\(*,*,RP\) onto the upstream inte\
rf)72 586.2 Q(ace.)-.11 E F1 -.814(Tr)72 612.2 S(ansitions fr).814 E
(om NotJ)-.198 E(oined State)-.165 E F0(When the upstream \(*,*,RP\) st\
ate-machine is in NotJoined state, the follo)72 628.8 Q(wing e)-.275 E
-.165(ve)-.275 G(nt may trigger).165 E 2.75(as)72 641.8 S
(tate transition:)-2.75 E F1 -.165(Jo)97 658.4 S(inDesir).165 E
(ed\(*,*,RP\) becomes T)-.198 E(rue)-.814 E F0(The do)122 671.4 Q
(wnstream state for \(*,*,RP\) has changed so that at least one interf)
-.275 E(ace is in)-.11 E
(immediate_olist\(*,*,RP\), making JoinDesired\(*,*,RP\) become T)122
684.4 Q(rue.)-.385 E
(The upstream \(*,*,RP\) state machine transitions to Joined state.)122
701 Q(Send Join\(*,*,RP\) to)5.5 E(the appropriate upstream neighbor)122
714 Q 2.75(,w)-.44 G(hich is MRIB.ne)-2.75 E 2.75(xt_hop\(RP\). Set)
-.165 F(the Join T)2.75 E(imer)-.385 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.5. [P)2.75 F(age 38])-.165 E EP
%%Page: 39 39
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(\(JT\) to e)122 85 Q
(xpire after t_periodic seconds.)-.165 E/F1 11/Times-Bold@0 SF -.814(Tr)
72 111 S(ansitions fr).814 E(om J)-.198 E(oined State)-.165 E F0(When t\
he upstream \(*,*,RP\) state-machine is in Joined state, the follo)72
127.6 Q(wing e)-.275 E -.165(ve)-.275 G(nts may trigger).165 E
(state transitions:)72 140.6 Q F1 -.165(Jo)97 157.2 S(inDesir).165 E
(ed\(*,*,RP\) becomes F)-.198 E(alse)-.275 E F0(The do)122 170.2 Q
(wnstream state for \(*,*,RP\) has changed so no interf)-.275 E
(ace is in)-.11 E
(immediate_olist\(*,*,RP\), making JoinDesired\(*,*,RP\) become F)122
183.2 Q(alse.)-.165 E
(The upstream \(*,*,RP\) state machine transitions to NotJoined state.)
122 199.8 Q(Send)5.5 E
(Prune\(*,*,RP\) to the appropriate upstream neighbor)122 212.8 Q 2.75
(,w)-.44 G(hich is MRIB.ne)-2.75 E(xt_hop\(RP\).)-.165 E
(Cancel the Join T)122 225.8 Q(imer \(JT\).)-.385 E F1 -.165(Jo)97 242.4
S(in T).165 E(imer Expir)-.198 E(es)-.198 E F0(The Join T)122 255.4 Q
(imer \(JT\) e)-.385 E(xpires, indicating time to send a Join\(*,*,RP\))
-.165 E(Send Join\(*,*,RP\) to the appropriate upstream neighbor)122 272
Q 2.75(,w)-.44 G(hich is)-2.75 E(MRIB.ne)122 285 Q 2.75
(xt_hop\(RP\). Restart)-.165 F(the Join T)2.75 E(imer \(JT\) to e)-.385
E(xpire after t_periodic seconds.)-.165 E F1(See J)97 301.6 Q
(oin\(*,*,RP\) to MRIB.next_hop\(RP\))-.165 E F0(This e)122 314.6 Q
-.165(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G
(nt if RPF_interf).275 E(ace\(RP\) is a shared medium.)-.11 E
(This router sees)5.5 E(another router on RPF_interf)122 327.6 Q
(ace\(RP\) send a Join\(*,*,RP\) to MRIB.ne)-.11 E(xt_hop\(RP\).)-.165 E
(This causes this router to suppress its o)122 340.6 Q(wn Join.)-.275 E
(The upstream \(*,*,RP\) state machine remains in Joined state.)122
357.2 Q(If the Join T)5.5 E(imer is set)-.385 E(to e)122 370.2 Q
(xpire in less than t_suppressed seconds, reset it so that it e)-.165 E
(xpires after t_suppressed)-.165 E 2.75(seconds. If)122 383.2 R
(the Join T)2.75 E(imer is set to e)-.385 E
(xpire in more than t_suppressed seconds, lea)-.165 E .33 -.165(ve i)
-.22 H(t).165 E(unchanged.)122 396.2 Q F1
(See Prune\(*,*,RP\) to MRIB.next_hop\(RP\))97 412.8 Q F0(This e)122
425.8 Q -.165(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G
(nt if RPF_interf).275 E(ace\(RP\) is a shared medium.)-.11 E
(This router sees)5.5 E(another router on RPF_interf)122 438.8 Q
(ace\(RP\) send a Prune\(*,*,RP\) to MRIB.ne)-.11 E(xt_hop\(RP\).)-.165
E(As this router is in Joined state, it must o)122 451.8 Q -.165(ve)
-.165 G(rride the Prune after a short random).165 E(interv)122 464.8 Q
(al.)-.275 E
(The upstream \(*,*,RP\) state machine remains in Joined state.)122
481.4 Q(If the Join T)5.5 E(imer is set)-.385 E(to e)122 494.4 Q
(xpire in more than t_o)-.165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E 2.75(seconds. If)122 507.4 R(the Join T)
2.75 E(imer is set to e)-.385 E(xpire in less than t_o)-.165 E -.165(ve)
-.165 G(rride seconds, lea).165 E .33 -.165(ve i)-.22 H(t).165 E
(unchanged.)122 520.4 Q F1(MRIB.next_hop\(RP\) changes)97 537 Q F0 2.75
(Ac)122 550 S(hange in the MRIB routing base causes the ne)-2.75 E
(xt hop to)-.165 E -.11(wa)-.275 G(rds the RP to change.).11 E
(The upstream \(*,*,RP\) state machine remains in Joined state.)122
566.6 Q(Send Prune\(*,*,RP\) to)5.5 E(the old upstream neighbor)122
579.6 Q 2.75(,w)-.44 G(hich is the old v)-2.75 E(alue of MRIB.ne)-.275 E
2.75(xt_hop\(RP\). Send)-.165 F(Join\(*,*,RP\) to the ne)122 592.6 Q
2.75(wu)-.275 G(pstream neighbor which is the ne)-2.75 E 2.75(wv)-.275 G
(alue of)-3.025 E(MRIB.ne)122 605.6 Q 2.75(xt_hop\(RP\). Set)-.165 F
(the Join T)2.75 E(imer \(JT\) to e)-.385 E
(xpire after t_periodic seconds.)-.165 E F1
(MRIB.next_hop\(RP\) GenID changes)97 622.2 Q F0
(The Generation ID of the router that is MRIB.ne)122 635.2 Q
(xt_hop\(RP\) changes.)-.165 E(This normally)5.5 E(means that this neig\
hbor has lost state, and so the state must be refreshed.)122 648.2 Q(Th\
e upstream \(*,*,RP\) state machine remains in Joined state. If the Joi\
n T)122 664.8 Q(imer is set)-.385 E(to e)122 677.8 Q
(xpire in more than t_o)-.165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E(seconds.)122 690.8 Q(Fenner/Handle)72 769
Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.5. [P)2.75 F(age 39])-.165 E EP
%%Page: 40 40
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF 2.75
(4.4.6. Sending)72 85 R(\(*,G\) J)2.75 E(oin/Prune Messages)-.165 E F0
(The per)72 101.6 Q(-interf)-.22 E
(ace state-machines for \(*,G\) hold join state from do)-.11 E
(wnstream PIM routers.)-.275 E(This)5.5 E
(state then determines whether a router needs to propag)72 114.6 Q
(ate a Join\(*,G\) upstream to)-.055 E -.11(wa)-.275 G(rds the RP).11 E
(.)-1.221 E(If a router wishes to propag)72 131.2 Q
(ate a Join\(*,G\) upstream, it must also w)-.055 E
(atch for messages on its)-.11 E(upstream interf)72 144.2 Q
(ace from other routers on that subnet, and these may modify its beha)
-.11 E(vior)-.22 E 5.5(.I)-.605 G 2.75(fi)-5.5 G 2.75(ts)-2.75 G(ees)
-2.75 E 2.75(aJ)72 157.2 S(oin\(*,G\) to the correct upstream neighbor)
-2.75 E 2.75(,i)-.44 G 2.75(ts)-2.75 G(hould suppress its o)-2.75 E
(wn Join\(*,G\).)-.275 E(If it sees a)5.5 E
(Prune\(*,G\) to the correct upstream neighbor)72 170.2 Q 2.75(,i)-.44 G
2.75(ts)-2.75 G(hould be prepared to o)-2.75 E -.165(ve)-.165 G
(rride that prune by).165 E(sending a Join\(*,G\) almost immediately)72
183.2 Q 5.5(.F)-.715 G(inally)-5.5 E 2.75(,i)-.715 G 2.75(fi)-2.75 G
2.75(ts)-2.75 G(ees the Generation ID \(see Section 4.6\) of)-2.75 E
(the correct upstream neighbor change, it kno)72 196.2 Q
(ws that the upstream neighbor has lost state, and it)-.275 E(should be\
 prepared to refresh the state by sending a Join\(*,G\) almost immediat\
ely)72 209.2 Q(.)-.715 E
(In addition if the MRIB changes to indicate that the ne)72 225.8 Q
(xt hop to)-.165 E -.11(wa)-.275 G(rds the RP has changed, the).11 E
(router should prune of)72 238.8 Q 2.75(ff)-.275 G(rom the old ne)-2.75
E(xt hop, and join to)-.165 E -.11(wa)-.275 G(rds the ne).11 E 2.75(wn)
-.275 G -.165(ex)-2.75 G 2.75(th).165 G(op.)-2.75 E
(The upstream \(*,G\) state-machine only contains tw)72 255.4 Q 2.75(os)
-.11 G(tates:)-2.75 E F1(Not J)72 272 Q(oined)-.165 E F0(The do)97 285 Q
(wnstream state-machines indicate that the router does not need to join\
 the RP tree for)-.275 E(this group.)97 298 Q F1 -.165(Jo)72 314.6 S
(ined).165 E F0(The do)97 327.6 Q
(wnstream state-machines indicate that the router w)-.275 E(ould lik)
-.11 E 2.75(et)-.11 G 2.75(oj)-2.75 G(oin the RP tree for)-2.75 E
(this group.)97 340.6 Q(In addition, one timer JT\(*,G\) is k)72 357.2 Q
(ept which is used to trigger the sending of a Join\(*,G\) to the)-.11 E
(upstream ne)72 370.2 Q(xt hop to)-.165 E -.11(wa)-.275 G(rds the RP).11
E 2.75(,R)-1.221 G(PF'\(*,G\).)-2.75 E 106 361 396 497 -168.918 212 108
558.118 PBEGIN
%%BeginDocument: sending-starg-std.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 106 361 603 573
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 7.56686e-15 7.25873e-43 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
0 SetP
%I t
[ 0.500173 -0 -0 0.500173 107.037 342.618 ] concat
%I 4
475 280
660 223
591 151
486 263
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.500173 -0 -0 0.500173 107.037 342.618 ] concat
%I 4
473 289
637 344
627 254
513 275
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.500173 -0 -0 0.500173 107.037 342.618 ] concat
%I 4
472 290
595 456
631 365
511 310
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -12.5 270.5 ] concat
%I 4
697 435
699 577
777 547
724 466
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -12.5 270.5 ] concat
%I 4
697 435
583 528
670 588
681 467
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -12.5 270.5 ] concat
%I 4
697 435
769 298
626 305
672 405
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
593 592
385 528
273 576
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
209 592
401 656
529 608
3 BSpl
%I 2
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I
209 592 64 32 Elli
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 231.5 192 ] concat
%I
209 592 64 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 134.5 497.5 ] concat
%I
[
(not)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 128 487.5 ] concat
%I
[
(joined)
] Text
End

Begin %I BSpl
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
none SetP %I p n
%I t
[ 0.115245 -0 -0 0.0692446 422.326 463.834 ] concat
%I 8
677 1262
733 1262
733 802
815 704
813 705
733 618
733 158
677 158
8 BSpl
%I 8
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 175 466 ] concat
%I
[
(JoinDesired\(*,G\)->FALSE)
([Send Prune\(*,G\)])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 421 546.503 ] concat
%I
[
(See Prune\(*,G\))
(to RPF'\(*,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 423 500.012 ] concat
%I
[
(RPF'\(*,G\) GenID)
(changes)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 520.125 521.001 ] concat
%I
[
([Lower timer to)
(randomized)
(prune-override interval])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 324 491.5 ] concat
%I
[
(joined)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 423.499 453.997 ] concat
%I
[
(RPF'\(*,G\) changes)
(due to an Assert)
([Send Join\(*,G\)])
([Set timer to J/P periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 199 595.5 ] concat
%I
[
(Timer Expires)
([Send Join\(*,G\)])
([Set timer to t_periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 171 531 ] concat
%I
[
(JoinDesired\(*,G\)->TRUE)
([Send Join\(*,G\)])
([Set timer to t_ periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 251.5 418 ] concat
%I
[
(MRIB.next_hop\(RP\(G\)\) changes)
([Send Join\(*,G\) to new next hop])
([Send Prune\(*,G\) to old next hop])
([Set timer to t_periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 339 587.5 ] concat
%I
[
(See Join\(*,G\) to RPF'\(*,G\))
([Raise timer to t_suppressed])
] Text
End

Begin %I Line
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
none SetP %I p n
%I t
[ 1.00035 -0 -0 1.00035 117.04 149.052 ] concat
%I
248 418 244 408 Line
%I 1
End

End %I eop

showpage


end
%%EndDocument
end PEND F1(Figur)212.566 597.118 Q 2.75(e7)-.198 G 2.75(:U)-2.75 G
(pstr)-2.75 E(eam \(*,G\) state-machine)-.198 E F0(Fenner/Handle)72 769
Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.6. [P)2.75 F(age 40])-.165 E EP
%%Page: 41 41
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In tab)72 85 Q
(ular form, the state machine is:)-.22 E .44 LW 503.999 95.75 72 95.75
DL/F1 11/Times-Bold@0 SF(Ev)346.477 106 Q(ent)-.11 E 503.999 110.75
203.227 110.75 DL(Pr)96.238 120 Q .33 -.165(ev S)-.198 H(tate).165 E
-.165(Jo)240.584 121 S(inDesir).165 E(ed\(*,G\))-.198 E(->T)240.584 134
Q(rue)-.814 E -.165(Jo)399.769 121 S(inDesir).165 E(ed\(*,G\))-.198 E
(->F)399.769 134 Q(alse)-.275 E 503.999 138.75 72 138.75 DL 503.999
140.75 72 140.75 DL F0(-)399.769 151 Q(-> J state)240.584 151 Q F1(NotJ)
96.238 164 Q(oined \(NJ\))-.165 E F0(Send Join\(*,G\); Set)240.584 164 Q
-.385(Ti)240.584 177 S(mer to t_periodic).385 E 503.999 181.75 72 181.75
DL(-)240.584 192 Q(-> NJ state)399.769 192 Q(Send Prune\(*,G\))399.769
205 Q F1 -.165(Jo)96.238 198.5 S(ined \(J\)).165 E 503.999 209.75 72
209.75 DL 363.412 110.75 363.412 209.75 DL 203.227 95.75 203.227 209.75
DL 205.227 95.75 205.227 209.75 DL 503.999 95.75 503.999 209.75 DL 72
95.75 72 209.75 DL F0(In addition, we ha)72 227.6 Q .33 -.165(ve t)-.22
H(he follo).165 E(wing transitions which occur within the Joined state:)
-.275 E 503.998 238.35 72 238.35 DL F1(In J)201.068 248.6 Q
(oined \(J\) State)-.165 E 503.998 253.35 72 253.35 DL 503.998 255.35 72
255.35 DL -.198(Ti)77.964 265.6 S(mer Expir).198 E(es)-.198 E(See J)
165.519 265.6 Q(oin\(*,G\))-.165 E(to RPF'\(*,G\))165.519 278.6 Q
(See Prune\(*,G\))251.545 265.6 Q(to RPF'\(*,G\))251.545 278.6 Q
(RPF'\(*,G\))340.926 265.6 Q(changes)340.926 278.6 Q(RPF'\(*,G\))428.371
265.6 Q(changes due to)428.371 278.6 Q(Assert)428.371 291.6 Q 503.998
296.35 72 296.35 DL 503.998 298.35 72 298.35 DL F0(Send Join\(*,G\);)
77.964 308.6 Q(Set T)77.964 321.6 Q(imer to)-.385 E(t_periodic)77.964
334.6 Q(Increase T)165.519 308.6 Q(imer)-.385 E(to t_suppressed)165.519
321.6 Q(Decrease T)251.545 308.6 Q(imer)-.385 E(to t_o)251.545 321.6 Q
-.165(ve)-.165 G(rride).165 E(Decrease T)340.926 308.6 Q(imer)-.385 E
(to t_o)340.926 321.6 Q -.165(ve)-.165 G(rride).165 E(Send Join\(*,G\);)
428.371 308.6 Q(Set T)428.371 321.6 Q(imer to)-.385 E(t_periodic)428.371
334.6 Q 503.998 339.35 72 339.35 DL 419.425 255.35 419.425 339.35 DL
331.98 255.35 331.98 339.35 DL 242.599 255.35 242.599 339.35 DL 156.573
255.35 156.573 339.35 DL 503.998 238.35 503.998 339.35 DL 72 238.35 72
339.35 DL 504 351.35 72 351.35 DL F1(In J)244.847 361.6 Q
(oined \(J\) State)-.165 E 504 366.35 72 366.35 DL 504 368.35 72 368.35
DL(MRIB.next_hop\(RP\(G\)\))104.192 378.6 Q(changes)104.192 391.6 Q
(RPF'\(*,G\) GenID changes)343.317 378.6 Q 504 396.35 72 396.35 DL 504
398.35 72 398.35 DL F0(Send Join\(*,G\) to ne)104.192 408.6 Q 2.75(wn)
-.275 G -.165(ex)-2.75 G 2.75(th).165 G(op;)-2.75 E
(Send Prune\(*,G\) to old ne)104.192 421.6 Q(xt)-.165 E(hop; set T)
104.192 434.6 Q(imer to t_periodic)-.385 E(Decrease T)343.317 408.6 Q
(imer to t_o)-.385 E -.165(ve)-.165 G(rride).165 E 504 439.35 72 439.35
DL 295.029 368.35 295.029 439.35 DL 504 351.35 504 439.35 DL 72 351.35
72 439.35 DL(This state machine uses the follo)72 457.2 Q(wing macro:)
-.275 E/F2 11/Courier@0 SF(bool JoinDesired\(*,G\) {)85.2 476.2 Q
(if \(immediate_olist\(*,G\) != NULL ||)105 489.2 Q
(\(JoinDesired\(*,*,RP\(G\)\) &&)131.4 502.2 Q
(AssertWinner\(*,G,RPF_interface\(RP\(G\)\)\) != NULL\)\))138 515.2 Q
(return TRUE)131.4 528.2 Q(else)105 541.2 Q(return FALSE)131.4 554.2 Q
(})85.2 567.2 Q F0(JoinDesired\(*,G\) is true when the router has forw)
72 586.2 Q(arding state that w)-.11 E(ould cause it to forw)-.11 E(ard)
-.11 E(traf)72 599.2 Q(\214c for G using shared tree state.)-.275 E
(Note that although JoinDesired is true, the router')5.5 E 2.75(ss)-.605
G(ending)-2.75 E(of a Join\(*,G\) message may be suppressed by another \
router sending a Join\(*,G\) onto the)72 612.2 Q(upstream interf)72
625.2 Q(ace.)-.11 E F1 -.814(Tr)72 651.2 S(ansitions fr).814 E(om NotJ)
-.198 E(oined State)-.165 E F0(When the upstream \(*,G\) state-machine \
is in NotJoined state, the follo)72 667.8 Q(wing e)-.275 E -.165(ve)
-.275 G(nt may trigger a).165 E(state transition:)72 680.8 Q F1 -.165
(Jo)97 697.4 S(inDesir).165 E(ed\(*,G\) becomes T)-.198 E(rue)-.814 E F0
(The do)122 710.4 Q
(wnstream state for \(*,G\) has changed so that at least one interf)
-.275 E(ace is in)-.11 E
(immediate_olist\(*,G\), making JoinDesired\(*,G\) become T)122 723.4 Q
(rue.)-.385 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.4.6. [P)2.75 F(age 41])-.165 E EP
%%Page: 42 42
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(The upstream \(*,G\) state machine transitions to Joined state.)122 85
Q(Send Join\(*,G\) to the)5.5 E(appropriate upstream neighbor)122 98 Q
2.75(,w)-.44 G(hich is RPF'\(*,G\).)-2.75 E(Set the Join T)5.5 E
(imer \(JT\) to e)-.385 E(xpire)-.165 E(after t_periodic seconds.)122
111 Q/F1 11/Times-Bold@0 SF -.814(Tr)72 137 S(ansitions fr).814 E(om J)
-.198 E(oined State)-.165 E F0
(When the upstream \(*,G\) state-machine is in Joined state, the follo)
72 153.6 Q(wing e)-.275 E -.165(ve)-.275 G(nts may trigger state).165 E
(transitions:)72 166.6 Q F1 -.165(Jo)97 183.2 S(inDesir).165 E
(ed\(*,G\) becomes F)-.198 E(alse)-.275 E F0(The do)122 196.2 Q
(wnstream state for \(*,G\) has changed so no interf)-.275 E(ace is in)
-.11 E(immediate_olist\(*,G\), making JoinDesired\(*,G\) become F)122
209.2 Q(alse.)-.165 E
(The upstream \(*,G\) state machine transitions to NotJoined state.)122
225.8 Q(Send Prune\(*,G\) to)5.5 E(the appropriate upstream neighbor)122
238.8 Q 2.75(,w)-.44 G(hich is RPF'\(*,G\).)-2.75 E(Cancel the Join T)
5.5 E(imer \(JT\).)-.385 E F1 -.165(Jo)97 255.4 S(in T).165 E
(imer Expir)-.198 E(es)-.198 E F0(The Join T)122 268.4 Q(imer \(JT\) e)
-.385 E(xpires, indicating time to send a Join\(*,G\))-.165 E
(Send Join\(*,G\) to the appropriate upstream neighbor)122 285 Q 2.75
(,w)-.44 G(hich is RPF'\(*,G\).)-2.75 E(Restart the)5.5 E(Join T)122 298
Q(imer \(JT\) to e)-.385 E(xpire after t_periodic seconds.)-.165 E F1
(See J)97 314.6 Q(oin\(*,G\) to RPF'\(*,G\))-.165 E F0(This e)122 327.6
Q -.165(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G
(nt if RPF_interf).275 E(ace\(RP\(G\)\) is a shared medium.)-.11 E
(This router)5.5 E(sees another router on RPF_interf)122 340.6 Q
(ace\(RP\(G\)\) send a Join\(*,G\) to RPF'\(*,G\).)-.11 E(This)5.5 E
(causes this router to suppress its o)122 353.6 Q(wn Join.)-.275 E
(The upstream \(*,G\) state machine remains in Joined state.)122 370.2 Q
(If the Join T)5.5 E(imer is set to)-.385 E -.165(ex)122 383.2 S
(pire in less than t_suppressed seconds, reset it so that it e).165 E
(xpires after t_suppressed)-.165 E 2.75(seconds. If)122 396.2 R
(the Join T)2.75 E(imer is set to e)-.385 E
(xpire in more than t_suppressed seconds, lea)-.165 E .33 -.165(ve i)
-.22 H(t).165 E(unchanged.)122 409.2 Q F1
(See Prune\(*,G\) to RPF'\(*,G\))97 425.8 Q F0(This e)122 438.8 Q -.165
(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G(nt if RPF_interf)
.275 E(ace\(RP\(G\)\) is a shared medium.)-.11 E(This router)5.5 E
(sees another router on RPF_interf)122 451.8 Q
(ace\(RP\(G\)\) send a Prune\(*,G\) to RPF'\(*,G\).)-.11 E(As this)5.5 E
(router is in Joined state, it must o)122 464.8 Q -.165(ve)-.165 G
(rride the Prune after a short random interv).165 E(al.)-.275 E
(The upstream \(*,G\) state machine remains in Joined state.)122 481.4 Q
(If the Join T)5.5 E(imer is set to)-.385 E -.165(ex)122 494.4 S
(pire in more than t_o).165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E 2.75(seconds. If)122 507.4 R(the Join T)
2.75 E(imer is set to e)-.385 E(xpire in less than t_o)-.165 E -.165(ve)
-.165 G(rride seconds, lea).165 E .33 -.165(ve i)-.22 H(t).165 E
(unchanged.)122 520.4 Q F1(RPF'\(*,G\) changes)97 537 Q F0
(The current ne)122 550 Q(xt hop to)-.165 E -.11(wa)-.275 G
(rds the RP changes due an Assert\(*,G\) on the).11 E(RPF_interf)122 563
Q(ace\(RP\(G\)\).)-.11 E
(The upstream \(*,G\) state machine remains in Joined state.)122 579.6 Q
(If the Join T)5.5 E(imer is set to)-.385 E -.165(ex)122 592.6 S
(pire in more than t_o).165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E 2.75(seconds. If)122 605.6 R(the Join T)
2.75 E(imer is set to e)-.385 E(xpire in less than t_o)-.165 E -.165(ve)
-.165 G(rride seconds, lea).165 E .33 -.165(ve i)-.22 H(t).165 E
(unchanged.)122 618.6 Q F1(MRIB.next_hop\(RP\(G\)\) changes)97 635.2 Q
F0(An e)122 648.2 Q -.165(ve)-.275 G(nt occurred which caused the ne)
.165 E(xt hop to)-.165 E -.11(wa)-.275 G(rds the RP for G to change.).11
E(This)5.5 E(may be caused by a change in the MRIB routing database or \
by the installation of a)122 661.2 Q(dif)122 674.2 Q
(ferent RP-to-group mapping.)-.275 E
(Note that this transition should occur e)5.5 E -.165(ve)-.275 G 2.75
(ni).165 G(f)-2.75 E(RPF'\(*,G\) is not equal to the ne)122 687.2 Q 2.75
(wn)-.275 G -.165(ex)-2.75 G 2.75(th).165 G(op to)-2.75 E -.11(wa)-.275
G(rds RP\(G\), because it may be that the).11 E(ne)122 700.2 Q 2.75(wn)
-.275 G(eighbor is a better path to RP\(G\) than RPF'\(*,G\); this tran\
sition ensures that the)-2.75 E(better path is disco)122 713.2 Q -.165
(ve)-.165 G(red e).165 E -.165(ve)-.275 G 2.75(ni).165 G 2.75(fa)-2.75 G
2.75(na)-2.75 G(ssert occurred pre)-2.75 E(viously)-.275 E(.)-.715 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.4.6. [P)2.75 F(age 42])-.165 E EP
%%Page: 43 43
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(The upstream \(*,G\) state machine remains in Joined state.)122 85 Q
(Send Prune\(*,G\) to the old)5.5 E(upstream neighbor)122 98 Q 2.75(,w)
-.44 G(hich is the old v)-2.75 E(alue of RPF'\(*,G\).)-.275 E
(Send Join\(*,G\) to the ne)5.5 E(w)-.275 E
(upstream neighbor which is the ne)122 111 Q 2.75(wv)-.275 G
(alue of MRIB.ne)-3.025 E(xt_hop\(RP\(G\)\). Note that the)-.165 E
(Join goes to MRIB.ne)122 124 Q(xt_hop\(RP\(G\)\) and not RPF'\(*,G\) e)
-.165 E -.165(ve)-.275 G 2.75(ni).165 G 2.75(ft)-2.75 G(he ne)-2.75 E
2.75(wn)-.275 G(eighbor is)-2.75 E(on the same interf)122 137 Q
(ace as the old one because the routing change may cause the assert)-.11
E(state to be incorrect. Set the Join T)122 150 Q(imer \(JT\) to e)-.385
E(xpire after t_periodic seconds.)-.165 E/F1 11/Times-Bold@0 SF
(RPF'\(*,G\) GenID changes)97 166.6 Q F0
(The Generation ID of the router that is RPF'\(*,G\) changes.)122 179.6
Q(This normally means that)5.5 E
(this neighbor has lost state, and so the state must be refreshed.)122
192.6 Q(The upstream \(*,G\) state machine remains in Joined state. If \
the Join T)122 209.2 Q(imer is set to)-.385 E -.165(ex)122 222.2 S
(pire in more than t_o).165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E(seconds.)122 235.2 Q F1 2.75
(4.4.7. Sending)72 261.2 R(\(S,G\) J)2.75 E(oin/Prune Messages)-.165 E
F0(The per)72 277.8 Q(-interf)-.22 E
(ace state-machines for \(S,G\) hold join state from do)-.11 E
(wnstream PIM routers.)-.275 E(This)5.5 E
(state then determines whether a router needs to propag)72 290.8 Q
(ate a Join\(S,G\) upstream to)-.055 E -.11(wa)-.275 G(rds the).11 E
(source.)72 303.8 Q(If a router wishes to propag)72 320.4 Q
(ate a Join\(S,G\) upstream, it must also w)-.055 E
(atch for messages on its)-.11 E(upstream interf)72 333.4 Q
(ace from other routers on that subnet, and these may modify its beha)
-.11 E(vior)-.22 E 5.5(.I)-.605 G 2.75(fi)-5.5 G 2.75(ts)-2.75 G(ees)
-2.75 E 2.75(aJ)72 346.4 S(oin\(S,G\) to the correct upstream neighbor)
-2.75 E 2.75(,i)-.44 G 2.75(ts)-2.75 G(hould suppress its o)-2.75 E
(wn Join\(S,G\).)-.275 E(If it sees a)5.5 E(Prune\(S,G\), Prune\(S,G,rp\
t\), or Prune\(*,G\) to the correct upstream neighbor to)72 359.4 Q -.11
(wa)-.275 G(rds S, it should).11 E(be prepared to o)72 372.4 Q -.165(ve)
-.165 G(rride that prune by scheduling a Join\(S,G\) to be sent \(almos\
t\) immediately).165 E(.)-.715 E(Finally)72 385.4 Q 2.75(,i)-.715 G 2.75
(fi)-2.75 G 2.75(ts)-2.75 G
(ees the Generation ID of its upstream neighbor change, it kno)-2.75 E
(ws that the upstream)-.275 E(neighbor has lost state, and it should re\
fresh the state by scheduling a Join\(S,G\) to be sent)72 398.4 Q
(\(almost\) immediately)72 411.4 Q(.)-.715 E
(In addition if MRIB changes cause the ne)72 428 Q(xt hop to)-.165 E
-.11(wa)-.275 G(rds the source to change, the router should).11 E
(send a prune to the old ne)72 441 Q(xt hop, and a join to the ne)-.165
E 2.75(wn)-.275 G -.165(ex)-2.75 G 2.75(th).165 G(op.)-2.75 E
(The upstream \(S,G\) state-machine only contains tw)72 457.6 Q 2.75(os)
-.11 G(tates:)-2.75 E F1(Not J)72 474.2 Q(oined)-.165 E F0(The do)97
487.2 Q(wnstream state machines and IGMP information do not indicate th\
at the router needs)-.275 E
(to join the shortest-path tree for this \(S,G\).)97 500.2 Q F1 -.165
(Jo)72 516.8 S(ined).165 E F0(The do)97 529.8 Q(wnstream state machines\
 and IGMP information indicate that the router should join)-.275 E
(the shortest-path tree for this \(S,G\).)97 542.8 Q
(In addition, one timer JT\(S,G\) is k)72 559.4 Q
(ept which is used to trigger the sending of a Join\(S,G\) to the)-.11 E
(upstream ne)72 572.4 Q(xt hop to)-.165 E -.11(wa)-.275 G
(rd S, RPF'\(S,G\).).11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E
(ouv)-.385 E 160.971(elas Section)-.165 F 2.75(4.4.7. [P)2.75 F(age 43])
-.165 E EP
%%Page: 44 44
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 106 352 396 503 -186.584 237
108 271.584 PBEGIN
%%BeginDocument: sending-sg-std.ps
%%Creator: idraw
%%DocumentFonts: Helvetica Times-Italic
%%Pages: 1
%%BoundingBox: 106 352 609 589
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 52 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def
/Times-Italic reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 7.56686e-15 7.25873e-43 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 178.5 192 ] concat
%I 5
320 591
474 480
475 416
401 463
334 558
5 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 178.5 192 ] concat
%I 4
315 592
319 453
219 480
283 565
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 4
593 592
753 720
769 656
646 611
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 4
593 592
769 560
753 480
645 570
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 4
593 592
769 640
769 560
658 586
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 4
593 592
609 704
673 704
625 624
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 4
593 592
497 672
561 720
577 624
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
593 592
385 528
273 576
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I 3
209 592
401 656
529 608
3 BSpl
%I 2
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I
209 592 64 32 Elli
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 231.5 192 ] concat
%I
209 592 64 32 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 134.5 497.5 ] concat
%I
[
(not)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 128 487.5 ] concat
%I
[
(joined)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 324 491.5 ] concat
%I
[
(joined)
] Text
End

Begin %I Line
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 39.5 192 ] concat
%I
480 751 527 703 Line
%I 2
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 421.5 538 ] concat
%I
[
(See Prune\(S,G\))
(to RPF'\(S,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-times-medium-r-normal--8-80-75-75-p-44-iso8859-1
Times-Italic 8 SetF
%I t
[ 1 0 0 1 423 481.5 ] concat
%I
[
(\(note 1\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-times-medium-r-normal--8-80-75-75-p-44-iso8859-1
Times-Italic 8 SetF
%I t
[ 1 0 0 1 423.5 443 ] concat
%I
[
(\(note 1\) )
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 423 425 ] concat
%I
[
(RPF'\(S,G\) GenID)
(changes)
] Text
End

Begin %I BSpl
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
none SetP %I p n
%I t
[ 0.125 -0 -0 0.125 422.875 386.25 ] concat
%I 8
677 1262
733 1262
733 802
815 704
813 705
733 618
733 158
677 158
8 BSpl
%I 8
End

Begin %I Line
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 179 387 ] concat
%I
456 383 372 320 Line
%I 2
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 175 466 ] concat
%I
[
(JoinDesired\(S,G\)->FALSE)
([Send Prune\(S,G\)])
([Set SPTbit\(S,G\) to FALSE])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-times-medium-r-normal--8-80-75-75-p-44-iso8859-1
Times-Italic 8 SetF
%I t
[ 1 0 0 1 413 384.5 ] concat
%I
[
(Note 1: For interoperability with)
(implemtations of RFC 2362)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 525.625 497 ] concat
%I
[
([Lower timer to)
(randomized)
(prune-override interval])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 422.5 501 ] concat
%I
[
(See Prune\(S,G,rpt\))
(to RPF'\(S,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 423.5 463 ] concat
%I
[
(See Prune\(*,G\))
(to RPF'\(S,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 187 609.5 ] concat
%I
[
(Timer Expires)
([Send Join\(S,G\)])
([Set timer to t_ periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 352 612 ] concat
%I
[
(See Join\(S,G\) to RPF'\(S,G\))
([Raise timer to t_suppressed])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 176 425 ] concat
%I
[
(MRIB.next_hop\(S\) changes)
([Send Join\(S,G\) to new next hop])
([Send Prune\(S,G\) to old next hop])
([Set timer to t_periodic])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 171 531 ] concat
%I
[
(JoinDesired\(S,G\)->TRUE)
([Send Join\(S,G\)])
([Set timer to t_periodic])
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND/F1 11/Times-Bold@0 SF(Figur)212.258 310.584 Q 2.75(e8)-.198 G
2.75(:U)-2.75 G(pstr)-2.75 E(eam \(S,G\) state-machine)-.198 E F0
(In tab)72 333.184 Q(ular form, the state machine is:)-.22 E .44 LW
503.994 343.934 72 343.934 DL F1(Ev)342.314 354.184 Q(ent)-.11 E 503.994
358.934 196.292 358.934 DL(Pr)93.464 368.184 Q .33 -.165(ev S)-.198 H
(tate).165 E -.165(Jo)229.488 369.184 S(inDesir).165 E(ed\(S,G\))-.198 E
(->T)229.488 382.184 Q(rue)-.814 E -.165(Jo)380.967 369.184 S(inDesir)
.165 E(ed\(S,G\))-.198 E(->F)380.967 382.184 Q(alse)-.275 E 503.994
386.934 72 386.934 DL 503.994 388.934 72 388.934 DL F0(-> J state)
229.488 399.184 Q(-)111.67 E F1(NotJ)93.464 399.184 Q(oined \(NJ\))-.165
E F0(Send Join\(S,G\); Set)229.488 412.184 Q -.385(Ti)229.488 425.184 S
(mer to t_periodic).385 E 503.994 429.934 72 429.934 DL 147.816(--)
229.488 440.184 S 2.75(>N)-147.816 G 2.75(Js)-2.75 G(tate)-2.75 E F1
-.165(Jo)93.464 440.184 S(ined \(J\)).165 E F0(Send Prune\(S,G\); Set)
380.967 453.184 Q(SPTbit\(S,G\) to F)380.967 466.184 Q(ALSE)-.814 E
503.994 470.934 72 470.934 DL 348.771 358.934 348.771 470.934 DL 196.292
343.934 196.292 470.934 DL 198.292 343.934 198.292 470.934 DL 503.994
343.934 503.994 470.934 DL 72 343.934 72 470.934 DL(Fenner/Handle)72 769
Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.7. [P)2.75 F(age 44])-.165 E EP
%%Page: 45 45
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In addition, we ha)72 85 Q .33
-.165(ve t)-.22 H(he follo).165 E
(wing transitions which occur within the Joined state:)-.275 E .44 LW
503.992 95.75 72 95.75 DL/F1 11/Times-Bold@0 SF(In J)244.843 106 Q
(oined \(J\) State)-.165 E 503.992 110.75 72 110.75 DL 503.992 112.75 72
112.75 DL -.198(Ti)82.876 123 S(mer Expir).198 E(es)-.198 E(See J)
185.783 123 Q(oin\(S,G\) to)-.165 E(RPF'\(S,G\))185.783 136 Q
(See Prune\(S,G\) to)295.609 123 Q(RPF'\(S,G\))295.609 136 Q(See Prune)
412.255 123 Q(\(S,G,r)412.255 136 Q(pt\) to)-.11 E(RPF'\(S,G\))412.255
149 Q 503.992 153.75 72 153.75 DL 503.992 155.75 72 155.75 DL F0
(Send Join\(S,G\);)82.876 166 Q(Set T)82.876 179 Q(imer to)-.385 E
(t_periodic)82.876 192 Q(Increase T)185.783 166 Q(imer to)-.385 E
(t_suppr)185.783 179 Q(Decrease T)295.609 166 Q(imer to)-.385 E(t_o)
295.609 179 Q -.165(ve)-.165 G(rride).165 E(Decrease T)412.255 166 Q
(imer to)-.385 E(t_o)412.255 179 Q -.165(ve)-.165 G(rride).165 E 503.992
196.75 72 196.75 DL 395.941 112.75 395.941 196.75 DL 279.295 112.75
279.295 196.75 DL 169.469 112.75 169.469 196.75 DL 503.992 95.75 503.992
196.75 DL 72 95.75 72 196.75 DL 504 208.75 72 208.75 DL F1(In J)244.847
219 Q(oined \(J\) State)-.165 E 504 223.75 72 223.75 DL 504 225.75 72
225.75 DL(See Prune\(*,G\) to)92.604 236 Q(RPF'\(S,G\))92.604 249 Q
(MRIB.next_hop\(S\))237.818 236 Q(changes)237.818 249 Q
(RPF'\(S,G\) GenID)399.07 236 Q(changes)399.07 249 Q 504 253.75 72
253.75 DL 504 255.75 72 255.75 DL F0(Decrease T)92.604 266 Q(imer to)
-.385 E(t_o)92.604 279 Q -.165(ve)-.165 G(rride).165 E
(Send Join\(S,G\) to ne)237.818 266 Q(w)-.275 E(ne)237.818 279 Q
(xt hop; Send)-.165 E(Prune\(S,G\) to old ne)237.818 292 Q(xt)-.165 E
(hop; Set T)237.818 305 Q(imer to)-.385 E(t_periodic)237.818 318 Q
(Decrease T)399.07 266 Q(imer to)-.385 E(t_o)399.07 279 Q -.165(ve)-.165
G(rride).165 E 504 322.75 72 322.75 DL 368.164 225.75 368.164 322.75 DL
206.912 225.75 206.912 322.75 DL 504 208.75 504 322.75 DL 72 208.75 72
322.75 DL(This state machine uses the follo)72 340.6 Q(wing macro:)-.275
E/F2 11/Courier@0 SF(bool JoinDesired\(S,G\) {)85.2 359.6 Q
(return\( immediate_olist\(S,G\) != NULL)111.6 372.6 Q
(OR \( KeepaliveTimer\(S,G\) is running)164.4 385.6 Q
(AND inherited_olist\(S,G\) != NULL \) \))197.4 398.6 Q(})85.2 411.6 Q
F0(JoinDesired\(S,G\) is true when the router has forw)72 430.6 Q
(arding state that w)-.11 E(ould cause it to forw)-.11 E(ard)-.11 E
(traf)72 443.6 Q(\214c for G using source tree state.)-.275 E
(The source tree state can either be as a result of acti)5.5 E -.165(ve)
-.275 G(source-speci\214c join state, or the \(S,G\) k)72 456.6 Q
(eepali)-.11 E .33 -.165(ve t)-.275 H(imer and acti).165 E .33 -.165
(ve n)-.275 H(on-source-speci\214c state. Note).165 E
(that although JoinDesired is true, the router')72 469.6 Q 2.75(ss)-.605
G(ending of a Join\(S,G\) message may be suppressed)-2.75 E
(by another router sending a Join\(S,G\) onto the upstream interf)72
482.6 Q(ace.)-.11 E F1 -.814(Tr)72 508.6 S(ansitions fr).814 E(om NotJ)
-.198 E(oined State)-.165 E F0(When the upstream \(S,G\) state-machine \
is in NotJoined state, the follo)72 525.2 Q(wing e)-.275 E -.165(ve)
-.275 G(nt may trigger a).165 E(state transition:)72 538.2 Q F1 -.165
(Jo)97 554.8 S(inDesir).165 E(ed\(S,G\) becomes T)-.198 E(rue)-.814 E F0
(The do)122 567.8 Q
(wnstream state for \(S,G\) has changed so that at least one interf)
-.275 E(ace is in)-.11 E
(inherited_olist\(S,G\), making JoinDesired\(S,G\) become T)122 580.8 Q
(rue.)-.385 E
(The upstream \(S,G\) state machine transitions to Joined state.)122
597.4 Q(Send Join\(S,G\) to the)5.5 E(appropriate upstream neighbor)122
610.4 Q 2.75(,w)-.44 G(hich is RPF'\(S,G\).)-2.75 E(Set the Join T)5.5 E
(imer \(JT\) to e)-.385 E(xpire)-.165 E(after t_periodic seconds.)122
623.4 Q F1 -.814(Tr)72 649.4 S(ansitions fr).814 E(om J)-.198 E
(oined State)-.165 E F0
(When the upstream \(S,G\) state-machine is in Joined state, the follo)
72 666 Q(wing e)-.275 E -.165(ve)-.275 G(nts may trigger state).165 E
(transitions:)72 679 Q F1 -.165(Jo)97 695.6 S(inDesir).165 E
(ed\(S,G\) becomes F)-.198 E(alse)-.275 E F0(The do)122 708.6 Q
(wnstream state for \(S,G\) has changed so no interf)-.275 E
(ace is in inherited_olist\(S,G\),)-.11 E
(making JoinDesired\(S,G\) become F)122 721.6 Q(alse.)-.165 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.4.7. [P)2.75 F(age 45])-.165 E EP
%%Page: 46 46
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(The upstream \(S,G\) state machine transitions to NotJoined state.)122
85 Q(Send Prune\(S,G\) to)5.5 E(the appropriate upstream neighbor)122 98
Q 2.75(,w)-.44 G(hich is RPF'\(S,G\).)-2.75 E(Cancel the Join T)5.5 E
(imer \(JT\).)-.385 E/F1 11/Times-Bold@0 SF -.165(Jo)97 114.6 S(in T)
.165 E(imer Expir)-.198 E(es)-.198 E F0(The Join T)122 127.6 Q
(imer \(JT\) e)-.385 E(xpires, indicating time to send a Join\(S,G\))
-.165 E(Send Join\(S,G\) to the appropriate upstream neighbor)122 144.2
Q 2.75(,w)-.44 G(hich is RPF'\(S,G\).)-2.75 E(Restart the)5.5 E(Join T)
122 157.2 Q(imer \(JT\) to e)-.385 E(xpire after t_periodic seconds.)
-.165 E F1(See J)97 173.8 Q(oin\(S,G\) to RPF'\(S,G\))-.165 E F0(This e)
122 186.8 Q -.165(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G
(nt if RPF_interf).275 E(ace\(S\) is a shared medium.)-.11 E
(This router sees)5.5 E(another router on RPF_interf)122 199.8 Q
(ace\(S\) send a Join\(S,G\) to RPF'\(S,G\).)-.11 E(This causes this)5.5
E(router to suppress its o)122 212.8 Q(wn Join.)-.275 E
(The upstream \(S,G\) state machine remains in Joined state.)122 229.4 Q
(If the Join T)5.5 E(imer is set to)-.385 E -.165(ex)122 242.4 S
(pire in less than t_suppressed seconds, reset it so that it e).165 E
(xpires after t_suppressed)-.165 E 2.75(seconds. If)122 255.4 R
(the Join T)2.75 E(imer is set to e)-.385 E
(xpire in more than t_suppressed seconds, lea)-.165 E .33 -.165(ve i)
-.22 H(t).165 E(unchanged.)122 268.4 Q F1
(See Prune\(S,G\) to RPF'\(S,G\))97 285 Q F0(This e)122 298 Q -.165(ve)
-.275 G(nt is only rele).165 E -.275(va)-.275 G(nt if RPF_interf).275 E
(ace\(S\) is a shared medium.)-.11 E(This router sees)5.5 E
(another router on RPF_interf)122 311 Q
(ace\(S\) send a Prune\(S,G\) to RPF'\(S,G\).)-.11 E(As this router is)
5.5 E(in Joined state, it must o)122 324 Q -.165(ve)-.165 G
(rride the Prune after a short random interv).165 E(al.)-.275 E
(The upstream \(S,G\) state machine remains in Joined state.)122 340.6 Q
(If the Join T)5.5 E(imer is set to)-.385 E -.165(ex)122 353.6 S
(pire in more than t_o).165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E(seconds.)122 366.6 Q F1(See Prune\(S,G,r)
97 383.2 Q(pt\) to RPF'\(S,G\))-.11 E F0(This e)122 396.2 Q -.165(ve)
-.275 G(nt is only rele).165 E -.275(va)-.275 G(nt if RPF_interf).275 E
(ace\(S\) is a shared medium.)-.11 E(This router sees)5.5 E
(another router on RPF_interf)122 409.2 Q
(ace\(S\) send a Prune\(S,G,rpt\) to RPF'\(S,G\).)-.11 E(If the)5.5 E
(upstream router is an RFC 2362 compliant PIM router)122 422.2 Q 2.75
(,t)-.44 G(hen the Prune\(S,G,rpt\) will)-2.75 E(cause it to stop forw)
122 435.2 Q 2.75(arding. F)-.11 F(or backw)-.165 E(ards compatibility)
-.11 E 2.75(,t)-.715 G(his router should o)-2.75 E -.165(ve)-.165 G
(rride).165 E(the prune so that forw)122 448.2 Q(arding continues.)-.11
E(The upstream \(S,G\) state machine remains in Joined state.)122 464.8
Q(If the Join T)5.5 E(imer is set to)-.385 E -.165(ex)122 477.8 S
(pire in more than t_o).165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E(seconds.)122 490.8 Q F1
(See Prune\(*,G\) to RPF'\(S,G\))97 507.4 Q F0(This e)122 520.4 Q -.165
(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G(nt if RPF_interf)
.275 E(ace\(S\) is a shared medium.)-.11 E(This router sees)5.5 E
(another router on RPF_interf)122 533.4 Q
(ace\(S\) send a Prune\(*,G\) to RPF'\(S,G\).)-.11 E(If the upstream)5.5
E(router is an RFC 2362 compliant PIM router)122 546.4 Q 2.75(,t)-.44 G
(hen the Prune\(*,G\) will cause it to stop)-2.75 E(forw)122 559.4 Q
2.75(arding. F)-.11 F(or backw)-.165 E(ards compatibility)-.11 E 2.75
(,t)-.715 G(his router should o)-2.75 E -.165(ve)-.165 G
(rride the prune so that).165 E(forw)122 572.4 Q(arding continues.)-.11
E(The upstream \(S,G\) state machine remains in Joined state.)122 589 Q
(If the Join T)5.5 E(imer is set to)-.385 E -.165(ex)122 602 S
(pire in more than t_o).165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E(seconds.)122 615 Q F1(RPF'\(S,G\) changes)
97 631.6 Q F0(The current ne)122 644.6 Q(xt hop to)-.165 E -.11(wa)-.275
G(rds the RP changes due an Assert\(S,G\) on the).11 E(RPF_interf)122
657.6 Q(ace\(S\).)-.11 E
(The upstream \(S,G\) state machine remains in Joined state.)122 674.2 Q
(If the Join T)5.5 E(imer is set to)-.385 E -.165(ex)122 687.2 S
(pire in more than t_o).165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E 2.75(seconds. If)122 700.2 R(the Join T)
2.75 E(imer is set to e)-.385 E(xpire in less than t_o)-.165 E -.165(ve)
-.165 G(rride seconds, lea).165 E .33 -.165(ve i)-.22 H(t).165 E
(unchanged.)122 713.2 Q(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)
-.385 E 160.971(elas Section)-.165 F 2.75(4.4.7. [P)2.75 F(age 46])-.165
E EP
%%Page: 47 47
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF
(MRIB.next_hop\(S\) changes)97 85 Q F0 2.75(Ac)122 98 S
(hange in the routing base stored in the MRIB causes the ne)-2.75 E
(xt hop to)-.165 E -.11(wa)-.275 G(rds S to).11 E(change.)122 111 Q
(The upstream \(S,G\) state machine remains in Joined state.)122 127.6 Q
(Send Prune\(S,G\) to the old)5.5 E(upstream neighbor)122 140.6 Q 2.75
(,w)-.44 G(hich is the old v)-2.75 E(alue of RPF'\(S,G\).)-.275 E
(Send Join\(S,G\) to the ne)5.5 E(w)-.275 E
(upstream neighbor which is the ne)122 153.6 Q 2.75(wv)-.275 G
(alue of MRIB.ne)-3.025 E 2.75(xt_hop\(S\). Note)-.165 F(that the Join)
2.75 E(goes to MRIB.ne)122 166.6 Q(xt_hop\(S\) and not RPF'\(S,G\) e)
-.165 E -.165(ve)-.275 G 2.75(ni).165 G 2.75(ft)-2.75 G(he ne)-2.75 E
2.75(wn)-.275 G(eighbor is on the same)-2.75 E(interf)122 179.6 Q
(ace as the old one because the routing change may cause MRIB.ne)-.11 E
(xt_hop\(S\) to)-.165 E(ha)122 192.6 Q .33 -.165(ve a b)-.22 H
(etter path to S than RPF'\(S,G\); sending to MRIB.ne).165 E
(xt_hop\(S\) ensures that)-.165 E(this is disco)122 205.6 Q -.165(ve)
-.165 G 2.75(red. Set).165 F(the Join T)2.75 E(imer \(JT\) to e)-.385 E
(xpire after t_periodic seconds.)-.165 E F1(RPF'\(S,G\) GenID changes)97
222.2 Q F0(The Generation ID of the router that is RPF'\(S,G\) changes.)
122 235.2 Q(This normally means that)5.5 E
(this neighbor has lost state, and so the state must be refreshed.)122
248.2 Q(The upstream \(S,G\) state machine remains in Joined state. If \
the Join T)122 264.8 Q(imer is set to)-.385 E -.165(ex)122 277.8 S
(pire in more than t_o).165 E -.165(ve)-.165 G
(rride seconds, reset it so that it e).165 E(xpires after t_o)-.165 E
-.165(ve)-.165 G(rride).165 E(seconds.)122 290.8 Q F1 2.75
(4.4.8. \(S,G,r)72 316.8 R(pt\) P)-.11 E(eriodic Messages)-.22 E F0(\(S\
,G,rpt\) Joins and Prunes are \(S,G\) Joins or Prunes sent on the RP tr\
ee with the RPT bit set,)72 333.4 Q
(either to modify the results of \(*,G\) Joins, or to o)72 346.4 Q -.165
(ve)-.165 G(rride the beha).165 E(vior of other upstream LAN)-.22 E 2.75
(peers. The)72 359.4 R(ne)2.75 E
(xt section describes the rules for sending triggered messages.)-.165 E
(This section)5.5 E(describes the rules for including an Prune\(S,G,rpt\
\) message with a Join\(*,G\).)72 372.4 Q
(When a router is going to send a Join\(*,G\), it should use the follo)
72 389 Q(wing pseudocode, for each)-.275 E(\(S,G\) for which it has sta\
te, to decide whether to include a Prune\(S,G,rpt\) in the compound)72
402 Q(Join/Prune message:)72 415 Q/F2 11/Courier@0 SF
(if\( SPTbit\(S,G\) == TRUE \) {)85.2 434 Q(#)111.6 447 Q F0
(Note: If recei)6.6 E(ving \(S,G\) on the SPT)-.275 E 2.75(,w)-.814 G
2.75(eo)-2.75 G(nly prune of)-2.75 E 2.75(ft)-.275 G(he)-2.75 E F2(#)
111.6 460 Q F0(shared tree if the rpf neighbors dif)6.6 E(fer)-.275 E(.)
-.605 E F2(if\( RPF'\(*,G\) != RPF'\(S,G\) \) {)118.2 473 Q
(add Prune\(S,G,rpt\) to compound message)144.6 486 Q(})118.2 499 Q 6.6
(}e)85.2 512 S(lse if \( inherited_olist\(S,G,rpt\) == NULL \) {)-6.6 E
(#)98.4 525 Q F0(Note: all \(*,G\) olist interf)9.35 E
(aces sent rpt prunes for \(S,G\).)-.11 E F2
(add Prune\(S,G,rpt\) to compound message)98.4 538 Q 6.6(}e)85.2 551 S
(lse if \( RPF'\(*,G\) != RPF'\(S,G,rpt\) {)-6.6 E(#)98.4 564 Q F0
(Note: we joined the shared tree, b)6.6 E(ut there w)-.22 E
(as an \(S,G\) assert and)-.11 E F2(#)98.4 577 Q F0
(the source tree RPF neighbor is dif)6.6 E(ferent.)-.275 E F2
(add Prune\(S,G,rpt\) to compound message)98.4 590 Q(})85.2 603 Q F0(No\
te that Join\(S,G,rpt\) is not normally sent as a periodic message, b)72
625.6 Q(ut only as a triggered)-.22 E(message.)72 638.6 Q F1 2.75
(4.4.9. State)72 677.6 R(Machine f)2.75 E(or \(S,G,r)-.275 E(pt\) T)-.11
E(rigger)-.814 E(ed Messages)-.198 E F0
(The state machine for \(S,G,rpt\) triggered messages is required per)72
694.2 Q(-\(S,G\) when there is \(*,G\) or)-.22 E
(\(*,*,RP\) join state at a router)72 707.2 Q 2.75(,a)-.44 G
(nd the router or an)-2.75 E 2.75(yo)-.165 G 2.75(fi)-2.75 G
(ts upstream LAN peers wishes to prune S)-2.75 E(of)72 720.2 Q 2.75(ft)
-.275 G(he RP tree.)-2.75 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E
(ouv)-.385 E 160.971(elas Section)-.165 F 2.75(4.4.9. [P)2.75 F(age 47])
-.165 E EP
%%Page: 48 48
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(There are three states in the state-machine.)72 85 Q
(One of the states is when there is neither \(*,G\) nor)5.5 E
(\(*,*,RP\(G\)\) join state at this router)72 98 Q 5.5(.I)-.605 G 2.75
(ft)-5.5 G(here is \(*,G\) or \(*,*,RP\(G\)\) join state at the router)
-2.75 E 2.75(,t)-.44 G(hen)-2.75 E
(the state machine must be at one of the other tw)72 111 Q 2.75(os)-.11
G(tates:)-2.75 E/F1 11/Times-Bold@0 SF(Pruned\(S,G,r)72 140.6 Q(pt\))
-.11 E F0(\(*,G\) or \(*,*,RP\(G\)\) Joined, b)97 153.6 Q
(ut \(S,G,rpt\) pruned)-.22 E F1(NotPruned\(S,G,r)72 170.2 Q(pt\))-.11 E
F0(\(*,G\) or \(*,*,RP\(G\)\) Joined, and \(S,G,rpt\) not pruned)97
183.2 Q F1(RPTNotJ)72 199.8 Q(oined\(G\))-.165 E F0
(neither \(*,G\) nor \(*,*,RP\(G\)\) has not been joined.)97 212.8 Q
(In addition there is an \(S,G,rpt\) Ov)72 229.4 Q(erride T)-.165 E
(imer)-.385 E 2.75(,O)-.44 G
(T\(S,G,rpt\), which is used to delay triggered)-3.19 E
(Join\(S,G,rpt\) messages to pre)72 242.4 Q -.165(ve)-.275 G
(nt implosions of triggered messages.).165 E 53 280 396 543 -201.282 276
108 462.682 PBEGIN
%%BeginDocument: sgrpt-override.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 53 280 596 556
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 8 8 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22 179 ] concat
%I 4
763 517
694 733
825 730
772 568
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22 179 ] concat
%I 3
730 509
525 484
387 360
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22 179 ] concat
%I 3
344 328
580 327
731 486
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22 179 ] concat
%I 3
349 682
596 690
730 556
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22 179 ] concat
%I 3
344 326
256 514
318 644
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22 179 ] concat
%I 3
350 683
431 520
374 368
3 BSpl
%I 2
End

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 73.5 190.5 ] concat
%I
157 659 48 48 Elli
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 73.5 14.5 ] concat
%I
157 659 48 48 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 136.5 347.5 ] concat
%I
[
(Pruned)
] Text
End

End %I eop

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 281.5 110.5 ] concat
%I
157 659 48 48 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 344 449 ] concat
%I
[
(Not)
(Pruned)
] Text
End

End %I eop

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 -22 179 ] concat
%I 4
787 479
819 311
714 312
747 477
4 BSpl
%I 2
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 133.5 464.999 ] concat
%I
[
(PruneDesired)
(\(S,G,rpt\))
(->TRUE)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 197.5 530 ] concat
%I
[
(Inherited_olist\(S,G,rpt\))
(->NON-NULL)
] Text
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.998574 0 0 1.58334 15.241 -288.704 ] concat

Begin %I BSpl
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
none SetP %I p n
%I t
[ 0.5 -0 -0 0.5 -22 179 ] concat
%I 4
1051 661
1069 661
1067 561
1083 560
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
none SetP %I p n
%I t
[ 0.5 0 -0 -0.5 -20.5 739 ] concat
%I 4
1051 661
1069 661
1067 561
1083 560
4 BSpl
%I 2
End

End %I eop

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 442.5 468.5 ] concat
%I
[
(See \(S,G\))
(Prune to)
(RPF'\(S,G,rpt\))
] Text
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 21.5 229.5 ] concat
%I 4
697 464
792 597
859 512
717 448
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
0 SetP
%I t
[ 0.5 -0 -0 0.5 21.5 229.5 ] concat
%I 4
722 437
835 502
849 397
726 416
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
0 SetP
%I t
[ 0.5 -0 -0 0.5 21.5 229.5 ] concat
%I 4
725 404
860 389
820 293
712 384
4 BSpl
%I 2
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 442.5 421.5 ] concat
%I
[
(RPF'\(S,G,rpt\))
(changes to be)
(the same as)
(RPF'\(*,G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 130.997 530.498 ] concat
%I
[
(RPTNot)
(Joined\(G\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 56.4928 413.995 ] concat
%I
[
(RPTJoinDesired\(G\))
(-> FALSE)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 437.5 512 ] concat
%I
[
(See \(S,G,rpt\))
(Prune to )
(RPF'\(S,G,rpt\))
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 209 363 ] concat
%I
[
(PruneDesired)
(\(S,G,rpt\)->FALSE)
([Send Join\(S,G,rpt\)])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 333.5 329 ] concat
%I
[
(See Join\(S,G,rpt\))
(tp RPF'\(S,G,rpt\))
([Cancel override timer])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 194.5 434.5 ] concat
%I
[
(PruneDesired)
(\(S,G,rpt\)->TRUE)
([Send Prune\(S,G,rpt\)])
([Cancel override timer])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 538.5 475.5 ] concat
%I
[
(Set/lower)
(\(don't raise\))
(\(S,G,rpt\) )
(override timer)
(to randomized)
(prune_override)
(interval)
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 341 578 ] concat
%I
[
(\(S,G,rpt\) overide timer Fires)
([Send Join\(S,G,rpt\)])
([leave override timer unset])
] Text
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 1.00035 -0 -0 1.00035 117.04 149.052 ] concat
%I 3
228 293
121 306
55 356
3 BSpl
%I 1
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -*-helvetica-medium-r-normal-*-12-*-*-*-*-*-*-*
Helvetica 12 SetF
%I t
[ 1 0 0 1 214.996 477.501 ] concat
%I
[
(RPTJoinDesired\(G\))
(->FALSE)
([Cancel OT])
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND F1(Figur)149.624 501.682 Q 2.75(e9)-.198 G 2.75(:U)-2.75 G
(pstr)-2.75 E(eam \(S,G,r)-.198 E(pt\) state-machine f)-.11 E
(or trigger)-.275 E(ed messages)-.198 E F0(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.4.9. [P)2.75 F(age 48])-.165 E EP
%%Page: 49 49
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In tab)72 85 Q
(ular form, the state machine is:)-.22 E .44 LW 503.995 95.75 72 95.75
DL/F1 11/Times-Bold@0 SF(Ev)316.984 106 Q(ent)-.11 E 503.995 110.75
153.821 110.75 DL(Pr)77.083 126.5 Q .33 -.165(ev S)-.198 H(tate).165 E
(PruneDesir)162.446 121 Q(ed)-.198 E(\(S,G,r)162.446 134 Q(pt\))-.11 E
(\255>T)162.446 147 Q(rue)-.814 E(PruneDesir)242.265 121 Q(ed)-.198 E
(\(S,G,r)242.265 134 Q(pt\))-.11 E(\255>F)242.265 147 Q(alse)-.275 E
(RPTJ)322.084 121 Q(oinDesir)-.165 E(ed\(G\))-.198 E(\255>F)322.084 134
Q(alse)-.275 E(inherited_olist)431.075 121 Q(\(S,G,r)431.075 134 Q(pt\))
-.11 E(\255>non-NULL)431.075 147 Q 503.995 151.75 72 151.75 DL 503.995
153.75 72 153.75 DL F0(-> P state)162.446 164 Q -49.734 76.156(-- -)
38.173 H 2.75(>N)-76.156 G 2.75(Ps)-2.75 G(tate)-2.75 E F1(RPTNotJ)
77.083 164 Q(oined)-.165 E(\(G\) \(NJ\))77.083 177 Q 503.995 181.75 72
181.75 DL F0 76.156(--)162.446 192 S 2.75(>N)-76.156 G 2.75(Ps)-2.75 G
27.481(tate ->)-2.75 F(NJ state)2.75 E(-)61.24 E F1(Pruned)77.083 198.5
Q(\(S,G,r)77.083 211.5 Q(pt\) \(P\))-.11 E F0(Send Join)242.265 205 Q
(\(S,G,rpt\))242.265 218 Q 503.995 222.75 72 222.75 DL(-> P state)
162.446 233 Q 76.156(--)38.173 G 2.75(>N)-76.156 G 2.75(Js)-2.75 G 58.49
(tate -)-2.75 F F1(NotPruned)77.083 252.5 Q(\(S,G,r)77.083 265.5 Q
(pt\) \(NP\))-.11 E F0(Send Prune)162.446 246 Q(\(S,G,rpt\);)162.446 259
Q(Cancel O)162.446 272 Q(T)-.44 E(timer)162.446 285 Q(Cancel O)322.084
246 Q 2.75(Tt)-.44 G(imer)-2.75 E 503.995 289.75 72 289.75 DL 423.45
110.75 423.45 289.75 DL 314.459 110.75 314.459 289.75 DL 234.64 110.75
234.64 289.75 DL 153.821 95.75 153.821 289.75 DL 155.821 95.75 155.821
289.75 DL 503.995 95.75 503.995 289.75 DL 72 95.75 72 289.75 DL
(Additionally)72 304 Q 2.75(,w)-.715 G 2.75(eh)-2.75 G -2.475 -.22(av e)
-2.75 H(the follo)2.97 E
(wing transitions within the NotPruned\(S,G,rpt\) state which are all)
-.275 E(used for prune o)72 317 Q -.165(ve)-.165 G(rride beha).165 E
(vior)-.22 E(.)-.605 E 503.99 327.75 72 327.75 DL F1
(In NotPruned\(S,G,r)221.137 338 Q(pt\) State)-.11 E 503.99 342.75 72
342.75 DL 503.99 344.75 72 344.75 DL .88 -.44(OT t)79.89 355 T(imer).44
E(expir)79.89 368 Q(es)-.198 E(See Prune)151.08 355 Q(\(S,G,r)151.08 368
Q(pt\) to)-.11 E(RPF' \(S,G,r)151.08 381 Q(pt\))-.11 E(See J)244.6 355 Q
(oin)-.165 E(\(S,G,r)244.6 368 Q(pt\) to)-.11 E(RPF' \(S,G,r)244.6 381 Q
(pt\))-.11 E(See Prune)338.12 355 Q(\(S,G\) to RPF')338.12 368 Q
(\(S,G,r)338.12 381 Q(pt\))-.11 E(RPF' \(S,G,r)426.25 355 Q(pt\))-.11 E
(-> RPF' \(*,G\))426.25 368 Q 503.99 385.75 72 385.75 DL 503.99 387.75
72 387.75 DL F0(Send Join)79.89 398 Q(\(S,G,rpt\);)79.89 411 Q(Cancel O)
79.89 424 Q(T)-.44 E(timer)79.89 437 Q .88 -.44(OT t)151.08 398 T
(imer =).44 E(min\(timer)151.08 411 Q(,)-.44 E(t_po\))151.08 424 Q
(Cancel O)244.6 398 Q(T)-.44 E(timer)244.6 411 Q .88 -.44(OT t)338.12
398 T(imer =).44 E(min\(timer)338.12 411 Q(,)-.44 E(t_po\))338.12 424 Q
.88 -.44(OT t)426.25 398 T(imer =).44 E(min\(timer)426.25 411 Q(,)-.44 E
(t_po\))426.25 424 Q 503.99 441.75 72 441.75 DL 414.415 344.75 414.415
441.75 DL 326.285 344.75 326.285 441.75 DL 232.765 344.75 232.765 441.75
DL 139.245 344.75 139.245 441.75 DL 503.99 327.75 503.99 441.75 DL 72
327.75 72 441.75 DL(Note that the)72 459.6 Q/F2 11/Courier@0 SF(min)2.75
E F0(function in the abo)2.75 E .33 -.165(ve s)-.165 H
(tate machine considers a non-running timer to ha).165 E .33 -.165(ve a)
-.22 H(n).165 E(in\214nite v)72 472.6 Q(alue \(e.g.)-.275 E F2
(min\(not-running, t_po\))2.75 E F0(=)2.75 E F2(t_po)2.75 E F0(\).)A
(This state machine uses the follo)72 489.2 Q(wing macros:)-.275 E F2
(bool RPTJoinDesired\(G\) {)85.2 508.2 Q
(return \(JoinDesired\(*,G\) || JoinDesired\(*,*,RP\(G\)\)\))98.4 521.2
Q(})85.2 534.2 Q F0
(RPTJoinDesired\(G\) is true when the router has forw)72 556.8 Q
(arding state that w)-.11 E(ould cause it to forw)-.11 E(ard)-.11 E
(traf)72 569.8 Q
(\214c for G using either \(*,G\) or \(*,*,RP\) shared tree state.)-.275
E F2(bool PruneDesired\(S,G,rpt\) {)85.2 588.8 Q
(return \( RPTJoinDesired\(G\) AND)118.2 601.8 Q 6.6(\(i)177.6 614.8 S
(nherited_olist\(S,G,rpt\) == NULL)-6.6 E(OR \(SPTbit\(S,G\)==TRUE)190.8
627.8 Q(AND \(RPF'\(*,G\) != RPF'\(S,G\)\) \)\)\))217.2 640.8 Q(})85.2
653.8 Q F0(PruneDesired\(S,G,rpt\) can only be true if RPTJoinDesired\(\
G\) is true.)72 676.4 Q(If RPTJoinDesired\(G\) is)5.5 E(true, then Prun\
eDesired\(S,G,rpt\) is true if either there are no outgoing interf)72
689.4 Q(aces that S w)-.11 E(ould be)-.11 E(forw)72 702.4 Q
(arded on, or if the router has acti)-.11 E .33 -.165(ve \()-.275 H
(S,G\) forw).165 E(arding state b)-.11 E(ut RPF'\(*,G\) != RPF'\(S,G\).)
-.22 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.4.9. [P)2.75 F(age 49])-.165 E EP
%%Page: 50 50
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(The state machine contains the follo)72 85 Q(wing transition e)-.275 E
-.165(ve)-.275 G(nts:).165 E/F1 11/Times-Bold@0 SF(See J)72 101.6 Q
(oin\(S,G,r)-.165 E(pt\) to RPF'\(S,G,r)-.11 E(pt\))-.11 E F0(This e)97
114.6 Q -.165(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G
(nt in the "Not Pruned" state.).275 E(The router sees a Join\(S,G,rpt\)\
 from someone else to RPF'\(S,G,rpt\), which is the correct)97 131.2 Q
(upstream neighbor)97 144.2 Q 5.5(.I)-.605 G 2.75(fw)-5.5 G(e')-2.75 E
(re in "NotPruned" state and the \(S,G,rpt\) o)-.55 E -.165(ve)-.165 G
(rride timer is).165 E(running, then this is because we ha)97 157.2 Q
.33 -.165(ve b)-.22 H(een triggered to send our o).165 E
(wn Join\(S,G,rpt\) to)-.275 E 2.75(RPF'\(S,G,rpt\). Someone)97 170.2 R
(else beat us to it, so there')2.75 E 2.75(sn)-.605 G 2.75(on)-2.75 G
(eed to send our o)-2.75 E(wn Join.)-.275 E
(The action is to cancel the o)97 186.8 Q -.165(ve)-.165 G(rride timer)
.165 E(.)-.605 E F1(See Prune\(S,G,r)72 203.4 Q(pt\) to RPF'\(S,G,r)-.11
E(pt\))-.11 E F0(This e)97 216.4 Q -.165(ve)-.275 G(nt is only rele).165
E -.275(va)-.275 G(nt in the "NotPruned" state.).275 E(The router sees \
a Prune\(S,G,rpt\) from someone else to to RPF'\(S,G,rpt\), which is th\
e)97 233 Q(correct upstream neighbor)97 246 Q 5.5(.I)-.605 G 2.75(fw)
-5.5 G(e')-2.75 E(re in the "NotPruned" state, then we w)-.55 E
(ant to continue to)-.11 E(recei)97 259 Q .33 -.165(ve t)-.275 H(raf)
.165 E(\214c from S destined for G, and that traf)-.275 E
(\214c is being supplied by RPF'\(S,G,rpt\).)-.275 E(Thus we need to o)
97 272 Q -.165(ve)-.165 G(rride the Prune.).165 E
(The action is to set the \(S,G,rpt\) time to the randomized prune-o)97
288.6 Q -.165(ve)-.165 G(rride interv).165 E 2.75(al. Ho)-.275 F(we)
-.275 E -.165(ve)-.275 G 2.75(ri).165 G(f)-2.75 E(the o)97 301.6 Q -.165
(ve)-.165 G
(rride timer is already running, we only set the timer if doing so w)
.165 E(ould set it to a)-.11 E(lo)97 314.6 Q(wer v)-.275 E 2.75
(alue. At)-.275 F(the end of this interv)2.75 E
(al, if no-one else has sent a Join, then we will do so.)-.275 E F1
(See Prune\(S,G\) to RPF'\(S,G,r)72 331.2 Q(pt\))-.11 E F0(This e)97
344.2 Q -.165(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G
(nt in the "NotPruned" state.).275 E
(This transition and action are the same as the abo)97 360.8 Q .33 -.165
(ve t)-.165 H(ransition and action, e).165 E(xcept that the)-.165 E
(Prune does not ha)97 373.8 Q .33 -.165(ve t)-.22 H(he RPT bit set.).165
E(This transition is necessary to be compatible with)5.5 E -.165(ex)97
386.8 S(isting routers that don').165 E 2.75(tm)-.198 G
(aintain separate \(S,G\) and \(S,G,rpt\) state.)-2.75 E F1(The \(S,G,r)
72 403.4 Q(pt\) prune o)-.11 E -.11(ve)-.11 G(rride timer expir).11 E
(es)-.198 E F0(This e)97 416.4 Q -.165(ve)-.275 G(nt is only rele).165 E
-.275(va)-.275 G(nt in the "NotPruned" state.).275 E(When the o)97 433 Q
-.165(ve)-.165 G(rride timer e).165 E
(xpires, we must send a Join\(S,G,rpt\) to RPF'\(S,G,rpt\) to o)-.165 E
-.165(ve)-.165 G(rride).165 E
(the Prune message that caused the timer to be running.)97 446 Q 1.76
-.88(We o)5.5 H(nly send this if RPF'\(S,G,rpt\)).88 E(equals RPF'\(*,G\
\) - if this were not the case, then the Join might be sent to a router\
 that does)97 459 Q(not ha)97 472 Q .33 -.165(ve \()-.22 H
(*,G\) or \(*,*,RP\(G\)\) Join state, and so the beha).165 E(vior w)-.22
E(ould not be well de\214ned.)-.11 E(If)5.5 E
(RPF'\(S,G,rpt\) is not the same as RPF'\(*,G\), then it may stop forw)
97 485 Q(arding S.)-.11 E(Ho)5.5 E(we)-.275 E -.165(ve)-.275 G .88 -.44
(r, i).165 H 2.75(ft).44 G(his)-2.75 E
(happens, then the router will send an AssertCancel\(S,G\), which w)97
498 Q(ould then cause)-.11 E
(RPF'\(S,G,rpt\) to become equal to RPF'\(*,G\) \(see belo)97 511 Q
(w\).)-.275 E F1(RPF'\(S,G,r)72 527.6 Q
(pt\) changes to become equal to RPF'\(*,G\))-.11 E F0(This e)97 540.6 Q
-.165(ve)-.275 G(nt is only rele).165 E -.275(va)-.275 G
(nt in the "NotPruned" state.).275 E(RPF'\(S,G,rpt\) can only be dif)97
557.2 Q
(ferent from RPF'\(*,G\) if an \(S,G\) Assert has happened, which)-.275
E(means that traf)97 570.2 Q(\214c from S is arri)-.275 E
(ving on the SPT)-.275 E 2.75(,a)-.814 G(nd so Prune\(S,G,rpt\) will ha)
-2.75 E .33 -.165(ve b)-.22 H(een sent).165 E(to RPF'\(*,G\).)97 583.2 Q
(When RPF'\(S,G,rpt\) changes to become equal to RPF'\(*,G\), we need t\
o)5.5 E(trigger a Join\(S,G,rpt\) to RPF'\(*,G\) to cause that router t\
o start forw)97 596.2 Q(arding S ag)-.11 E(ain.)-.055 E
(The action is to set the \(S,G,rpt\) o)97 612.8 Q -.165(ve)-.165 G
(rride timer to the randomized prune-o).165 E -.165(ve)-.165 G
(rride interv).165 E(al.)-.275 E(Ho)97 625.8 Q(we)-.275 E -.165(ve)-.275
G 2.75(ri).165 G 2.75(ft)-2.75 G
(he timer is already running, we only set the timer if doing so w)-2.75
E(ould set it to a)-.11 E(lo)97 638.8 Q(wer v)-.275 E 2.75(alue. At)
-.275 F(the end of this interv)2.75 E
(al, if no-one else has sent a Join, then we will do so.)-.275 E F1
(PruneDesir)72 655.4 Q(ed\(S,G,r)-.198 E(pt\)->TR)-.11 E(UE)-.33 E F0
(See macro abo)97 668.4 Q -.165(ve)-.165 G(.).165 E
(The router wishes to recei)97 685 Q .33 -.165(ve t)-.275 H(raf).165 E
(\214c for G, b)-.275 E(ut does not wish to recei)-.22 E .33 -.165(ve t)
-.275 H(raf).165 E(\214c from S)-.275 E(destined for G.)97 698 Q
(This causes the router to transition into the Pruned state.)5.5 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.4.9. [P)2.75 F(age 50])-.165 E EP
%%Page: 51 51
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(If the router w)97 85 Q(as pre)
-.11 E(viously in NotPruned state, then the action is to send a Prune\(\
S,G,rpt\) to)-.275 E 2.75(RPF'\(S,G,rpt\). If)97 98 R(the router w)2.75
E(as pre)-.11 E
(viously in RPTNotJoined\(G\) state, then there is no need)-.275 E(to t\
rigger an action in this state machine because sending a Prune\(S,G,rpt\
\) is handled by the)97 111 Q
(rules for sending the Join\(*,G\) or Join\(*,*,RP\).)97 124 Q/F1 11
/Times-Bold@0 SF(PruneDesir)72 140.6 Q(ed\(S,G,r)-.198 E(pt\)->F)-.11 E
(ALSE)-.99 E F0(See macro abo)97 153.6 Q -.165(ve)-.165 G 5.5(.T).165 G
(his transition is only rele)-5.5 E -.275(va)-.275 G
(nt in the "Pruned" state.).275 E(If the router is in the Pruned\(S,G,r\
pt\) state, and PruneDesired\(S,G,rpt\) changes to F)97 170.2 Q(ALSE,)
-.814 E(this could be because the router no longer has RPTJoinDesired\(\
G\) true, or it no)97 183.2 Q 2.75(ww)-.275 G(ishes to)-2.75 E(recei)97
196.2 Q .33 -.165(ve t)-.275 H(raf).165 E(\214c from S ag)-.275 E 2.75
(ain. If)-.055 F(it is the former)2.75 E 2.75(,t)-.44 G
(hen this transition should not happen, b)-2.75 E(ut)-.22 E
(instead the "RPTJoinDesired\(G\)->F)97 209.2 Q
(ALSE" transition should happen. Thus this transition)-.814 E
(should be interpreted as "PruneDesired\(S,G,rpt\)->F)97 222.2 Q
(ALSE AND)-.814 E(RPTJoinDesired\(G\)==TR)97 235.2 Q(UE")-.44 E
(The action is to send a Join\(S,G,rpt\) to RPF'\(S,G,rpt\).)97 251.8 Q
F1(RPTJ)72 268.4 Q(oinDesir)-.165 E(ed\(G\)->F)-.198 E(ALSE)-.99 E F0
(The router no longer wishes to recei)97 281.4 Q .33 -.165(ve a)-.275 H
.33 -.165(ny t).165 H(raf).165 E(\214c destined for G on the RP T)-.275
E 2.75(ree. This)-.385 F
(causes a transition to the RPTNotJoined\(G\) state.)97 294.4 Q(An)5.5 E
2.75(ya)-.165 G(ctions are handled by the)-2.75 E
(appropriate upstream state machine for \(*,G\) or \(*,*,RP\).)97 307.4
Q F1(inherited_olist\(S,G,r)72 324 Q(pt\) becomes non-NULL)-.11 E F0
(This transition is only rele)97 337 Q -.275(va)-.275 G
(nt in the RPTNotJoined\(G\) state.).275 E(The router has joined the RP\
 tree \(handled by the \(*,G\) or \(*,*,RP\) upstream state machine)97
353.6 Q(as appropriate\), and w)97 366.6 Q(ants to recei)-.11 E .33
-.165(ve t)-.275 H(raf).165 E(\214c from S.)-.275 E
(This does not trigger an)5.5 E 2.75(ye)-.165 G -.165(ve)-3.025 G
(nts in this).165 E(state machine, b)97 379.6 Q
(ut causes a transition to the NotPruned\(S,G,rpt\) state.)-.22 E F1
(4.5.)72 405.6 Q/F2 13/Times-Bold@0 SF(PIM Assert Messages)5.5 E F1 2.75
(4.5.1. \(S,G\))72 431.6 R(Assert Message State Machine)2.75 E F0
(The \(S,G\) Assert state machine for interf)72 448.2 Q(ace I is sho)
-.11 E(wn in Figure 10. There are three states:)-.275 E F1(NoInf)72
464.8 Q 2.75(o\()-.275 G(NI\))-2.75 E F0
(This router has no \(S,G\) assert state on interf)97 477.8 Q(ace I.)
-.11 E F1 2.75(Ia)72 494.4 S 2.75(mA)-2.75 G(ssert W)-2.75 E
(inner \(W\))-.198 E F0(This router has w)97 507.4 Q
(on an \(S,G\) assert on interf)-.11 E(ace I.)-.11 E(It is no)5.5 E 2.75
(wr)-.275 G(esponsible for forw)-2.75 E(arding)-.11 E(traf)97 520.4 Q
(\214c from S destined for G out of interf)-.275 E(ace I.)-.11 E
(Irrespecti)5.5 E .33 -.165(ve o)-.275 H 2.75(fw).165 G
(hether it is the DR for I,)-2.75 E(while a router is the assert winner)
97 533.4 Q 2.75(,i)-.44 G 2.75(ti)-2.75 G 2.75(sa)-2.75 G
(lso responsible for forw)-2.75 E(arding traf)-.11 E(\214c onto I on)
-.275 E(behalf of local hosts on I that ha)97 546.4 Q .33 -.165(ve m)
-.22 H(ade membership requests that speci\214cally refer to S).165 E
(\(and G\).)97 559.4 Q F1 2.75(Ia)72 576 S 2.75(mA)-2.75 G
(ssert Loser \(L\))-2.75 E F0
(This router has lost an \(S,G\) assert on interf)97 589 Q(ace I.)-.11 E
(It must not forw)5.5 E(ard pack)-.11 E(ets from S)-.11 E
(destined for G onto interf)97 602 Q(ace I.)-.11 E
(If it is the DR on I, it is no longer responsible for)5.5 E(forw)97 615
Q(arding traf)-.11 E(\214c onto I to satisfy local hosts with membershi\
p requests that speci\214cally)-.275 E(refer to S and G.)97 628 Q
(In addition there is also a assert timer \(A)72 644.6 Q
(T\) that is used to time out asserts on the assert losers and)-1.221 E
(to resend asserts on the assert winner)72 657.6 Q(.)-.605 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.5.1. [P)2.75 F(age 51])-.165 E EP
%%Page: 52 52
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 23 172 432 586 -330.266 448 72
415.266 PBEGIN
%%BeginDocument: sg-assert.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 23 172 609 620
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 4 4 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 1 -0 -0 1 -217 -2 ] concat
%I 6
538 290
352 272
284 286
243 347
276 451
364 513
6 BSpl
%I 1
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
614 218
285 374
294 624
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
613 219
181 343
283 630
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
617 217
209 263
172 432
273 640
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
615 216
35 223
122 526
268 653
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
330 695
607 940
892 693
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
336 680
605 801
870 676
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 2
344 650
868 650
2 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 1 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
334 633
603 522
873 633
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
897 615
851 405
649 244
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
325 631
514 494
607 259
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
593 250
391 403
315 624
3 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 10 178.5 ] concat
%I
311 661 40 40 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 157.5 518.5 ] concat
%I
[
(No)
(Info)
] Text
End

End %I eop

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
652 202
778 124
686 49
639 186
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
614 181
606 55
506 99
587 193
4 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 165.5 -43 ] concat
%I
311 661 40 40 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 308.5 301.5 ] concat
%I
[
(I am)
(Assert)
(Loser)
] Text
End

End %I eop

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
912 657
1056 649
1030 536
935 624
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
906 655
1002 813
1066 708
943 671
4 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 310.5 174.5 ] concat
%I
311 661 40 40 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 451.5 519 ] concat
%I
[
(I am)
(Assert)
(Winner)
] Text
End

End %I eop

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 532 572 ] concat
%I
[
(Timer Expires)
([Send \(S,G\) Assert])
([Set timer to)
(  assert_time - )
(    override_interval])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 250 483.999 ] concat
%I
[
(CouldAssert\(S,G,I\)->FALSE)
([Send Assert Cancel])
([Delete Assert Info])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 535.5 497.5 ] concat
%I
[
(Receive inferior assert)
(from any neighbor)
([Send \(S,G\) Assert])
([Set timer to)
(  assert_time - )
(    override_interval])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 397 442.5 ] concat
%I
[
(Receive preferred assert)
([Store assert winner])
([Set timer to assert_time])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 355.5 210 ] concat
%I
[
(Receive preferred assert)
([Store new assert winner])
([Set timer to assert_time])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 159.5 211 ] concat
%I
[
(Receive assert from current winner)
([Store assert metric])
([Set timer to assert_time])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 129.5 392.5 ] concat
%I
[
(Timer)
(Expires)
([A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 170 428.5 ] concat
%I
[
(Receive inferior)
(  assert from)
(    current winner)
(      [A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 182.5 374 ] concat
%I
[
(I stops)
(being)
(RPF_if\(s\))
(     [A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 79.0025 338.997 ] concat
%I
[
(AssertTrackingDesired)
(\(S,G,I\)  ->FALSE)
(           [A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 101 297 ] concat
%I
[
(Receive Join\(S,G\) [A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 75 280 ] concat
%I
[
(my metric becomes better )
(than AssertWinnerMetric)
([A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 455 341 ] concat
%I
[
(Actions:)
()
(A1: [Send \(S,G\) Assert])
(       [Set timer to assert_time -)
(            override_interval])
(       [Store self as winner])
()
(A5: [Delete Assert Info])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 264.5 407.002 ] concat
%I
[
(Receive preferred assert )
(with RPT bit clear AND)
(AssertTrackingDesired\(S,G,I\))
(  ==TRUE)
([Store assert winner])
([Set timer to assert_time])
([If I is RPF_interface\(S\))
(  then set SPTbit\(S,G\)])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 248.5 531.001 ] concat
%I
[
(Receive inferior assert with)
(RPTbit clear from any neighbor)
(AND CouldAssert\(S,G,I\)==TRUE)
([A1])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 251 623 ] concat
%I
[
(\(S,G\) data packet arrives on I)
(AND CouldAssert\(S,G,I\)==TRUE)
([A1])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 247 577.5 ] concat
%I
[
(Receive assert with)
(RPT bit set AND )
(CouldAssert\(S,G,I\)==TRUE)
([A1])
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND/F1 11/Times-Bold@0 SF(Figur)166.835 454.266 Q 2.75(e1)-.198 G
(0: P)-2.75 E(er)-.22 E(-interface \(S,G\) Assert State-machine)-.407 E
F0(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.5.1. [P)2.75 F(age 52])-.165 E EP
%%Page: 53 53
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In tab)72 85 Q
(ular form the state machine is:)-.22 E .44 LW 503.992 95.75 72 95.75 DL
/F1 11/Times-Bold@0 SF(In NoInf)240.624 106 Q 2.75(o\()-.275 G
(NI\) State)-2.75 E 503.992 110.75 72 110.75 DL 503.992 112.75 72 112.75
DL(Recei)81.428 123 Q .22 -.11(ve I)-.11 H(nferior).11 E(Assert with)
81.428 136 Q(RPTbit clear and)81.428 149 Q(CouldAssert)81.428 162 Q
(\(S,G,I\))81.428 175 Q(Recei)190.991 123 Q .22 -.11(ve A)-.11 H(ssert)
.11 E(with RPTbit set)190.991 136 Q(and CouldAssert)190.991 149 Q
(\(S,G,I\))190.991 162 Q(Data arri)298.42 123 Q -.11(ve)-.11 G 2.75(sf)
.11 G -.198(ro)-2.75 G(m).198 E 2.75(St)298.42 136 S 2.75(oGo)-2.75 G
2.75(nIa)-2.75 G(nd)-2.75 E(CouldAssert)298.42 149 Q(\(S,G,I\))298.42
162 Q(Recei)410.59 123 Q .22 -.11(ve P)-.11 H -.198(re).11 G(ferr).198 E
(ed)-.198 E(Assert with)410.59 136 Q(RPTbit clear and)410.59 149 Q(AssT)
410.59 162 Q(rDes \(S,G,I\))-.814 E 503.992 179.75 72 179.75 DL 503.992
181.75 72 181.75 DL F0(-> W state)81.428 192 Q(-> W state)63.649 E
(-> W state)61.515 E(-> L state)66.256 E([Actions A1])81.428 205 Q
([Actions A1])51.824 E([Actions A1])49.69 E([Actions A6])54.431 E
503.992 209.75 72 209.75 DL 396.448 112.75 396.448 209.75 DL 284.278
112.75 284.278 209.75 DL 176.849 112.75 176.849 209.75 DL 503.992 95.75
503.992 209.75 DL 72 95.75 72 209.75 DL 503.992 221.75 72 221.75 DL F1
(In I Am Assert W)209.885 232 Q(inner \(W\) State)-.198 E 503.992 236.75
72 236.75 DL 503.992 238.75 72 238.75 DL -.198(Ti)82.924 249 S
(mer Expir).198 E(es)-.198 E(Recei)183.434 249 Q .22 -.11(ve I)-.11 H
(nferior).11 E(Assert)183.434 262 Q(Recei)292.04 249 Q .22 -.11(ve P)
-.11 H -.198(re).11 G(ferr).198 E(ed)-.198 E(Assert)292.04 262 Q
(CouldAssert)408.786 249 Q(\(S,G,I\) \255> F)408.786 262 Q(ALSE)-.99 E
503.992 266.75 72 266.75 DL 503.992 268.75 72 268.75 DL F0(-> W state)
82.924 279 Q(-> W state)54.596 E(-> L state)62.692 E(-> NI state)74.495
E([Actions A3])82.924 292 Q([Actions A3])42.771 E([Actions A2])50.867 E
([Actions A4])59.007 E 503.992 296.75 72 296.75 DL 392.4 238.75 392.4
296.75 DL 275.654 238.75 275.654 296.75 DL 167.048 238.75 167.048 296.75
DL 503.992 221.75 503.992 296.75 DL 72 221.75 72 296.75 DL 503.992
308.75 72 308.75 DL F1(In I Am Assert Loser \(L\) State)216.204 319 Q
503.992 323.75 72 323.75 DL 503.992 325.75 72 325.75 DL(Recei)83.258 336
Q .22 -.11(ve P)-.11 H -.198(re).11 G(ferr).198 E(ed)-.198 E(Assert)
83.258 349 Q(Recei)201.006 336 Q .22 -.11(ve I)-.11 H(nferior).11 E
(Assert fr)201.006 349 Q(om)-.198 E(Curr)201.006 362 Q(ent W)-.198 E
(inner)-.198 E -.198(Ti)311.681 336 S(mer Expir).198 E(es)-.198 E(AssT)
413.193 336 Q(rDes \(S,G,I\))-.814 E(\255> F)413.193 349 Q(ALSE)-.99 E
503.992 366.75 72 366.75 DL 503.992 368.75 72 368.75 DL F0(-> L state)
83.258 379 Q(-> NI state)75.497 E(-> NI state)63.54 E(-> NI state)54.377
E([Actions A2])83.258 392 Q([Actions A5])60.009 E([Actions A5])52.936 E
([Actions A5])43.773 E 503.992 396.75 72 396.75 DL 396.306 325.75
396.306 396.75 DL 294.794 325.75 294.794 396.75 DL 184.119 325.75
184.119 396.75 DL 503.992 308.75 503.992 396.75 DL 72 308.75 72 396.75
DL 503.992 408.75 72 408.75 DL F1(In I Am Assert Loser \(L\) State)
216.204 419 Q 503.992 423.75 72 423.75 DL 503.992 425.75 72 425.75 DL
(my_metric ->)84.789 436 Q(better than)84.789 449 Q(winner')84.789 462 Q
2.75(sm)-.407 G(etric)-2.75 E(RPF interface)196.977 436 Q(stops being I)
196.977 449 Q(Recei)301.014 436 Q .22 -.11(ve J)-.11 H(oin\(S,G\))-.055
E(on interface I)301.014 449 Q(Recei)422.706 436 Q .22 -.11(ve A)-.11 H
(ssert).11 E(fr)422.706 449 Q(om Curr)-.198 E(ent)-.198 E -.198(Wi)
422.706 462 S(nner).198 E 503.992 466.75 72 466.75 DL 503.992 468.75 72
468.75 DL F0(-> NI state)84.789 479 Q(-> NI state)65.053 E(-> NI State)
56.902 E(-> L state)72.72 E([Actions A5])84.789 492 Q([Actions A5])
54.449 E([Actions A5])46.298 E([Actions A2])63.953 E 503.992 496.75 72
496.75 DL 403.522 425.75 403.522 496.75 DL 281.83 425.75 281.83 496.75
DL 177.793 425.75 177.793 496.75 DL 503.992 408.75 503.992 496.75 DL 72
408.75 72 496.75 DL(Note that for reasons of compactness, "AssT)72 527.6
Q(rDes\(S,G,I\)" is used in the state-machine table to)-.385 E
(refer to AssertT)72 540.6 Q(rackingDesired\(S,G,I\).)-.385 E -.77(Te)72
557.2 S(rminology:).77 E 2.75(A")97 570.2 S
(preferred assert" is one with a better metric than the current winner)
-2.75 E(.)-.605 E(An "inferior assert" is one with a w)97 586.8 Q
(orse metric than)-.11 E/F2 11/Courier@0 SF(my_assert_metric\(S,G,I\))
2.75 E F0(.)A(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.5.1. [P)2.75 F(age 53])-.165 E EP
%%Page: 54 54
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(The state machine uses the follo)97 85 Q(wing macros:)-.275 E/F1 11
/Courier@0 SF(CouldAssert\(S,G,I\) =)72 101.6 Q(SPTbit\(S,G\)==TRUE)105
114.6 Q(AND \(RPF_interface\(S\) != I\))105 127.6 Q
(AND \(I in \( \( joins\(*,*,RP\(G\)\) \(+\) joins\(*,G\) \(-\))105
140.6 Q(prunes\(S,G,rpt\) \))72 153.6 Q
(\(+\) \( pim_include\(*,G\) \(-\) pim_exclude\(S,G\) \))184.2 166.6 Q
(\(-\) lost_assert\(*,G\))184.2 179.6 Q
(\(+\) joins\(S,G\) \(+\) pim_include\(S,G\) \) \))184.2 192.6 Q F0
(CouldAssert\(S,G,I\) is true for do)72 209.2 Q(wnstream interf)-.275 E
(aces which w)-.11 E(ould be in the inherited_olist\(S,G\))-.11 E
(if \(S,G\) assert information w)72 222.2 Q(as not tak)-.11 E
(en into account.)-.11 E F1(AssertTrackingDesired\(S,G,I\) =)72 238.8 Q
(\(I in \( \( joins\(*,*,RP\(G\)\) \(+\) joins\(*,G\) \(-\))105 251.8 Q
(prunes\(S,G,rpt\) \))72 264.8 Q
(\(+\) \( pim_include\(*,G\) \(-\) pim_exclude\(S,G\) \))157.8 277.8 Q
(\(-\) lost_assert\(*,G\))157.8 290.8 Q
(\(+\) joins\(S,G\) \(+\) pim_include\(S,G\) \) \))157.8 303.8 Q
(OR \(RPF_interface\(S\)==I AND JoinDesired\(S,G\)==TRUE\))105 316.8 Q
(OR \(RPF_interface\(RP\)==I AND JoinDesired\(*,G\)==TRUE)105 329.8 Q
(AND SPTbit\(S,G\)==FALSE\))131.4 342.8 Q F0(AssertT)72 359.4 Q
(rackingDesired\(S,G,I\) is true on an)-.385 E 2.75(yi)-.165 G(nterf)
-2.75 E(ace in which an \(S,G\) assert might af)-.11 E(fect our)-.275 E
(beha)72 372.4 Q(vior)-.22 E(.)-.605 E
(The \214rst three lines of AssertT)72 389 Q
(rackingDesired account for \(*,G\) join information recei)-.385 E -.165
(ve)-.275 G 2.75(do).165 G 2.75(nI)-2.75 G
(that might cause the router to be interested in asserts on I.)72 402 Q
(The 4th line accounts for \(S,G\) join information recei)72 418.6 Q
-.165(ve)-.275 G 2.75(do).165 G 2.75(nIt)-2.75 G
(hat might cause the router to be)-2.75 E(interested in asserts on I.)72
431.6 Q(The last three lines account for the f)72 448.2 Q
(act that a router must k)-.11 E(eep track of assert information on)-.11
E(upstream interf)72 461.2 Q
(aces in order to send joins and prunes to the proper neighbor)-.11 E(.)
-.605 E/F2 11/Times-Bold@0 SF -.814(Tr)72 487.2 S(ansitions fr).814 E
(om NoInf)-.198 E 2.75(oS)-.275 G(tate)-2.75 E F0
(When in NoInfo state, the follo)72 503.8 Q(wing e)-.275 E -.165(ve)
-.275 G(nts may trigger transitions:).165 E F2(Recei)97 520.4 Q .22 -.11
(ve I)-.11 H(nferior Assert with RPTbit clear).11 E(ed)-.198 E F0
(An assert is recei)122 533.4 Q -.165(ve)-.275 G 2.75(df).165 G
(or \(S,G\) with the RPT bit cleared that is inferior to our o)-2.75 E
(wn)-.275 E(assert metric. The RPT bit cleared indicates that the sende\
r of the assert had \(S,G\))122 546.4 Q(forw)122 559.4 Q
(arding state on this interf)-.11 E 2.75(ace. If)-.11 F
(the assert is inferior to our metric, then we must)2.75 E(also ha)122
572.4 Q .33 -.165(ve \()-.22 H(S,G\) forw).165 E
(arding state as \(S,G\) asserts beat \(*,G\) asserts, and so we should)
-.11 E(be the assert winner)122 585.4 Q 5.5(.W)-.605 G 2.75(et)-6.38 G
(ransition to the "I am Assert W)-2.75 E(inner" state, and perform)-.44
E(Actions A1 \(belo)122 598.4 Q(w\).)-.275 E F2(Recei)97 615 Q .22 -.11
(ve A)-.11 H(ssert with RPTbit set AND CouldAssert\(S,G,I\)==TR).11 E
(UE)-.33 E F0(An assert is recei)122 628 Q -.165(ve)-.275 G 2.75(df).165
G(or \(S,G\) on I with the RPT bit set \(it')-2.75 E 2.75(sa\()-.605 G
(*,G\) assert\).)-2.75 E(CouldAssert\(S,G,I\) is TR)122 641 Q
(UE only if we ha)-.44 E .33 -.165(ve \()-.22 H(S,G\) forw).165 E
(arding state on this interf)-.11 E(ace,)-.11 E
(so we should be the assert winner)122 654 Q 5.5(.W)-.605 G 2.75(et)
-6.38 G(ransition to the "I am Assert W)-2.75 E(inner" state,)-.44 E
(and perform Actions A1 \(belo)122 667 Q(w\).)-.275 E F2
(An \(S,G\) data pack)97 683.6 Q(et arri)-.11 E -.11(ve)-.11 G 2.75(so)
.11 G 2.75(ni)-2.75 G(nterface I, AND CouldAssert\(S,G,I\)==TR)-2.75 E
(UE)-.33 E F0(An \(S,G\) data pack)122 696.6 Q(et arri)-.11 E -.165(ve)
-.275 G 2.75(do).165 G 2.75(na)-2.75 G 2.75(nd)-2.75 G -.275(ow)-2.75 G
(nstream interf).275 E(ace which is in our \(S,G\))-.11 E
(outgoing interf)122 709.6 Q(ace list.)-.11 E 1.76 -.88(We o)5.5 H
(ptimistically assume that we will be the assert winner for).88 E
(this \(S,G\), and so we transition to the "I am Assert W)122 722.6 Q
(inner" state, and perform Actions)-.44 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.5.1. [P)2.75 F(age 54])-.165 E EP
%%Page: 55 55
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(A1 \(belo)122 85 Q
(w\) which will initiate the assert ne)-.275 E(gotiation for \(S,G\).)
-.165 E/F1 11/Times-Bold@0 SF(Recei)97 101.6 Q .22 -.11(ve P)-.11 H
-.198(re).11 G(ferr).198 E(ed Assert with RPT bit clear AND)-.198 E
(AssertT)122 114.6 Q(rackingDesir)-.814 E(ed\(S,G,I\)==TR)-.198 E(UE)
-.33 E F0 -.88(We)122 127.6 S -.55('r).88 G 2.75(ei).55 G
(nterested in \(S,G\) Asserts, either because I is a do)-2.75 E
(wnstream interf)-.275 E(ace for which)-.11 E(we ha)122 140.6 Q .33
-.165(ve \()-.22 H(S,G\) or \(*,G\) forw).165 E
(arding state, or because I is the upstream interf)-.11 E(ace for S)-.11
E(and we ha)122 153.6 Q .33 -.165(ve \()-.22 H(S,G\) forw).165 E
(arding state.)-.11 E(The recei)5.5 E -.165(ve)-.275 G 2.75(da).165 G
(ssert that has a better metric than)-2.75 E(our o)122 166.6 Q
(wn, so we do not win the Assert.)-.275 E 1.76 -.88(We t)5.5 H
(ransition to "I am Assert Loser" and).88 E(perform actions A2 \(belo)
122 179.6 Q(w\).)-.275 E F1 -.814(Tr)72 205.6 S(ansitions fr).814 E
(om W)-.198 E(inner State)-.198 E F0(When in "I am Assert W)72 222.2 Q
(inner" state, the follo)-.44 E(wing e)-.275 E -.165(ve)-.275 G
(nts trigger transitions:).165 E F1 -.198(Ti)97 238.8 S(mer Expir).198 E
(es)-.198 E F0(The \(S,G\) assert timer e)122 251.8 Q 2.75(xpires. As)
-.165 F(we')2.75 E(re in the W)-.55 E
(inner state, then we must still ha)-.44 E -.165(ve)-.22 G(\(S,G\) forw)
122 264.8 Q(arding state that is acti)-.11 E -.165(ve)-.275 G
(ly being k).165 E(ept ali)-.11 E -.165(ve)-.275 G 5.5(.W).165 G 2.75
(er)-6.38 G(e-send the \(S,G\) Assert)-2.75 E
(and restart the timer \(Action A3 belo)122 277.8 Q 2.75(w\). Note)-.275
F(that the assert winner')2.75 E 2.75(st)-.605 G(imer is)-2.75 E
(engineered to e)122 290.8 Q
(xpire shortly before timers on assert losers; this pre)-.165 E -.165
(ve)-.275 G(nts unnecessary).165 E(thrashing of the forw)122 303.8 Q
(arder and periodic \215ooding of duplicate pack)-.11 E(ets.)-.11 E F1
(Recei)97 320.4 Q .22 -.11(ve I)-.11 H(nferior Assert).11 E F0 1.76 -.88
(We r)122 333.4 T(ecei).88 E .33 -.165(ve a)-.275 H 2.75(n\().165 G
(S,G\) assert or \(*,G\) assert mentioning S that has a w)-2.75 E
(orse metric than)-.11 E(our o)122 346.4 Q 2.75(wn. Whoe)-.275 F -.165
(ve)-.275 G 2.75(rs).165 G(ent the assert is in error)-2.75 E 2.75(,a)
-.44 G(nd so we re-send an \(S,G\) Assert, and)-2.75 E
(restart the timer \(Action A3 belo)122 359.4 Q(w\).)-.275 E F1(Recei)97
376 Q .22 -.11(ve P)-.11 H -.198(re).11 G(ferr).198 E(ed Assert)-.198 E
F0 1.76 -.88(We r)122 389 T(ecei).88 E .33 -.165(ve a)-.275 H 2.75(n\()
.165 G(S,G\) assert that has a better metric than our o)-2.75 E 2.75
(wn. W)-.275 F 2.75(et)-.88 G(ransition to "I)-2.75 E
(am Assert Loser" state and perform actions A2 \(belo)122 402 Q 2.75
(w\). Note)-.275 F(that this may af)2.75 E(fect the)-.275 E -.275(va)122
415 S(lue of JoinDesired\(S,G\) which could cause transitions in the up\
stream \(S,G\) state).275 E(machine.)122 428 Q F1
(CouldAssert\(S,G,I\) -> F)97 444.6 Q(ALSE)-.99 E F0(Our \(S,G\) forw)
122 457.6 Q(arding state or RPF interf)-.11 E(ace changed so as to mak)
-.11 E(e)-.11 E(CouldAssert\(S,G,I\) become f)122 470.6 Q 2.75(alse. W)
-.11 F 2.75(ec)-.88 G(an no longer perform the actions of the assert)
-2.75 E(winner)122 483.6 Q 2.75(,a)-.44 G
(nd so we transition to NoInfo state and perform actions A4 \(belo)-2.75
E 2.75(w\). This)-.275 F
(includes sending a "cancelling assert" with an in\214nite metric.)122
496.6 Q F1 -.814(Tr)72 522.6 S(ansitions fr).814 E(om Loser State)-.198
E F0(When in "I am Assert Loser" state, the follo)72 539.2 Q
(wing transitions can occur:)-.275 E F1(Recei)97 555.8 Q .22 -.11(ve P)
-.11 H -.198(re).11 G(ferr).198 E(ed Assert)-.198 E F0 1.76 -.88(We r)
122 568.8 T(ecei).88 E .33 -.165(ve a)-.275 H 2.75(na).165 G
(ssert that is better than that of the current assert winner)-2.75 E 5.5
(.W)-.605 G 2.75(es)-6.38 G(tay in)-2.75 E
(Loser state, and perform actions A2 belo)122 581.8 Q -.715(w.)-.275 G
F1(Recei)97 598.4 Q .22 -.11(ve I)-.11 H(nferior Assert fr).11 E
(om Curr)-.198 E(ent W)-.198 E(inner)-.198 E F0 1.76 -.88(We r)122 611.4
T(ecei).88 E .33 -.165(ve a)-.275 H 2.75(na).165 G
(ssert from the current assert winner that is w)-2.75 E(orse than our o)
-.11 E(wn metric)-.275 E(for this group \(typically the winner')122
624.4 Q 2.75(sm)-.605 G(etric became w)-2.75 E 2.75(orse\). W)-.11 F
2.75(et)-.88 G(ransition to NoInfo)-2.75 E
(state, deleting the \(S,G\) assert information and allo)122 637.4 Q
(wing the normal PIM Join/Prune)-.275 E(mechanisms to operate.)122 650.4
Q(Usually we will e)5.5 E -.165(ve)-.275 G
(ntually re-assert and win when data).165 E(pack)122 663.4 Q
(ets from S ha)-.11 E .33 -.165(ve s)-.22 H(tarted \215o).165 E(wing ag)
-.275 E(ain.)-.055 E F1 -.198(Ti)97 680 S(mer Expir).198 E(es)-.198 E F0
(The \(S,G\) assert timer e)122 693 Q 2.75(xpires. W)-.165 F 2.75(et)
-.88 G(ransition to NoInfo state, deleting the \(S,G\) assert)-2.75 E
(information.)122 706 Q(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)
-.385 E 160.971(elas Section)-.165 F 2.75(4.5.1. [P)2.75 F(age 55])-.165
E EP
%%Page: 56 56
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(AssertT)
97 85 Q(rackingDesir)-.814 E(ed\(S,G,I\)->F)-.198 E(ALSE)-.99 E F0
(AssertT)122 98 Q(rackingDesired\(S,G,I\) becomes F)-.385 E 2.75
(ALSE. Our)-.814 F(forw)2.75 E(arding state has changed so)-.11 E
(that \(S,G\) Asserts on interf)122 111 Q
(ace I are no longer of interest to us.)-.11 E 1.76 -.88(We t)5.5 H
(ransition to the).88 E
(NoInfo state, deleting the \(S,G\) assert information.)122 124 Q F1
(My metric becomes better than the assert winner')97 140.6 Q 2.75(sm)
-.407 G(etric)-2.75 E F0
(my_assert_metric\(S,G,I\) has changed so that no)122 153.6 Q 2.75(wm)
-.275 G 2.75(ya)-2.75 G(ssert metric for \(S,G\) is better)-2.75 E
(than the metric we ha)122 166.6 Q .33 -.165(ve s)-.22 H
(tored for current assert winner).165 E 5.5(.T)-.605 G
(his might happen the)-5.5 E(underlying routing metric changes, or when\
 when CouldAssert\(S,G,I\) becomes true;)122 179.6 Q(for e)122 192.6 Q
(xample, when SPTbit\(S,G\) becomes true.)-.165 E 1.76 -.88(We t)5.5 H
(ransition to NoInfo state, delete).88 E
(this \(S,G\) assert state, and allo)122 205.6 Q 2.75(wt)-.275 G
(he normal PIM Join/Prune mechanisms to operate.)-2.75 E
(Usually we will e)122 218.6 Q -.165(ve)-.275 G
(ntually re-assert and win when data pack).165 E(ets from S ha)-.11 E
.33 -.165(ve s)-.22 H(tarted).165 E/F2 10/Symbol SF<ef>555 230.6 Q<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M F0<8d6f>122 231.6 Q
(wing ag)-.275 E(ain.)-.055 E F1(RPF interface changed away fr)97 248.2
Q(om interface I)-.198 E F0(Interf)122 261.2 Q
(ace I used to be the RPF interf)-.11 E(ace for S, and no)-.11 E 2.75
(wi)-.275 G 2.75(ti)-2.75 G 2.75(sn)-2.75 G 2.75(ot. W)-2.75 F 2.75(et)
-.88 G(ransition to)-2.75 E
(NoInfo state, delete this \(S,G\) assert state.)122 274.2 Q F1(Recei)97
290.8 Q .22 -.11(ve J)-.11 H(oin\(S,G\))-.055 E F0 1.76 -.88(We r)122
303.8 T(ecei).88 E .33 -.165(ve a J)-.275 H
(oin\(S,G\) directed to my IP address in interf).165 E(ace I.)-.11 E
(The action is to)5.5 E(transition to NoInfo state, and delete this \(S\
,G\) assert state, and allo)122 316.8 Q 2.75(wt)-.275 G(he normal PIM)
-2.75 E(Join/Prune mechanisms to operate.)122 329.8 Q(If whoe)5.5 E
-.165(ve)-.275 G 2.75(rs).165 G(ent the Join w)-2.75 E(as in error)-.11
E 2.75(,t)-.44 G(hen the)-2.75 E(normal assert mechanism will e)122
342.8 Q -.165(ve)-.275 G
(ntually re-apply and we will lose the assert ag).165 E(ain.)-.055 E(Ho)
122 355.8 Q(we)-.275 E -.165(ve)-.275 G 2.75(rw).165 G(hoe)-2.75 E -.165
(ve)-.275 G 2.75(rs).165 G(ent the assert may kno)-2.75 E 2.75(wt)-.275
G(hat the pre)-2.75 E(vious assert winner has died,)-.275 E
(and so we may end up being the ne)122 368.8 Q 2.75(wf)-.275 G(orw)-2.75
E(arder)-.11 E(.)-.605 E F1(\(S,G\) Assert State-machine Actions)72
394.8 Q F0 5.75(A1: Send)97 411.4 R(Assert\(S,G\))2.75 E
(Set timer to \(Assert_T)122 424.4 Q(ime - Assert_Ov)-.385 E
(erride_Interv)-.165 E(al\))-.275 E(Store self as AssertW)122 437.4 Q
(inner\(S,G,I\))-.44 E(Store spt_assert_metric\(S,I\) as AssertW)122
450.4 Q(innerMetric\(S,G,I\))-.44 E 5.75(A2: Store)97 467 R(ne)2.75 E
2.75(wa)-.275 G(ssert winner as AssertW)-2.75 E
(inner\(S,G,I\) and assert winner metric as)-.44 E(AssertW)122 480 Q
(innerMetric\(S,G,I\).)-.44 E(Set timer to Assert_T)122 493 Q(ime)-.385
E 5.75(A3: Send)97 509.6 R(Assert\(S,G\))2.75 E(Set timer to \(Assert_T)
122 522.6 Q(ime - Assert_Ov)-.385 E(erride_Interv)-.165 E(al\))-.275 E
5.75(A4: Send)97 539.2 R(AssertCancel\(S,G\))2.75 E
(Delete assert info \(AssertW)122 552.2 Q(inner\(S,G,I\) and AssertW)
-.44 E(innerMetric\(S,G,I\) assume)-.44 E(def)122 565.2 Q(ault v)-.11 E
(alues\).)-.275 E 5.75(A5: Delete)97 581.8 R(assert info \(AssertW)2.75
E(inner\(S,G,I\) and AssertW)-.44 E(innerMetric\(S,G,I\) assume)-.44 E
(def)122 594.8 Q(ault v)-.11 E(alues\).)-.275 E 5.75(A6: Store)97 611.4
R(ne)2.75 E 2.75(wa)-.275 G(ssert winner as AssertW)-2.75 E
(inner\(S,G,I\) and assert winner metric as)-.44 E(AssertW)122 624.4 Q
(innerMetric\(S,G,I\).)-.44 E(Set timer to Assert_T)122 637.4 Q(ime)
-.385 E(If I is RPF_interf)122 650.4 Q(ace\(S\) Set SPTbit\(S,G\) to TR)
-.11 E(UE.)-.44 E F1 2.75(4.5.2. \(*,G\))72 676.4 R
(Assert Message State Machine)2.75 E F0
(The \(*,G\) Assert state-machine for interf)72 693 Q(ace I is sho)-.11
E(wn in Figure 11. There are three states:)-.275 E F1(NoInf)72 709.6 Q
2.75(o\()-.275 G(NI\))-2.75 E F0
(This router has no \(*,G\) assert state on interf)97 722.6 Q(ace I.)
-.11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.5.2. [P)2.75 F(age 56])-.165 E EP
%%Page: 57 57
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF 2.75(Ia)
72 85 S 2.75(mA)-2.75 G(ssert W)-2.75 E(inner \(W\))-.198 E F0
(This router has w)97 98 Q(on an \(*,G\) assert on interf)-.11 E(ace I.)
-.11 E(It is no)5.5 E 2.75(wr)-.275 G(esponsible for forw)-2.75 E
(arding)-.11 E(traf)97 111 Q(\214c destined for G onto interf)-.275 E
(ace I with the e)-.11 E(xception of traf)-.165 E
(\214c for which it has \(S,G\) "I)-.275 E(am Assert Loser" state.)97
124 Q(Irrespecti)5.5 E .33 -.165(ve o)-.275 H 2.75(fw).165 G
(hether it is the DR for I, it is also responsible for)-2.75 E
(handling the membership requests for G from local hosts on I.)97 137 Q
F1 2.75(Ia)72 153.6 S 2.75(mA)-2.75 G(ssert Loser \(L\))-2.75 E F0
(This router has lost an \(*,G\) assert on interf)97 166.6 Q(ace I.)-.11
E(It must not forw)5.5 E(ard pack)-.11 E(ets for G onto)-.11 E(interf)97
179.6 Q(ace I with the e)-.11 E(xception of traf)-.165 E
(\214c from sources for which is has \(S,G\) "I am Assert)-.275 E -.44
(Wi)97 192.6 S(nner" state.).44 E(If it is the DR, it is no longer resp\
onsible for handling the membership)5.5 E
(requests for group G from local hosts on I.)97 205.6 Q
(In addition there is also an assert timer \(A)72 222.2 Q
(T\) that is used to time out asserts on the assert losers)-1.221 E
(and to resend asserts on the assert winner)72 235.2 Q(.)-.605 E(It is \
important to note that no transition occurs in the \(*,G\) state machin\
e as a result of recei)72 251.8 Q(ving)-.275 E
(an assert message if the \(S,G\) assert state machine for the rele)72
264.8 Q -.275(va)-.275 G(nt S and G is not in the "NoInfo").275 E
(state.)72 277.8 Q 27 162 432 582 -294.68 397 72 591.48 PBEGIN
%%BeginDocument: starg-assert.ps
%%Creator: idraw
%%DocumentFonts: Helvetica
%%Pages: 1
%%BoundingBox: 27 162 609 559
%%EndComments

%%BeginIdrawPrologue
/arrowhead {
0 begin
transform originalCTM itransform
/taily exch def
/tailx exch def
transform originalCTM itransform
/tipy exch def
/tipx exch def
/dy tipy taily sub def
/dx tipx tailx sub def
/angle dx 0 ne dy 0 ne or { dy dx atan } { 90 } ifelse def
gsave
originalCTM setmatrix
tipx tipy translate
angle rotate
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
patternNone not {
originalCTM setmatrix
/padtip arrowHeight 2 exp 0.25 arrowWidth 2 exp mul add sqrt brushWidth mul
arrowWidth div def
/padtail brushWidth 2 div def
tipx tipy translate
angle rotate
padtip 0 translate
arrowHeight padtip add padtail add arrowHeight div dup scale
arrowheadpath
ifill
} if
brushNone not {
originalCTM setmatrix
tipx tipy translate
angle rotate
arrowheadpath
istroke
} if
grestore
end
} dup 0 9 dict put def

/arrowheadpath {
newpath
arrowHeight neg arrowWidth 2 div moveto
0 0 lineto
arrowHeight neg arrowWidth 2 div neg lineto
} def

/leftarrow {
0 begin
y exch get /taily exch def
x exch get /tailx exch def
y exch get /tipy exch def
x exch get /tipx exch def
brushLeftArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

/rightarrow {
0 begin
y exch get /tipy exch def
x exch get /tipx exch def
y exch get /taily exch def
x exch get /tailx exch def
brushRightArrow { tipx tipy tailx taily arrowhead } if
end
} dup 0 4 dict put def

%%EndIdrawPrologue

/arrowHeight 8 def
/arrowWidth 4 def

/IdrawDict 51 dict def
IdrawDict begin

/reencodeISO {
dup dup findfont dup length dict begin
{ 1 index /FID ne { def }{ pop pop } ifelse } forall
/Encoding ISOLatin1Encoding def
currentdict end definefont
} def

/ISOLatin1Encoding [
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/space/exclam/quotedbl/numbersign/dollar/percent/ampersand/quoteright
/parenleft/parenright/asterisk/plus/comma/minus/period/slash
/zero/one/two/three/four/five/six/seven/eight/nine/colon/semicolon
/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N
/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright
/asciicircum/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m
/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/dotlessi/grave/acute/circumflex/tilde/macron/breve
/dotaccent/dieresis/.notdef/ring/cedilla/.notdef/hungarumlaut
/ogonek/caron/space/exclamdown/cent/sterling/currency/yen/brokenbar
/section/dieresis/copyright/ordfeminine/guillemotleft/logicalnot
/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla
/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute
/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave
/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex
/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis
/yacute/thorn/ydieresis
] def
/Helvetica reencodeISO def

/none null def
/numGraphicParameters 17 def
/stringLimit 65535 def

/Begin {
save
numGraphicParameters dict begin
} def

/End {
end
restore
} def

/SetB {
dup type /nulltype eq {
pop
false /brushRightArrow idef
false /brushLeftArrow idef
true /brushNone idef
} {
/brushDashOffset idef
/brushDashArray idef
0 ne /brushRightArrow idef
0 ne /brushLeftArrow idef
/brushWidth idef
false /brushNone idef
} ifelse
} def

/SetCFg {
/fgblue idef
/fggreen idef
/fgred idef
} def

/SetCBg {
/bgblue idef
/bggreen idef
/bgred idef
} def

/SetF {
/printSize idef
/printFont idef
} def

/SetP {
dup type /nulltype eq {
pop true /patternNone idef
} {
dup -1 eq {
/patternGrayLevel idef
/patternString idef
} {
/patternGrayLevel idef
} ifelse
false /patternNone idef
} ifelse
} def

/BSpl {
0 begin
storexyn
newpath
n 1 gt {
0 0 0 0 0 0 1 1 true subspline
n 2 gt {
0 0 0 0 1 1 2 2 false subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 2 copy false subspline
} if
n 2 sub dup n 1 sub dup 2 copy 2 copy false subspline
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Circ {
newpath
0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
} def

/CBSpl {
0 begin
dup 2 gt {
storexyn
newpath
n 1 sub dup 0 0 1 1 2 2 true subspline
1 1 n 3 sub {
/i exch def
i 1 sub dup i dup i 1 add dup i 2 add dup false subspline
} for
n 3 sub dup n 2 sub dup n 1 sub dup 0 0 false subspline
n 2 sub dup n 1 sub dup 0 0 1 1 false subspline
patternNone not { ifill } if
brushNone not { istroke } if
} {
Poly
} ifelse
end
} dup 0 4 dict put def

/Elli {
0 begin
newpath
4 2 roll
translate
scale
0 0 1 0 360 arc
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 1 dict put def

/Line {
0 begin
2 storexyn
newpath
x 0 get y 0 get moveto
x 1 get y 1 get lineto
brushNone not { istroke } if
0 0 1 1 leftarrow
0 0 1 1 rightarrow
end
} dup 0 4 dict put def

/MLine {
0 begin
storexyn
newpath
n 1 gt {
x 0 get y 0 get moveto
1 1 n 1 sub {
/i exch def
x i get y i get lineto
} for
patternNone not brushLeftArrow not brushRightArrow not and and { ifill } if
brushNone not { istroke } if
0 0 1 1 leftarrow
n 2 sub dup n 1 sub dup rightarrow
} if
end
} dup 0 4 dict put def

/Poly {
3 1 roll
newpath
moveto
-1 add
{ lineto } repeat
closepath
patternNone not { ifill } if
brushNone not { istroke } if
} def

/Rect {
0 begin
/t exch def
/r exch def
/b exch def
/l exch def
newpath
l b moveto
l t lineto
r t lineto
r b lineto
closepath
patternNone not { ifill } if
brushNone not { istroke } if
end
} dup 0 4 dict put def

/Text {
ishow
} def

/idef {
dup where { pop pop pop } { exch def } ifelse
} def

/ifill {
0 begin
gsave
patternGrayLevel -1 ne {
fgred bgred fgred sub patternGrayLevel mul add
fggreen bggreen fggreen sub patternGrayLevel mul add
fgblue bgblue fgblue sub patternGrayLevel mul add setrgbcolor
eofill
} {
eoclip
originalCTM setmatrix
pathbbox /t exch def /r exch def /b exch def /l exch def
/w r l sub ceiling cvi def
/h t b sub ceiling cvi def
/imageByteWidth w 8 div ceiling cvi def
/imageHeight h def
bgred bggreen bgblue setrgbcolor
eofill
fgred fggreen fgblue setrgbcolor
w 0 gt h 0 gt and {
l w add b translate w neg h scale
w h true [w 0 0 h neg 0 h] { patternproc } imagemask
} if
} ifelse
grestore
end
} dup 0 8 dict put def

/istroke {
gsave
brushDashOffset -1 eq {
[] 0 setdash
1 setgray
} {
brushDashArray brushDashOffset setdash
fgred fggreen fgblue setrgbcolor
} ifelse
brushWidth setlinewidth
originalCTM setmatrix
stroke
grestore
} def

/ishow {
0 begin
gsave
fgred fggreen fgblue setrgbcolor
/fontDict printFont printSize scalefont dup setfont def
/descender fontDict begin 0 [FontBBox] 1 get FontMatrix end
transform exch pop def
/vertoffset 1 printSize sub descender sub def {
0 vertoffset moveto show
/vertoffset vertoffset printSize sub def
} forall
grestore
end
} dup 0 3 dict put def
/patternproc {
0 begin
/patternByteLength patternString length def
/patternHeight patternByteLength 8 mul sqrt cvi def
/patternWidth patternHeight def
/patternByteWidth patternWidth 8 idiv def
/imageByteMaxLength imageByteWidth imageHeight mul
stringLimit patternByteWidth sub min def
/imageMaxHeight imageByteMaxLength imageByteWidth idiv patternHeight idiv
patternHeight mul patternHeight max def
/imageHeight imageHeight imageMaxHeight sub store
/imageString imageByteWidth imageMaxHeight mul patternByteWidth add string def
0 1 imageMaxHeight 1 sub {
/y exch def
/patternRow y patternByteWidth mul patternByteLength mod def
/patternRowString patternString patternRow patternByteWidth getinterval def
/imageRow y imageByteWidth mul def
0 patternByteWidth imageByteWidth 1 sub {
/x exch def
imageString imageRow x add patternRowString putinterval
} for
} for
imageString
end
} dup 0 12 dict put def

/min {
dup 3 2 roll dup 4 3 roll lt { exch } if pop
} def

/max {
dup 3 2 roll dup 4 3 roll gt { exch } if pop
} def

/midpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 x1 add 2 div
y0 y1 add 2 div
end
} dup 0 4 dict put def

/thirdpoint {
0 begin
/y1 exch def
/x1 exch def
/y0 exch def
/x0 exch def
x0 2 mul x1 add 3 div
y0 2 mul y1 add 3 div
end
} dup 0 4 dict put def

/subspline {
0 begin
/movetoNeeded exch def
y exch get /y3 exch def
x exch get /x3 exch def
y exch get /y2 exch def
x exch get /x2 exch def
y exch get /y1 exch def
x exch get /x1 exch def
y exch get /y0 exch def
x exch get /x0 exch def
x1 y1 x2 y2 thirdpoint
/p1y exch def
/p1x exch def
x2 y2 x1 y1 thirdpoint
/p2y exch def
/p2x exch def
x1 y1 x0 y0 thirdpoint
p1x p1y midpoint
/p0y exch def
/p0x exch def
x2 y2 x3 y3 thirdpoint
p2x p2y midpoint
/p3y exch def
/p3x exch def
movetoNeeded { p0x p0y moveto } if
p1x p1y p2x p2y p3x p3y curveto
end
} dup 0 17 dict put def

/storexyn {
/n exch def
/y n array def
/x n array def
n 1 sub -1 0 {
/i exch def
y i 3 2 roll put
x i 3 2 roll put
} for
} def

/SSten {
fgred fggreen fgblue setrgbcolor
dup true exch 1 0 0 -1 0 6 -1 roll matrix astore
} def

/FSten {
dup 3 -1 roll dup 4 1 roll exch
newpath
0 0 moveto
dup 0 exch lineto
exch dup 3 1 roll exch lineto
0 lineto
closepath
bgred bggreen bgblue setrgbcolor
eofill
SSten
} def

/Rast {
exch dup 3 1 roll 1 0 0 -1 0 6 -1 roll matrix astore
} def


%I Idraw 10 Grid 4 4 


Begin
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t
[ 0.956649 0 0 0.956649 0 0 ] concat
/originalCTM matrix currentmatrix def

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 1 -0 -0 1 -217 -2 ] concat
%I 6
539 289
358 275
293 290
250 316
255 437
362 511
6 BSpl
%I 1
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
614 218
285 374
294 624
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
613 219
181 343
283 630
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
617 217
209 263
172 432
273 640
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
615 216
35 223
122 526
268 653
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
336 680
605 801
870 676
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 2
344 650
868 650
2 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 1 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
334 633
603 522
873 633
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
897 615
851 405
649 244
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
325 631
514 494
607 259
3 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 3
593 250
391 403
315 624
3 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 10 178.5 ] concat
%I
311 661 40 40 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 157.5 518.5 ] concat
%I
[
(No)
(Info)
] Text
End

End %I eop

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
652 202
778 124
686 49
639 186
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
614 181
606 55
506 99
587 193
4 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 165.5 -43 ] concat
%I
311 661 40 40 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 308.5 301.5 ] concat
%I
[
(I am)
(Assert)
(Loser)
] Text
End

End %I eop

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
912 657
1056 649
1030 536
935 624
4 BSpl
%I 2
End

Begin %I BSpl
%I b 65535
0 0 1 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg Black
0 0 0 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 12.5 177.5 ] concat
%I 4
906 655
1002 813
1066 708
943 671
4 BSpl
%I 2
End

Begin %I Pict
%I b u
%I cfg u
%I cbg u
%I f u
%I p u
%I t u

Begin %I Elli
%I b 65535
0 0 0 [] 0 SetB
%I cfg Black
0 0 0 SetCFg
%I cbg White
1 1 1 SetCBg
%I p
1 SetP
%I t
[ 0.5 -0 -0 0.5 310.5 174.5 ] concat
%I
311 661 40 40 Elli
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 451.5 519 ] concat
%I
[
(I am)
(Assert)
(Winner)
] Text
End

End %I eop

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 397 442.5 ] concat
%I
[
(Receive preferred assert)
(with RPT bit set)
([Store assert winner])
([Set timer to assert_time])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 249.501 533.982 ] concat
%I
[
(Receive inferior assert with)
(RPT bit set AND )
(CouldAssert\(*,G,I\)==TRUE)
([A1])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 243.997 574.98 ] concat
%I
[
(\(S,G\) data packet arrives on I)
(AND CouldAssert\(*,G,I\)==TRUE)
([A1])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 532 572 ] concat
%I
[
(Timer Expires)
([Send \(*,G\) Assert])
([Set timer to)
(  assert_time - )
(    override_interval])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 535.5 497.5 ] concat
%I
[
(Receive inferior assert)
(from any neighbor)
([Send \(*,G\) Assert])
([Set timer to)
(  assert_time - )
(    override_interval])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 355.5 210 ] concat
%I
[
(Receive preferred assert)
(with RPT bit set)
([Store new assert winner])
([Set timer to assert_time])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 159.5 211 ] concat
%I
[
(Receive assert from current winner)
(with RPT bit set)
([Store assert metric])
([Set timer to assert_time])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 250 487 ] concat
%I
[
(CouldAssert\(*,G,I\)->FALSE)
([Send \(*,G\) Assert Cancel])
([Delete Assert Info])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 265.5 402 ] concat
%I
[
(Receive preferred assert )
(with RPT bit set AND)
(AssertTrackingDesired\(*,G,I\))
(  ==TRUE)
([Store assert winner])
([Set timer to assert_time])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 170 432.502 ] concat
%I
[
(Receive inferior)
(  assert from)
(    current winner)
(      [A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 124.498 413.509 ] concat
%I
[
(Timer)
(Expires)
([A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 156.991 381.003 ] concat
%I
[
(I stops being)
(RPF_if\(RP\(G\)\))
(     [A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 73 350.001 ] concat
%I
[
(AssertTrackingDesired)
(\(*,G\) ->FALSE)
(           [A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 156.034 278.999 ] concat
%I
[
(my metric becomes better )
(than AssertWinnerMetric)
([A5])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 455 341 ] concat
%I
[
(Actions:)
()
(A1: [Send \(*,G\) Assert])
(       [Set timer to assert_time -)
(            override_interval])
(       [Store self as winner])
()
(A5: [Delete Assert Info])
] Text
End

Begin %I Text
%I cfg Black
0 0 0 SetCFg
%I f -adobe-helvetica-medium-r-normal--10-100-75-75-p-56-iso8859-1
Helvetica 10 SetF
%I t
[ 1 0 0 1 72.9922 311.003 ] concat
%I
[
(Receive Join\(*,G\))
(or Join\(*,*,RP\(G\)\)  [A5])
] Text
End

End %I eop

showpage


end
%%EndDocument
end PEND F1(Figur)199.048 630.48 Q 2.75(e1)-.198 G
(1: \(*,G\) Assert State-machine)-2.75 E F0(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.5.2. [P)2.75 F(age 57])-.165 E EP
%%Page: 58 58
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In tab)72 85 Q
(ular form the state machine is:)-.22 E .44 LW 503.994 95.75 72 95.75 DL
/F1 11/Times-Bold@0 SF(In NoInf)240.625 106 Q 2.75(o\()-.275 G
(NI\) State)-2.75 E 503.994 110.75 72 110.75 DL 503.994 112.75 72 112.75
DL(Recei)86.039 123 Q .22 -.11(ve I)-.11 H(nferior).11 E
(Assert with RPTbit set)86.039 136 Q(and)86.039 149 Q
(CouldAssert\(*,G,I\))86.039 162 Q(Data arri)234.779 123 Q -.11(ve)-.11
G 2.75(sf).11 G(or G and)-3.025 E(CouldAssert \(*,G,I\))234.779 136 Q
(Recei)383.332 123 Q .22 -.11(ve P)-.11 H -.198(re).11 G(ferr).198 E(ed)
-.198 E(Assert with RPTbit set)383.332 136 Q(and AssT)383.332 149 Q
(rDes \(*,G,I\))-.814 E 503.994 166.75 72 166.75 DL 503.994 168.75 72
168.75 DL F0(-> W)86.039 179 Q(inner state)-.44 E(-> W)80.661 E
(inner state)-.44 E(-> Loser state)80.474 E([Actions A1])86.039 192 Q
([Actions A1])91.001 E([Actions A2])90.814 E 503.994 196.75 72 196.75 DL
362.273 112.75 362.273 196.75 DL 213.72 112.75 213.72 196.75 DL 503.994
95.75 503.994 196.75 DL 72 95.75 72 196.75 DL 503.992 208.75 72 208.75
DL F1(In I Am Assert W)209.885 219 Q(inner \(W\) State)-.198 E 503.992
223.75 72 223.75 DL 503.992 225.75 72 225.75 DL -.198(Ti)82.98 236 S
(mer Expir).198 E(es)-.198 E(Recei)183.658 236 Q .22 -.11(ve I)-.11 H
(nferior).11 E(Assert)183.658 249 Q(Recei)292.432 236 Q .22 -.11(ve P)
-.11 H -.198(re).11 G(ferr).198 E(ed)-.198 E(Assert)292.432 249 Q
(CouldAssert)409.346 236 Q(\(*,G,I\) \255> F)409.346 249 Q(ALSE)-.99 E
503.992 253.75 72 253.75 DL 503.992 255.75 72 255.75 DL F0(-> W state)
82.98 266 Q(-> W state)54.764 E(-> L state)62.86 E(-> NI state)74.663 E
([Actions A3])82.98 279 Q([Actions A3])42.939 E([Actions A2])51.035 E
([Actions A4])59.175 E 503.992 283.75 72 283.75 DL 392.876 225.75
392.876 283.75 DL 275.962 225.75 275.962 283.75 DL 167.188 225.75
167.188 283.75 DL 503.992 208.75 503.992 283.75 DL 72 208.75 72 283.75
DL 503.992 295.75 72 295.75 DL F1(In I Am Assert Loser \(L\) State)
216.204 306 Q 503.992 310.75 72 310.75 DL 503.992 312.75 72 312.75 DL
(Recei)83.314 323 Q .22 -.11(ve P)-.11 H -.198(re).11 G(ferr).198 E(ed)
-.198 E(Assert)83.314 336 Q(Recei)201.23 323 Q .22 -.11(ve I)-.11 H
(nferior).11 E(Assert fr)201.23 336 Q(om)-.198 E(Curr)201.23 349 Q
(ent W)-.198 E(inner)-.198 E -.198(Ti)312.073 323 S(mer Expir).198 E(es)
-.198 E(AssT)413.753 323 Q(rDes \(*,G,I\))-.814 E(\255> F)413.753 336 Q
(ALSE)-.99 E 503.992 353.75 72 353.75 DL 503.992 355.75 72 355.75 DL F0
(-> L state)83.314 366 Q(-> NI state)75.665 E(-> NI state)63.708 E
(-> NI state)54.545 E([Actions A2])83.314 379 Q([Actions A5])60.177 E
([Actions A5])53.104 E([Actions A5])43.941 E 503.992 383.75 72 383.75 DL
396.782 312.75 396.782 383.75 DL 295.102 312.75 295.102 383.75 DL
184.259 312.75 184.259 383.75 DL 503.992 295.75 503.992 383.75 DL 72
295.75 72 383.75 DL 503.998 395.75 72 395.75 DL F1
(In I Am Assert Loser \(L\) State)216.207 406 Q 503.998 410.75 72 410.75
DL 503.998 412.75 72 412.75 DL(my_metric -> better)89.884 423 Q(than W)
89.884 436 Q(inner')-.198 E 2.75(sm)-.407 G(etric)-2.75 E
(RPF interface stops)244.362 423 Q(being I)244.362 436 Q(Recei)390.271
423 Q .22 -.11(ve J)-.11 H(oin\(*,G\) or)-.055 E -.165(Jo)390.271 436 S
(in\(*,*,RP\(G\)\) on).165 E(Interface I)390.271 449 Q 503.998 453.75 72
453.75 DL 503.998 455.75 72 455.75 DL F0(-> NI state)89.884 466 Q
(-> NI state)107.343 E(-> NI State)98.774 E([Actions A5])89.884 479 Q
([Actions A5])96.739 E([Actions A5])88.17 E 503.998 483.75 72 483.75 DL
363.445 412.75 363.445 483.75 DL 217.536 412.75 217.536 483.75 DL
503.998 395.75 503.998 483.75 DL 72 395.75 72 483.75 DL
(The state machine uses the follo)72 514.6 Q(wing macros:)-.275 E/F2 11
/Courier@0 SF(CouldAssert\(*,G,I\) =)72 531.2 Q 6.6(\(Ii)98.4 544.2 S
6.6(n\(j)-6.6 G(oins\(*,*,RP\(G\)\) \(+\) joins\(*,G\))-6.6 E
(\(+\) pim_include\(*,G\)\) \))157.8 557.2 Q
(AND RPF_interface\(RP\(G\)\) != I)98.4 570.2 Q F0
(CouldAssert\(*,G,I\) is true on do)72 586.8 Q(wnstream interf)-.275 E
(aces for which we ha)-.11 E .33 -.165(ve \()-.22 H
(*,*,RP\(G\)\) or \(*,G\) join).165 E
(state, or local members that requested an)72 599.8 Q 2.75(yt)-.165 G
(raf)-2.75 E(\214c destined for G.)-.275 E F2
(AssertTrackingDesired\(*,G,I\) =)72 616.4 Q(CouldAssert\(*,G\) OR)98.4
629.4 Q 6.6(\(R)98.4 642.4 S
(PF_interface\(RP\(G\)\) == I AND RPTJoinDesired\(G\) \))-6.6 E F0
(AssertT)72 659 Q(rackingDesired\(*,G,I\) is true on an)-.385 E 2.75(yi)
-.165 G(nterf)-2.75 E(ace on which an \(*,G\) assert might af)-.11 E
(fect our)-.275 E(beha)72 672 Q(vior)-.22 E(.)-.605 E
(Note that for reasons of compactness, "AssT)72 688.6 Q
(rDes\(*,G,I\)" is used in the state-machine table to)-.385 E
(refer to AssertT)72 701.6 Q(rackingDesired\(*,G,I\).)-.385 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.5.2. [P)2.75 F(age 58])-.165 E EP
%%Page: 59 59
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E -.77(Te)72 85 S(rminology:).77
E 2.75(A")97 98 S
(preferred assert" is one with a better metric than the current winner)
-2.75 E(.)-.605 E(An "inferior assert" is one with a w)97 114.6 Q
(orse metric than my_assert_metric\(S,G\).)-.11 E/F1 11/Times-Bold@0 SF
-.814(Tr)72 140.6 S(ansitions fr).814 E(om NoInf)-.198 E 2.75(oS)-.275 G
(tate)-2.75 E F0(When in NoInfo state, the follo)72 157.2 Q(wing e)-.275
E -.165(ve)-.275 G(nts trigger transitions, b).165 E
(ut only if the \(S,G\) assert state)-.22 E(machine is in NoInfo state:)
72 170.2 Q F1(Recei)97 186.8 Q .22 -.11(ve I)-.11 H
(nferior Assert with RPTbit set AND CouldAssert\(*,G,I\)==TR).11 E(UE)
-.33 E F0(An Inferior \(*,G\) assert is recei)122 199.8 Q -.165(ve)-.275
G 2.75(df).165 G(or G on Interf)-2.75 E(ace I.)-.11 E
(If CouldAssert\(*,G,I\) is)5.5 E(TR)122 212.8 Q(UE, then I is our do)
-.44 E(wnstream interf)-.275 E(ace, and we ha)-.11 E .33 -.165(ve \()
-.22 H(*,G\) forw).165 E(arding state on this)-.11 E(interf)122 225.8 Q
(ace, so we should be the assert winner)-.11 E 5.5(.W)-.605 G 2.75(et)
-6.38 G(ransition to the "I am Assert)-2.75 E -.44(Wi)122 238.8 S
(nner" state, and perform Actions A1 \(belo).44 E(w\).)-.275 E F1 2.75
(Ad)97 255.4 S(ata pack)-2.75 E(et destined f)-.11 E(or G arri)-.275 E
-.11(ve)-.11 G 2.75(so).11 G 2.75(ni)-2.75 G
(nterface I, AND CouldAssert\(*,G,I\)==TR)-2.75 E(UE)-.33 E F0 2.75(Ad)
122 268.4 S(ata pack)-2.75 E(et destined for G arri)-.11 E -.165(ve)
-.275 G 2.75(do).165 G 2.75(nad)-2.75 G -.275(ow)-2.75 G(nstream interf)
.275 E(ace which is in our \(*,G\))-.11 E(outgoing interf)122 281.4 Q
(ace list.)-.11 E 1.76 -.88(We t)5.5 H(herefore belie).88 E .33 -.165
(ve w)-.275 H 2.75(es).165 G(hould be the forw)-2.75 E
(arder for this \(*,G\),)-.11 E
(and so we transition to the "I am Assert W)122 294.4 Q
(inner" state, and perform Actions A1)-.44 E(\(belo)122 307.4 Q(w\).)
-.275 E F1(Recei)97 324 Q .22 -.11(ve P)-.11 H -.198(re).11 G(ferr).198
E(ed Assert with RPT bit set AND)-.198 E(AssertT)122 337 Q(rackingDesir)
-.814 E(ed\(*,G,I\)==TR)-.198 E(UE)-.33 E F0 -.88(We)122 350 S -.55('r)
.88 G 2.75(ei).55 G
(nterested in \(*,G\) Asserts, either because I is a do)-2.75 E
(wnstream interf)-.275 E(ace for which)-.11 E(we ha)122 363 Q .33 -.165
(ve \()-.22 H(*,G\) forw).165 E
(arding state, or because I is the upstream interf)-.11 E
(ace for RP\(G\) and)-.11 E(we ha)122 376 Q .33 -.165(ve \()-.22 H
(*,G\) forw).165 E(arding state.)-.11 E 1.76 -.88(We g)5.5 H
(et a \(*,G\) Assert that has a better metric than).88 E(our o)122 389 Q
(wn, so we do not win the Assert.)-.275 E 1.76 -.88(We t)5.5 H
(ransition to "I am Assert Loser" and).88 E(perform actions A2 \(belo)
122 402 Q(w\).)-.275 E F1 -.814(Tr)72 428 S(ansitions fr).814 E(om W)
-.198 E(inner State)-.198 E F0(When in "I am Assert W)72 444.6 Q
(inner" state, the follo)-.44 E(wing e)-.275 E -.165(ve)-.275 G
(nts trigger transitions, b).165 E(ut only if the \(S,G\))-.22 E
(assert state machine is in NoInfo state:)72 457.6 Q F1(Recei)97 474.2 Q
.22 -.11(ve I)-.11 H(nferior Assert).11 E F0 1.76 -.88(We r)122 487.2 T
(ecei).88 E .33 -.165(ve a \()-.275 H(*,G\) assert that has a w).165 E
(orse metric than our o)-.11 E 2.75(wn. Whoe)-.275 F -.165(ve)-.275 G
2.75(rs).165 G(ent the)-2.75 E(assert has lost, and so we re-send a \(*\
,G\) Assert, and restart the timer \(Action A3)122 500.2 Q(belo)122
513.2 Q(w\).)-.275 E F1(Recei)97 529.8 Q .22 -.11(ve P)-.11 H -.198(re)
.11 G(ferr).198 E(ed Assert)-.198 E F0 1.76 -.88(We r)122 542.8 T(ecei)
.88 E .33 -.165(ve a \()-.275 H
(*,G\) assert that has a better metric than our o).165 E 2.75(wn. W)
-.275 F 2.75(et)-.88 G(ransition to "I am)-2.75 E
(Assert Loser" state and perform actions A2 \(belo)122 555.8 Q(w\).)
-.275 E(When in "I am Assert W)72 572.4 Q(inner" state, the follo)-.44 E
(wing e)-.275 E -.165(ve)-.275 G(nts trigger transitions:).165 E F1
-.198(Ti)97 589 S(mer Expir).198 E(es)-.198 E F0
(The \(*,G\) assert timer e)122 602 Q 2.75(xpires. As)-.165 F(we')2.75 E
(re in the W)-.55 E(inner state, then we must still ha)-.44 E -.165(ve)
-.22 G(\(*,G\) forw)122 615 Q(arding state that is acti)-.11 E -.165(ve)
-.275 G(ly being k).165 E(ept ali)-.11 E -.165(ve)-.275 G 5.5(.T).165 G
2.75(op)-6.38 G(re)-2.75 E -.165(ve)-.275 G(nt unnecessary).165 E
(thrashing of the forw)122 628 Q
(arder and periodic \215ooding of duplicate pack)-.11 E
(ets, we re-send the)-.11 E
(\(*,G\) Assert, and restart the timer \(Action A3 belo)122 641 Q(w\).)
-.275 E F1(CouldAssert\(*,G,I\) -> F)97 657.6 Q(ALSE)-.99 E F0
(Our \(*,G\) forw)122 670.6 Q(arding state or RPF interf)-.11 E
(ace changed so as to mak)-.11 E(e)-.11 E(CouldAssert\(*,G,I\) become f)
122 683.6 Q 2.75(alse. W)-.11 F 2.75(ec)-.88 G
(an no longer perform the actions of the assert)-2.75 E(winner)122 696.6
Q 2.75(,a)-.44 G
(nd so we transition to NoInfo state and perform actions A4 \(belo)-2.75
E(w\).)-.275 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.5.2. [P)2.75 F(age 59])-.165 E EP
%%Page: 60 60
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF -.814(Tr)
72 85 S(ansitions fr).814 E(om Loser State)-.198 E F0
(When in "I am Assert Loser" state, the follo)72 101.6 Q(wing e)-.275 E
-.165(ve)-.275 G(nts trigger transitions, b).165 E
(ut only if the \(S,G\))-.22 E(assert state machine is in NoInfo state:)
72 114.6 Q F1(Recei)97 131.2 Q .22 -.11(ve P)-.11 H -.198(re).11 G(ferr)
.198 E(ed Assert)-.198 E F0 1.76 -.88(We r)122 144.2 T(ecei).88 E .33
-.165(ve a \()-.275 H
(*,G\) assert that is better than that of the current assert winner).165
E 5.5(.W)-.605 G 2.75(es)-6.38 G(tay)-2.75 E
(in Loser state, and perform actions A2 belo)122 157.2 Q -.715(w.)-.275
G F1(Recei)97 173.8 Q .22 -.11(ve I)-.11 H(nferior Assert fr).11 E
(om Curr)-.198 E(ent W)-.198 E(inner)-.198 E F0 1.76 -.88(We r)122 186.8
T(ecei).88 E .33 -.165(ve a)-.275 H 2.75(na).165 G
(ssert from the current assert winner that is w)-2.75 E(orse than our o)
-.11 E(wn metric)-.275 E(for this group \(typically because the winner')
122 199.8 Q 2.75(sm)-.605 G(etric became w)-2.75 E 2.75(orse\). W)-.11 F
2.75(et)-.88 G(ransition to)-2.75 E
(NoInfo state, delete this \(*,G\) assert state, and allo)122 212.8 Q
2.75(wt)-.275 G(he normal PIM Join/Prune)-2.75 E(mechanisms to operate.)
122 225.8 Q(Usually we will e)5.5 E -.165(ve)-.275 G
(ntually re-assert and win when data).165 E(pack)122 238.8 Q
(ets for G ha)-.11 E .33 -.165(ve s)-.22 H(tarted \215o).165 E(wing ag)
-.275 E(ain.)-.055 E(When in "I am Assert Loser" state, the follo)72
255.4 Q(wing e)-.275 E -.165(ve)-.275 G(nts trigger transitions:).165 E
F1 -.198(Ti)97 272 S(mer Expir).198 E(es)-.198 E F0
(The \(*,G\) assert timer e)122 285 Q 2.75(xpires. W)-.165 F 2.75(et)
-.88 G(ransition to NoInfo state and delete this \(*,G\))-2.75 E
(assert info.)122 298 Q F1(AssertT)97 314.6 Q(rackingDesir)-.814 E
(ed\(*,G,I\)->F)-.198 E(ALSE)-.99 E F0(AssertT)122 327.6 Q
(rackingDesired\(*,G,I\) becomes F)-.385 E 2.75(ALSE. Our)-.814 F(forw)
2.75 E(arding state has changed so)-.11 E
(that \(*,G\) Asserts on interf)122 340.6 Q
(ace I are no longer of interest to us.)-.11 E 1.76 -.88(We t)5.5 H
(ransition to).88 E(NoInfo state and delete this \(*,G\) assert info.)
122 353.6 Q F1(My metric becomes better than the assert winner')97 370.2
Q 2.75(sm)-.407 G(etric)-2.75 E F0
(My routing metric, rpt_assert_metric\(G,I\), has changed so that no)122
383.2 Q 2.75(wm)-.275 G 2.75(ya)-2.75 G(ssert metric)-2.75 E
(for \(*,G\) is better than the metric we ha)122 396.2 Q .33 -.165(ve s)
-.22 H(tored for current assert winner).165 E 5.5(.W)-.605 G(e)-6.38 E(\
transition to NoInfo state, and delete this \(*,G\) assert state, and a\
llo)122 409.2 Q 2.75(wt)-.275 G(he normal PIM)-2.75 E
(Join/Prune mechanisms to operate.)122 422.2 Q(Usually we will e)5.5 E
-.165(ve)-.275 G(ntually re-assert and win when).165 E/F2 10/Symbol SF
<ef>555 434.2 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M F0(data pack)122 435.2 Q(ets for G ha)-.11 E .33
-.165(ve s)-.22 H(tarted \215o).165 E(wing ag)-.275 E(ain.)-.055 E F1
(RPF interface changed away fr)97 451.8 Q(om interface I)-.198 E F0
(Interf)122 464.8 Q(ace I used to be the RPF interf)-.11 E
(ace for RP\(G\), and no)-.11 E 2.75(wi)-.275 G 2.75(ti)-2.75 G 2.75(sn)
-2.75 G 2.75(ot. W)-2.75 F 2.75(et)-.88 G(ransition to)-2.75 E
(NoInfo state, and delete this \(*,G\) assert state.)122 477.8 Q F1
(Recei)97 494.4 Q .22 -.11(ve J)-.11 H(oin\(*,G\) or J)-.055 E
(oin\(*,*,RP\(G\)\))-.165 E F0 1.76 -.88(We r)122 507.4 T(ecei).88 E .33
-.165(ve a J)-.275 H(oin\(*,G\) or a Join\(*,*,RP\(G\)\) directed to my\
 IP address in interf).165 E(ace I.)-.11 E(The action is to transition \
to NoInfo state, and delete this \(*,G\) assert state, and allo)122
520.4 Q(w)-.275 E(the normal PIM Join/Prune mechanisms to operate.)122
533.4 Q(If whoe)5.5 E -.165(ve)-.275 G 2.75(rs).165 G(ent the Join w)
-2.75 E(as in)-.11 E(error)122 546.4 Q 2.75(,t)-.44 G
(hen the normal assert mechanism will e)-2.75 E -.165(ve)-.275 G
(ntually re-apply and we will lose the).165 E(assert ag)122 559.4 Q 2.75
(ain. Ho)-.055 F(we)-.275 E -.165(ve)-.275 G 2.75(rw).165 G(hoe)-2.75 E
-.165(ve)-.275 G 2.75(rs).165 G(ent the assert may kno)-2.75 E 2.75(wt)
-.275 G(hat the pre)-2.75 E(vious assert)-.275 E
(winner has died, and so we may end up being the ne)122 572.4 Q 2.75(wf)
-.275 G(orw)-2.75 E(arder)-.11 E(.)-.605 E F1
(\(*,G\) Assert State-machine Actions)72 598.4 Q F0 5.75(A1: Send)97 615
R(Assert\(*,G\))2.75 E(Set timer to \(Assert_T)122 628 Q
(ime - Assert_Ov)-.385 E(erride_Interv)-.165 E(al\))-.275 E
(Store self as AssertW)122 641 Q(inner\(*,G,I\).)-.44 E
(Store rpt_assert_metric as AssertW)122 654 Q(innerMetric\(*,G,I\).)-.44
E 5.75(A2: Store)97 670.6 R(ne)2.75 E 2.75(wa)-.275 G
(ssert winner as AssertW)-2.75 E
(inner\(*,G,I\) and assert winner metric as)-.44 E(AssertW)122 683.6 Q
(innerMetric\(*,G,I\).)-.44 E(Set timer to assert_time)122 696.6 Q
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.5.2. [P)2.75 F(age 60])-.165 E EP
%%Page: 61 61
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 5.75(A3: Send)97 85 R
(Assert\(*,G\))2.75 E(Set timer to \(Assert_T)122 98 Q(ime - Assert_Ov)
-.385 E(erride_Interv)-.165 E(al\))-.275 E 5.75(A4: Send)97 114.6 R
(AssertCancel\(*,G\))2.75 E(Delete assert info \(AssertW)122 127.6 Q
(inner\(*,G,I\) and AssertW)-.44 E(innerMetric\(*,G,I\) assume)-.44 E
(def)122 140.6 Q(ault v)-.11 E(alues\).)-.275 E 5.75(A5: Delete)97 157.2
R(assert info \(AssertW)2.75 E(inner\(*,G,I\) and AssertW)-.44 E
(innerMetric\(*,G,I\) assume)-.44 E(def)122 170.2 Q(ault v)-.11 E
(alues\).)-.275 E/F1 11/Times-Bold@0 SF 2.75(4.5.3. Assert)72 199.8 R
(Metrics)2.75 E F0(Assert metrics are de\214ned as:)72 216.4 Q/F2 11
/Courier@0 SF(struct assert_metric {)85.2 235.4 Q(rpt_bit_flag;)98.4
248.4 Q(metric_preference;)98.4 261.4 Q(route_metric;)98.4 274.4 Q
(ip_address;)98.4 287.4 Q(};)85.2 300.4 Q F0(When comparing assert_metr\
ics, the rpt_bit_\215ag, metric_preference, and route_metric \214eld ar\
e)72 332.4 Q(compared in order)72 345.4 Q 2.75(,w)-.44 G
(here the \214rst lo)-2.75 E(wer v)-.275 E(alue wins.)-.275 E
(If all \214elds are equal, the IP address of the)5.5 E
(router that sourced the Assert message is used as a tie-break)72 358.4
Q(er)-.11 E 2.75(,w)-.44 G(ith the highest IP address)-2.75 E(winning.)
72 371.4 Q(An assert metric for \(S,G\) to include in \(or compare ag)72
388 Q(ainst\) an Assert message sent on interf)-.055 E(ace I)-.11 E
(should be computed using the follo)72 401 Q(wing pseudocode:)-.275 E F2
(assert_metric)85.2 433 Q(my_assert_metric\(S,G,I\) {)85.2 446 Q
(if\( CouldAssert\(S,G,I\) == TRUE \) {)111.6 459 Q
(return spt_assert_metric\(S,G,I\))138 472 Q 6.6(}e)111.6 485 S
(lse if\( CouldAssert\(*,G,I\) == TRUE \) {)-6.6 E
(return rpt_assert_metric\(G,I\))138 498 Q 6.6(}e)111.6 511 S(lse {)-6.6
E(return infinite_assert_metric\(\))138 524 Q(})111.6 537 Q(})85.2 550 Q
(spt_assert_metric\(S,I\))72 572.6 Q F0(gi)2.75 E -.165(ve)-.275 G 2.75
(st).165 G(he assert metric we use if we')-2.75 E
(re sending an assert based)-.55 E(on acti)72 585.6 Q .33 -.165(ve \()
-.275 H(S,G\) forw).165 E(arding state:)-.11 E F2(assert_metric)85.2
604.6 Q(spt_assert_metric\(S,I\) {)85.2 617.6 Q
(return {0,MRIB.pref\(S\),MRIB.metric\(S\),my_ip_address\(I\)})105 630.6
Q(})85.2 643.6 Q(rpt_assert_metric\(G,I\))72 666.2 Q F0(gi)2.75 E -.165
(ve)-.275 G 2.75(st).165 G(he assert metric we use if we')-2.75 E
(re sending an assert based)-.55 E(only on \(*,G\) forw)72 679.2 Q
(arding state:)-.11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)
-.385 E 160.971(elas Section)-.165 F 2.75(4.5.3. [P)2.75 F(age 61])-.165
E EP
%%Page: 62 62
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF
(assert_metric)85.2 85 Q(rpt_assert_metric\(G,I\) {)85.2 98 Q(return {1\
,MRIB.pref\(RP\(G\)\),MRIB.metric\(RP\(G\)\),my_ip_address\(I\)})111.6
111 Q(})85.2 124 Q(MRIB.pref\(X\))72 146.6 Q F0(and)2.75 E F1
(MRIB.metric\(X\))2.75 E F0
(are the routing preference and routing metrics)2.75 E(associated with \
the route to a particular \(unicast\) destination X, as determined by t\
he MRIB.)72 159.6 Q F1(my_ip_address\(I\))72 172.6 Q F0
(is simply the router')2.75 E 2.75(sI)-.605 G 2.75(Pa)-2.75 G
(ddress that is associated with the local interf)-2.75 E(ace)-.11 E(I.)
72 185.6 Q F1(infinite_assert_metric\(\))72 202.2 Q F0(gi)2.75 E -.165
(ve)-.275 G 2.75(st).165 G(he assert metric we need to send an assert b)
-2.75 E(ut don')-.22 E(t)-.198 E(match either \(S,G\) or \(*,G\) forw)72
215.2 Q(arding state:)-.11 E F1(assert_metric)85.2 234.2 Q
(infinite_assert_metric\(\) {)85.2 247.2 Q
(return {1,infinity,infinity,infinity})118.2 260.2 Q(})85.2 273.2 Q/F2
11/Times-Bold@0 SF 2.75(4.5.4. AssertCancel)72 305.2 R(Messages)2.75 E
F0(An AssertCancel message is simply an RPT Assert message b)72 321.8 Q
(ut with in\214nite metric.)-.22 E(It is sent by)5.5 E
(the assert winner when it deletes the forw)72 334.8 Q
(arding state that had caused the assert to occur)-.11 E 5.5(.O)-.605 G
(ther)-5.5 E(routers will see this metric, and it will cause an)72 347.8
Q 2.75(yo)-.165 G(ther router that has forw)-2.75 E
(arding state to send its)-.11 E -.275(ow)72 360.8 S 2.75(na).275 G
(ssert, and to tak)-2.75 E 2.75(eo)-.11 G -.165(ve)-2.915 G 2.75(rf).165
G(orw)-2.75 E(arding.)-.11 E(An AssertCancel\(S,G\) is an in\214nite me\
tric assert with the RPT bit set that names S as the source.)72 377.4 Q
(An AssertCancel\(*,G\) is an in\214nite metric assert with the RPT bit\
 set, and typically will name)72 394 Q
(RP\(G\) as the source as it cannot name an appropriate S.)72 407 Q
(AssertCancel messages are simply an optimization.)72 423.6 Q
(The original Assert timeout mechanism will)5.5 E(allo)72 436.6 Q 2.75
(was)-.275 G(ubnet to e)-2.75 E -.165(ve)-.275 G
(ntually become consistent; the AssertCancel mechanism simply causes f)
.165 E(aster)-.11 E(con)72 449.6 Q -.165(ve)-.44 G -.198(rg).165 G 2.75
(ence. No).198 F(special processing is required for an AssertCancel mes\
sage, since it is simply)2.75 E
(an Assert message from the current winner)72 462.6 Q(.)-.605 E F2 2.75
(4.5.5. Assert)72 488.6 R(State Macr)2.75 E(os)-.198 E F0(The macros)72
505.2 Q F1(lost_assert\(S,G,rpt,I\))2.75 E F0(,)A F1
(lost_assert\(S,G,I\))2.75 E F0 2.75(,a)C(nd)-2.75 E F1
(lost_assert\(*,G,I\))72 518.2 Q F0(are used in the olist computations \
of Section 4.1, and are de\214ned as:)2.75 E F1
(bool lost_assert\(S,G,rpt,I\) {)85.2 537.2 Q
(if \( RPF_interface\(RP\) == I)98.4 550.2 Q(OR)13.2 E 6.6(\(R)131.4
563.2 S(PF_interface\(S\) == I AND SPTbit\(S,G\) == TRUE \) \) {)-6.6 E
/F3 10/Symbol SF<ef>555 575.2 Q<ef>-4.94 -10 M<ef>-4.94 -10 M F1
(return FALSE)118.2 576.2 Q 6.6(}e)98.4 589.2 S(lse {)-6.6 E
(return \( AssertWinner\(S,G,I\) != NULL AND)118.2 602.2 Q
(AssertWinner\(S,G,I\) != me \))177.6 615.2 Q(})98.4 628.2 Q(})85.2
641.2 Q F0(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.5.5. [P)2.75 F(age 62])-.165 E EP
%%Page: 63 63
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF
(bool lost_assert\(S,G,I\) {)85.2 85 Q
(if \( RPF_interface\(S\) == I \) {)98.4 98 Q(return FALSE)118.2 111 Q
6.6(}e)98.4 124 S(lse {)-6.6 E
(return \( AssertWinner\(S,G,I\) != NULL AND)118.2 137 Q
(AssertWinner\(S,G,I\) != me)177.6 150 Q(AND)13.2 E
(\(AssertWinnerMetric\(S,G,I\) is better)177.6 163 Q
(than spt_assert_metric\(S,G,I\) \))197.4 176 Q(})98.4 189 Q(})85.2 202
Q(bool lost_assert\(*,G,I\) {)85.2 227 Q
(if \( RPF_interface\(RP\) == I \) {)98.4 240 Q(return FALSE)118.2 253 Q
6.6(}e)98.4 266 S(lse {)-6.6 E
(return \( AssertWinner\(*,G,I\) != NULL AND)118.2 279 Q
(AssertWinner\(*,G,I\) != me \))177.6 292 Q(})98.4 305 Q(})85.2 318 Q
(AssertWinner\(S,G,I\))72 340.6 Q F0
(is the IP source address of the Assert\(S,G\) pack)2.75 E(et that w)
-.11 E(on an)-.11 E(Assert.)72 353.6 Q F1(AssertWinner\(S,G,I\))72 370.2
Q F0(is the IP source address of the Assert\(*,G\) pack)2.75 E
(et that w)-.11 E(on an)-.11 E(Assert.)72 383.2 Q F1
(AssertWinnerMetric\(S,G,I\))72 399.8 Q F0
(is the Assert metric of the Assert\(S,G\) pack)2.75 E(et tht w)-.11 E
(on an)-.11 E(Assert.)72 412.8 Q F1(AssertWinnerMetric\(*,G,I\))72 429.4
Q F0(is the Assert metric of the Assert\(*,G\) pack)2.75 E(et ht w)-.11
E(on an)-.11 E(Assert.)72 442.4 Q F1(AssertWinner\(S,G,I\))72 459 Q F0
(def)2.75 E(aults to Null and)-.11 E F1(AssertWinnerMetric\(S,G,I\))2.75
E F0(def)2.75 E(aults to)-.11 E(In\214nity when in the NoInfo state.)72
472 Q/F2 11/Times-Bold@0 SF(Rationale f)72 498 Q(or Assert Rules)-.275 E
F0(The follo)72 514.6 Q
(wing is a summary of the rules for sending and reacting to asserts.)
-.275 E(It is not intended to)5.5 E(be de\214niti)72 527.6 Q .33 -.165
(ve \()-.275 H(the state machines and pseudocode pro).165 E
(vide the de\214niti)-.165 E .33 -.165(ve b)-.275 H(eha).165 E 2.75
(vior\). Instead)-.22 F(it)2.75 E(pro)72 540.6 Q
(vides some rationale for the beha)-.165 E(vior)-.22 E(.)-.605 E 14
(1. Do)72 557.2 R(wnstream neighbors send Join\(*,G\) and Join\(S,G\) p\
eriodic messages to the appropriate)-.275 E(RPF' neighbor)97 570.2 Q
2.75(,i)-.44 G
(.e., the RPF neighbor as modi\214ed by the assert process.)-2.75 E
(Normal)5.5 E(suppression and o)97 583.2 Q -.165(ve)-.165 G
(rride rules apply).165 E(.)-.715 E
(This guarantees that all requested traf)97 599.8 Q
(\214c will continue to arri)-.275 E -.165(ve)-.275 G 5.5(.T).165 G
(his doesn')-5.5 E 2.75(ta)-.198 G(llo)-2.75 E(w)-.275 E(switching back\
 to the "normal" RPF neighbor until the assert times out, which it w)97
612.8 Q(on')-.11 E(t)-.198 E(while data is \215o)97 625.8 Q
(wing if we are implementing rule 8.)-.275 E 14(2. The)72 642.4 R(asser\
t winner for \(*,G\) acts as the local DR for \(*,G\) on behalf of IGMP\
 members.)2.75 E(This is required to allo)97 659 Q 2.75(was)-.275 G
(ingle router to mer)-2.75 E(ge PIM and IGMP joins and lea)-.198 E -.165
(ve)-.22 G 2.75(s. W).165 F(ithout)-.44 E(this, o)97 672 Q -.165(ve)
-.165 G(rrides don').165 E 2.75(tw)-.198 G(ork.)-2.86 E 14(3. The)72
688.6 R(assert winner for \(S,G\) must act as the local DR for \(S,G\) \
on behalf of IGMPv3)2.75 E(members.)97 701.6 Q(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.5.5. [P)2.75 F(age 63])-.165 E EP
%%Page: 64 64
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(Same rationale as \(2\))97 85 Q
14(4. \(S,G\))72 101.6 R(and \(*,G\) prune o)2.75 E -.165(ve)-.165 G
(rrides are sent to the RPF' neighbor and not to the re).165 E
(gular RPF)-.165 E(neighbor)97 114.6 Q(.)-.605 E
(Same rationale as \(1\).)97 131.2 Q 14(5. An)72 147.8 R
(\(S,G,rpt\) prune o)2.75 E -.165(ve)-.165 G
(rride is not sent \(at all\) if RPF'\(S,G,rpt\) != RPF'\(*,G\).).165 E
(This a)97 164.4 Q -.22(vo)-.22 G(ids k).22 E(eeping state ali)-.11 E
.33 -.165(ve o)-.275 H 2.75(n\().165 G(S,G\) tree when only \(*,G\) do)
-2.75 E(wnstream members are left.)-.275 E(Also, it a)97 177.4 Q -.22
(vo)-.22 G(ids sending \(S,G,rpt\) joins to a router that is not on the\
 \(*,G\) tree.).22 E(This might be)5.5 E(confusing and could be interpr\
eted as being unde\214ned although technically the current spec)97 190.4
Q(says to drop such a join.)97 203.4 Q 14(6. An)72 220 R
(assert loser that recei)2.75 E -.165(ve)-.275 G 2.75(saJ).165 G
(oin\(S,G\) directed to it cancels the \(S,G\) assert timer)-2.75 E(.)
-.605 E 14(7. An)72 236.6 R(assert loser that recei)2.75 E -.165(ve)
-.275 G 2.75(saJ).165 G
(oin\(*,G\) or a Join\(*,*,RP\(G\)\) directed to it cancels the \(*,G\))
-2.75 E(assert timer and all \(S,G\) assert timers that do not ha)97
249.6 Q .33 -.165(ve c)-.22 H(orresponding Prune\(S,G,rpt\)).165 E
(messages in the compound Join/Prune message.)97 262.6 Q
(Rules 7 and 8 help con)97 279.2 Q -.165(ve)-.44 G -.198(rg).165 G
(ence during topology changes.).198 E 14(8. An)72 295.8 R(assert winner\
 for \(*,G\) or \(S,G\) sends a canceling assert when it is about to st\
op)2.75 E(forw)97 308.8 Q(arding on a \(*,G\) or an \(S,G\) entry)-.11 E
5.5(.T)-.715 G(his rule does not apply to \(S,G,rpt\).)-5.5 E(This allo)
97 325.4 Q 2.75(ws)-.275 G(witching back to the shared tree after the l\
ast SPT router on the lan lea)-2.75 E -.165(ve)-.22 G 2.75(s. W).165 F
(e)-.88 E(don')97 338.4 Q 2.75(tw)-.198 G(ant RPT do)-2.86 E
(wnstream routers to k)-.275 E(eep SPT state ali)-.11 E -.165(ve)-.275 G
(.).165 E 14(9. [Optionally])72 355 R(re-assert before timing out.)2.75
E(This pre)97 371.6 Q -.165(ve)-.275 G(nts periodic duplicates.).165 E
8.5(10. When)72 388.2 R(RPF'\(S,G,rpt\) changes to be the same as RPF'\
\(*,G\) we need to trigger a)2.75 E(Join\(S,G,rpt\) to MRIB.ne)97 401.2
Q(xt_hop\(RP\(G\)\).)-.165 E(This allo)97 417.8 Q
(ws switching back to the RPT after the last SPT member lea)-.275 E
-.165(ve)-.22 G(s.).165 E/F1 11/Times-Bold@0 SF(4.6.)72 447.4 Q/F2 13
/Times-Bold@0 SF(Designated Routers \(DR\) and Hello Messages)5.5 E F1
2.75(4.6.1. Sending)72 477 R(Hello Messages)2.75 E F0
(PIM-Hello messages are sent periodically on each PIM-enabled interf)72
493.6 Q 2.75(ace. The)-.11 F 2.75(ya)-.165 G(llo)-2.75 E 2.75(war)-.275
G(outer to)-2.75 E
(learn about the neighboring PIM routers on each interf)72 506.6 Q 2.75
(ace. Hello)-.11 F(messages are also the)2.75 E
(mechanism used to elect a Designated Router \(DR\), and to ne)72 519.6
Q(gotiate additional capabilities A)-.165 E
(router must record the Hello information recei)72 532.6 Q -.165(ve)
-.275 G 2.75(df).165 G(rom each PIM neighbor)-2.75 E(.)-.605 E
(Hello messages must be sent on all acti)72 549.2 Q .33 -.165(ve i)-.275
H(nterf).165 E(aces, including ph)-.11 E
(ysical point-to-point links, and)-.055 E
(are multicast to address 224.0.0.13 \(the ALL-PIM-R)72 562.2 Q
(OUTERS group\).)-.44 E 2.75(Ap)72 578.8 S(er interf)-2.75 E(ace hello \
timer \(HT\(I\)\) is used to trigger sending Hello messages on each act\
i)-.11 E -.165(ve)-.275 G(interf)72 591.8 Q 2.75(ace. When)-.11 F
(PIM is enabled on an interf)2.75 E
(ace or a router \214rst starts, the hello timer of that)-.11 E(interf)
72 604.8 Q(ace is set to a random v)-.11 E(alue between 0 and)-.275 E/F3
11/Courier@0 SF(Triggered_Hello_Delay)2.75 E F0 5.5(.T)C(his pre)-5.5 E
-.165(ve)-.275 G(nts).165 E
(synchronization of Hello messages if multiple routers are po)72 617.8 Q
(wered on simultaneously)-.275 E 5.5(.A)-.715 G(fter the)-5.5 E
(initial randomized interv)72 630.8 Q(al, Hello messages must be sent e)
-.275 E -.165(ve)-.275 G(ry).165 E F3(Hello_Period)2.75 E F0 2.75
(seconds. The)2.75 F(hello timer should not be reset e)72 643.8 Q
(xcept when it e)-.165 E(xpires.)-.165 E
(The DR_Election_Priority Option allo)72 660.4 Q(ws a netw)-.275 E
(ork administrator to gi)-.11 E .33 -.165(ve p)-.275 H(reference to a)
.165 E(particular router in the DR election process by gi)72 673.4 Q
(ving it a numerically lar)-.275 E(ger DR Election Priority)-.198 E(.)
-.715 E(The DR_Election_Priority Option SHOULD be included in e)72 686.4
Q -.165(ve)-.275 G(ry Hello message, e).165 E -.165(ve)-.275 G 2.75(ni)
.165 G 2.75(fn)-2.75 G 2.75(oD)-2.75 G(R)-2.75 E(election priority is e)
72 699.4 Q(xplicitly con\214gured on that interf)-.165 E 2.75(ace. This)
-.11 F(is necessary because priority-)2.75 E
(based DR election is only enabled when all neighbors on an interf)72
712.4 Q(ace adv)-.11 E(ertise that the)-.165 E 2.75(ya)-.165 G(re)-2.75
E(capable of using the DR Election Priority Option.)72 725.4 Q(The def)
5.5 E(ault priority is 1.)-.11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)
-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75(4.6.1. [P)2.75 F
(age 64])-.165 E EP
%%Page: 65 65
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(The Generation_Identi\214er \(\
GenID\) Option SHOULD be included in all Hello messages.)72 85 Q(The)5.5
E(GenID option contains a randomly generated 32-bit v)72 98 Q
(alue that is re)-.275 E(generated each time PIM)-.165 E(forw)72 111 Q
(arding is started or restarted on the interf)-.11 E
(ace, including when the router itself restarts.)-.11 E(When)5.5 E 2.75
(aH)72 124 S(ello message with a ne)-2.75 E 2.75(wG)-.275 G
(enID is recei)-2.75 E -.165(ve)-.275 G 2.75(df).165 G(rom a neighbor)
-2.75 E 2.75(,a)-.44 G .33 -.165(ny o)-2.75 H
(ld Hello information about).165 E(that neighbor SHOULD be discarded an\
d superseded by the information from the ne)72 137 Q 2.75(wH)-.275 G
(ello)-2.75 E 2.75(message. This)72 150 R(may cause a ne)2.75 E 2.75(wD)
-.275 G 2.75(Rt)-2.75 G 2.75(ob)-2.75 G 2.75(ec)-2.75 G
(hosen on that interf)-2.75 E(ace.)-.11 E(The LAN_Prune_Delay Option SH\
OULD be included in all Hello messages sent on multi-access)72 166.6 Q
(LANs. This option adv)72 179.6 Q(ertises a router')-.165 E 2.75(sc)
-.605 G(apability to use v)-2.75 E(alues other than the def)-.275 E
(ault for the)-.11 E(Propag)72 192.6 Q(ation Delay and Ov)-.055 E
(erride Interv)-.165 E(al which af)-.275 E
(fect the setting of the Prune Pending, Upstream)-.275 E(Join and Ov)72
205.6 Q(erride timers \(de\214ned in section 4.10\).)-.165 E 1.76 -.88
(To a)72 222.2 T(llo).88 E 2.75(wn)-.275 G .55 -.275(ew o)-2.75 H 2.75
(rr).275 G(ebooting routers to learn of PIM neighbors quickly)-2.75 E
2.75(,w)-.715 G(hen a Hello message is)-2.75 E(recei)72 235.2 Q -.165
(ve)-.275 G 2.75(df).165 G(rom a ne)-2.75 E 2.75(wn)-.275 G(eighbor)
-2.75 E 2.75(,o)-.44 G 2.75(raH)-2.75 G(ello message with a ne)-2.75 E
2.75(wG)-.275 G(enID is recei)-2.75 E -.165(ve)-.275 G 2.75(df).165 G
(rom an e)-2.75 E(xisting)-.165 E(neighbor)72 248.2 Q 2.75(,an)-.44 G
.55 -.275(ew H)-2.75 H(ello message should be sent on this interf).275 E
(ace after a randomized delay between)-.11 E 2.75(0a)72 261.2 S(nd)-2.75
E/F1 11/Courier@0 SF(Triggered_Hello_Delay)2.75 E F0 5.5(.T)C
(his triggered message need not change the timing of the)-5.5 E
(scheduled periodic message.)72 274.2 Q(When an interf)72 290.8 Q
(ace goes do)-.11 E
(wn or changes IP address, a Hello message with a zero Hold T)-.275 E
(ime)-.385 E(should be sent immediately \(with the old IP address if th\
e IP address changed\).)72 303.8 Q(This will cause)5.5 E
(PIM neighbors to remo)72 316.8 Q .33 -.165(ve t)-.165 H
(his neighbor \(or its old IP address\) immediately).165 E(.)-.715 E/F2
11/Times-Bold@0 SF 2.75(4.6.2. DR)72 342.8 R(Election)2.75 E F0
(When a PIM-Hello message is recei)72 359.4 Q -.165(ve)-.275 G 2.75(do)
.165 G 2.75(ni)-2.75 G(nterf)-2.75 E(ace I the follo)-.11 E
(wing information about the sending)-.275 E(neighbor is recorded:)72
372.4 Q F1(neighbor.interface)97 389 Q F0(The interf)122 402 Q
(ace on which the Hello message arri)-.11 E -.165(ve)-.275 G(d.).165 E
F1(neighbor.ip_address)97 418.6 Q F0(The IP address of the PIM neighbor)
122 431.6 Q(.)-.605 E F1(neighbor.genid)97 448.2 Q F0
(The Generation ID of the PIM neighbor)122 461.2 Q(.)-.605 E F1
(neighbor.dr_priority)97 477.8 Q F0(The DR Priority \214eld of the PIM \
neighbor if it is present in the Hello message.)122 490.8 Q F1
(neighbor.dr_priority_present)97 507.4 Q F0 2.75<418d>122 520.4 S
(ag indicating if the DR Priority \214eld w)-2.75 E
(as present in the Hello message.)-.11 E F1(neighbor.timeout)97 537 Q F0
2.75(At)122 550 S
(imer to time out the neighbor state when it becomes stale.)-2.75 E
(This is reset to)122 563 Q F1(Hello Holdtime)2.75 E F0(whene)2.75 E
-.165(ve)-.275 G 2.75(raH).165 G(ello message is recei)-2.75 E -.165(ve)
-.275 G(d, or to the).165 E -.275(va)122 576 S
(lue speci\214ed in the message, if the hold time option is used.).275 E
(Neighbor state is deleted when the neighbor timeout e)72 592.6 Q
(xpires.)-.165 E(The function for computing the DR on interf)72 618.6 Q
(ace I is:)-.11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385
E 160.971(elas Section)-.165 F 2.75(4.6.2. [P)2.75 F(age 65])-.165 E EP
%%Page: 66 66
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF(host)85.2 85
Q(DR\(I\) {)85.2 98 Q(dr = me)111.6 111 Q
(for each neighbor on interface I {)111.6 124 Q
(if \( dr_is_better\( neighbor, dr, I \) == TRUE \) {)138 137 Q
(dr = neighbor)164.4 150 Q(})138 163 Q(})111.6 176 Q(return dr)111.6 189
Q(})85.2 202 Q F0
(The function used for comparing DR "metrics" on interf)72 224.6 Q
(ace I is:)-.11 E F1(bool)85.2 243.6 Q(dr_is_better\(a,b,I\) {)85.2
256.6 Q(if\( there is a neighbor n on I for which n.dr_priority_present)
111.6 269.6 Q(is false \) {)164.4 282.6 Q
(return a.ip_address > b.ip_address)138 295.6 Q 6.6(}e)111.6 308.6 S
(lse {)-6.6 E(return \( a.dr_priority > b.dr_priority \) OR)138 321.6 Q
6.6(\(a)158.9 334.6 S(.dr_priority == b.dr_priority AND)-6.6 E
(a.ip_address > b.ip_address \))197.4 347.6 Q(})111.6 360.6 Q(})85.2
373.6 Q F0(The DR election priority is a 32-bit unsigned number and the\
 numerically lar)72 396.2 Q(ger priority is al)-.198 E -.11(wa)-.11 G
(ys).11 E 2.75(preferred. A)72 409.2 R(router')2.75 E 2.75(si)-.605 G
(dea of the current DR on an interf)-2.75 E
(ace can change when a PIM-Hello)-.11 E(message is recei)72 422.2 Q
-.165(ve)-.275 G(d, when a neighbor times out, or when a router').165 E
2.75(so)-.605 G(wn DR priority changes.)-3.025 E(If)5.5 E/F2 10/Symbol
SF<ef>555 434.2 Q<ef>-4.94 -10 M F0(the router becomes the DR or ceases\
 to be the DR, this will normally cause the DR Re)72 435.2 Q
(gister state-)-.165 E(machine to change state.)72 448.2 Q
(Subsequent actions are determined by that state-machine.)5.5 E/F3 11
/Times-Bold@0 SF 2.75(4.6.3. Reducing)72 487.2 R(Prune Pr)2.75 E
(opagation Delay on LANs)-.198 E F0
(In addition to the information recorded for the DR Election, the follo)
72 503.8 Q(wing per neighbor)-.275 E
(information is obtained from the LAN Prune Delay Hello option:)72 516.8
Q F1(neighbor.lan_prune_delay_present)97 533.4 Q F0 2.75<418d>122 546.4
S(ag indicating if the LAN Prune Delay option w)-2.75 E
(as present in the Hello message.)-.11 E F1(neighbor.tracking_support)97
563 Q F0 2.75<418d>122 576 S(ag storing the v)-2.75 E
(alue of the T bit in the LAN Prune Delay option if it is present in)
-.275 E(the Hello message. This indicates the neighbor')122 589 Q 2.75
(sc)-.605 G(apability to disable join message)-2.75 E(suppression.)122
602 Q F1(neighbor.lan_delay)97 618.6 Q F0(The LAN Delay \214eld of the \
LAN Prune Delay option \(if present\) in the Hello)122 631.6 Q(message.)
122 644.6 Q F1(neighbor.override_interval)97 661.2 Q F0(The Ov)122 674.2
Q(erride Interv)-.165 E
(al \214eld of the LAN Prune Delay option \(if present\) in the Hello)
-.275 E(message.)122 687.2 Q(The additional state described abo)72 703.8
Q .33 -.165(ve i)-.165 H 2.75(sd).165 G
(eleted along with the DR neighbor state when the)-2.75 E
(neighbor timeout e)72 716.8 Q(xpires.)-.165 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.6.3. [P)2.75 F(age 66])-.165 E EP
%%Page: 67 67
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(Just lik)72 85 Q 2.75(et)-.11 G
(he DR priority option, the information pro)-2.75 E
(vided in the LAN Prune Delay option is not)-.165 E
(used unless all neighbors on a link adv)72 98 Q
(ertise the option. The function belo)-.165 E 2.75(wc)-.275 G
(omputes this state:)-2.75 E/F1 11/Courier@0 SF(bool)85.2 117 Q
(lan_delay_enabled\(I\) {)85.2 130 Q(for each neighbor on interface I {)
111.6 143 Q(if \( neighbor.lan_prune_delay_present == false \) {)138 156
Q(return false)164.4 169 Q(})138 182 Q(})111.6 195 Q(return true)111.6
208 Q(})85.2 221 Q F0
(The LAN Delay inserted by a router in the LAN Prune Delay option e)72
243.6 Q(xpresses the e)-.165 E(xpected)-.165 E(message propag)72 256.6 Q
(ation delay on the link and should be con\214gurable by the system adm\
inistrator)-.055 E 2.75(.I)-.605 G(t)-2.75 E
(is used by upstream routers to \214gure out ho)72 269.6 Q 2.75(wl)-.275
G(ong the)-2.75 E 2.75(ys)-.165 G(hould w)-2.75 E(ait for a Join o)-.11
E -.165(ve)-.165 G(rride message).165 E(before pruning an interf)72
282.6 Q(ace.)-.11 E(PIM implementors should enforce a lo)72 299.2 Q
(wer bound on the permitted v)-.275 E(alues for this delay to allo)-.275
E(w)-.275 E(for scheduling and processing delays within their router)72
312.2 Q 5.5(.S)-.605 G(uch delays may cause recei)-5.5 E -.165(ve)-.275
G(d).165 E(messages to be processed later as well as triggered messages\
 to be sent later than intended.)72 325.2 Q
(Setting this LAN Prune Delay to too lo)72 338.2 Q 2.75(wav)-.275 G
(alue may result in temporary forw)-3.025 E(arding outages)-.11 E
(because a do)72 351.2 Q(wnstream router will not be able to o)-.275 E
-.165(ve)-.165 G(rride a neighbors prune messages before the).165 E
(upstream neighbor stops forw)72 364.2 Q(arding.)-.11 E
(When all routers on a link are in a position to ne)72 380.8 Q
(gotiate a dif)-.165 E(ferent than def)-.275 E(ault Propag)-.11 E
(ation Delay)-.055 E(,)-.715 E(the lar)72 393.8 Q(gest v)-.198 E
(alue from those adv)-.275 E
(ertised by each neighbor is chosen. The function for computing)-.165 E
(the Propag)72 406.8 Q(ation Delay of interf)-.055 E(ace I is:)-.11 E F1
(int)85.2 425.8 Q(Propagation_Delay\(I\) {)85.2 438.8 Q
(if \( lan_delay_enabled\(I\) == false \) {)111.6 451.8 Q
(return LAN_delay_default)138 464.8 Q(})111.6 477.8 Q(delay = 0)111.6
490.8 Q(for each neighbor on interface I {)111.6 503.8 Q
(if \( neighbor.lan_delay > delay \) {)138 516.8 Q
(delay = neighbor.lan_delay)164.4 529.8 Q(})138 542.8 Q(})111.6 555.8 Q
(return delay)111.6 568.8 Q(})85.2 581.8 Q F0 1.76 -.88(To a)72 604.4 T
-.22(vo).66 G(id synchronisation of o).22 E -.165(ve)-.165 G
(rride messages when multiple do).165 E(wnstream routers share a multi-)
-.275 E(access link, sending of such messages is delayed by a small ran\
dom amount of time. The period)72 617.4 Q(of randomisation should repre\
sent the size of the PIM router poppulation on the link.)72 630.4 Q
(Each router)5.5 E -.165(ex)72 643.4 S(presses its vie).165 E 2.75(wo)
-.275 G 2.75(ft)-2.75 G(he amount of randomisation necessary in the Ov)
-2.75 E(erride Delay \214eld of the)-.165 E(LAN Prune Delay option.)72
656.4 Q(When all routers on a link are in a position to ne)72 673 Q
(gotiate a dif)-.165 E(ferent than def)-.275 E(ault Ov)-.11 E
(erride Delay)-.165 E(,)-.715 E(the lar)72 686 Q(gest v)-.198 E
(alue from those adv)-.275 E
(ertised by each neighbor is chosen. The function for computing)-.165 E
(the Ov)72 699 Q(erride Interv)-.165 E(al of interf)-.275 E(ace I is:)
-.11 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.6.3. [P)2.75 F(age 67])-.165 E EP
%%Page: 68 68
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF(int)85.2 85
Q(Override_Interval\(I\) {)85.2 98 Q
(if \( lan_delay_enabled\(I\) == false \) {)111.6 111 Q
(return t_override_default)138 124 Q(})111.6 137 Q(delay = 0)111.6 150 Q
(for each neighbor on interface I {)111.6 163 Q
(if \( neighbor.override_interval > delay \) {)138 176 Q
(delay = neighbor.override_interval)164.4 189 Q(})138 202 Q(})111.6 215
Q(return delay)111.6 228 Q(})85.2 241 Q F0(Although the mechanisms are \
not speci\214ed in this document, it is possible for upstream routers t\
o)72 263.6 Q -.165(ex)72 276.6 S
(plicitly track the join membership of indi).165 E(vidual do)-.275 E
(wnstream routers if Join suppression is)-.275 E 2.75(disabled. A)72
289.6 R(router can adv)2.75 E(ertise its willingness to disable Join su\
ppression by using the T bit in)-.165 E
(the LAN Prune Delay Hello option. Unless all PIM routers on a link ne)
72 302.6 Q(gotiate this capability)-.165 E(,)-.715 E -.165(ex)72 315.6 S
(plicit tracking and the disabling of the Join suppression mechanism ar\
e not possible. The).165 E
(function for computing the state of Suppression on interf)72 328.6 Q
(ace I is:)-.11 E F1(state)85.2 347.6 Q(Suppression_State\(I\) {)85.2
360.6 Q(if \( lan_delay_enabled\(I\) == false \) {)111.6 373.6 Q
(return enabled)138 386.6 Q(})111.6 399.6 Q
(for each neighbor on interface I {)111.6 412.6 Q
(if \( neighbor.tracking_support == false \) {)138 425.6 Q
(return enabled)164.4 438.6 Q(})138 451.6 Q(})111.6 464.6 Q
(return disabled)111.6 477.6 Q(})85.2 490.6 Q F0
(Note that the setting of Suppression_State\(I\) af)72 509.6 Q
(fects the v)-.275 E(alue of t_suppressed \(see section 4.10\).)-.275 E
/F2 11/Times-Bold@0 SF(4.7.)72 535.6 Q/F3 13/Times-Bold@0 SF
(PIM Bootstrap and RP Disco)5.5 E -.13(ve)-.13 G(ry).13 E F0 -.165(Fo)72
552.2 S 2.75(rc).165 G(orrect operation, e)-2.75 E -.165(ve)-.275 G
(ry PIM router within a PIM domain must be able to map a particular).165
E(multicast group address to the same RP)72 565.2 Q 5.5(.I)-1.221 G 2.75
(ft)-5.5 G(his is not the case then black holes may appear)-2.75 E 2.75
(,w)-.44 G(here)-2.75 E(some recei)72 578.2 Q -.165(ve)-.275 G
(rs in the domain cannot recei).165 E .33 -.165(ve s)-.275 H
(ome groups.).165 E 2.75(Ad)5.5 G(omain in this conte)-2.75 E(xt is a)
-.165 E(contiguous set of routers that all implement PIM and are con\
\214gured to operate within a common)72 591.2 Q(boundary de\214ned by P\
IM Multicast Border Routers \(PMBRs\). PMBRs connect each PIM domain)72
604.2 Q(to the rest of the Internet.)72 617.2 Q 2.75(An)72 633.8 S
(otable e)-2.75 E(xception to this is where a PIM domain is brok)-.165 E
(en up into multiple administrati)-.11 E -.165(ve)-.275 G(scope re)72
646.8 Q(gions - these are re)-.165 E(gions where a border has been con\
\214gured so that a range of multicast)-.165 E(groups will not be forw)
72 659.8 Q(arded across that border)-.11 E 5.5(.F)-.605 G
(or more information on Administrati)-5.665 E -.165(ve)-.275 G(ly).165 E
(Scoped IP Multicast, see RFC 2365.)72 672.8 Q
(The modi\214ed criteria for admin-scoped re)5.5 E(gions are that the)
-.165 E(re)72 685.8 Q(gion is con)-.165 E .33 -.165(vex w)-.44 H
(ith respect to forw).165 E
(arding based on the MRIB, and that all PIM routers within)-.11 E
(the scope re)72 698.8 Q
(gion map scoped groups to the same RP within that re)-.165 E(gion.)
-.165 E .4 LW 555 717.3 555 727.3 DL 555 707.3 555 717.3 DL 555 697.3
555 707.3 DL 555 687.3 555 697.3 DL 555 677.3 555 687.3 DL 555 667.3 555
677.3 DL 555 657.3 555 667.3 DL 555 647.3 555 657.3 DL 555 637.3 555
647.3 DL 555 627.3 555 637.3 DL 555 617.3 555 627.3 DL 555 607.3 555
617.3 DL 555 597.3 555 607.3 DL 555 587.3 555 597.3 DL 555 577.3 555
587.3 DL 555 567.3 555 577.3 DL 555 557.3 555 567.3 DL 555 547.3 555
557.3 DL 555 541.7 555 551.7 DL(Fenner/Handle)72 769 Q(y/Holbrook/K)
-.165 E(ouv)-.385 E 169.221(elas Section)-.165 F 2.75(4.7. [P)2.75 F
(age 68])-.165 E EP
%%Page: 69 69
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(This speci\214cation does not \
mandate the use of a single mechanism to pro)72 85 Q
(vide routers with the)-.165 E
(information to perform the group-to-RP mapping.)72 98 Q
(Currently three mechanisms are possible, and)5.5 E(all three ha)72 111
Q .33 -.165(ve a)-.22 H(ssociated problems:).165 E/F1 11/Times-Bold@0 SF
(Static Con\214guration)72 127.6 Q F0 2.75(AP)97 140.6 S(IM router MUST\
 support the static con\214guration of group-to-RP mappings.)-2.75 E
(Such a)5.5 E(mechanism is not rob)97 153.6 Q(ust to f)-.22 E
(ailures, b)-.11 E(ut does at least pro)-.22 E
(vide a basic interoperability)-.165 E(mechanism.)97 166.6 Q F1(Cisco')
72 183.2 Q 2.75(sA)-.407 G(uto-RP)-3.3 E F0(Auto-RP uses a PIM Dense-Mo\
de multicast group to announce group-to-RP mappings from)97 196.2 Q 2.75
(ac)97 209.2 S(entral location.)-2.75 E
(This mechanism is not useful if PIM Dense-Mode is not being run in)5.5
E(parallel with PIM Sparse-Mode, and w)97 222.2 Q
(as only intended for use with PIM Sparse-Mode)-.11 E -1.221(Ve)97 235.2
S(rsion 1.)1.221 E(No standard speci\214cation currently e)5.5 E(xists.)
-.165 E F1(BootStrap Router \(BSR\))72 251.8 Q F0(RFC 2362 speci\214es \
a bootstrap mechanism based around the automatic election of a)97 264.8
Q(bootstrap router \(BSR\).)97 277.8 Q(An)5.5 E 2.75(yr)-.165 G
(outer in the domain that is con\214gured to be a possible RP)-2.75 E
(reports its candidac)97 290.8 Q 2.75(yt)-.165 G 2.75(ot)-2.75 G
(he BSR, and then a domain-wide \215ooding mechanism distrib)-2.75 E
(utes)-.22 E(the BSR')97 303.8 Q 2.75(sc)-.605 G
(hosen set of RPs throughout the domain.)-2.75 E
(As speci\214ed in RFC 2362, BSR is)5.5 E<8d61>97 316.8 Q
(wed in its handling of admin-scoped re)-.165 E
(gions that are smaller than a PIM domain, b)-.165 E(ut the)-.22 E
(mechanism does w)97 329.8 Q(ork for global-scoped groups.)-.11 E(As f)
72 346.4 Q(ar as PIM-SM is concerned, the only important requirement is\
 that all routers in the domain)-.11 E
(\(or admin scope zone for scoped re)72 359.4 Q(gions\) recei)-.165 E
.33 -.165(ve t)-.275 H(he same set of group-range-to-RP mappings.).165 E
(This may be achie)72 372.4 Q -.165(ve)-.275 G 2.75(dt).165 G
(hrough the use of an)-2.75 E 2.75(yo)-.165 G 2.75(ft)-2.75 G
(hese mechansms, or through alternati)-2.75 E -.165(ve)-.275 G/F2 10
/Symbol SF<ef>555 384.4 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(mechanisms not currently speci\214ed.)72 385.4 Q F2<ef>555 401 Q F0(An)
72 402 Q 2.75(yR)-.165 G 2.75(Pa)-2.75 G(ddress con\214gured or learned\
 MUST be a domain-wide reachable address.)-2.75 E F1 2.75(4.7.1. Gr)72
441 R(oup-to-RP Mapping)-.198 E F0
(Using one of the mechanisms described abo)72 457.6 Q -.165(ve)-.165 G
2.75(,aP).165 G(IM router recei)-2.75 E -.165(ve)-.275 G 2.75(so).165 G
(ne or more possible group-)-2.75 E(range-to-RP mappings.)72 470.6 Q
(Each mapping speci\214es a range of multicast groups \(e)5.5 E
(xpressed as a group)-.165 E
(and mask\) and the RP to which such groups should be mapped.)72 483.6 Q
(Each mapping may also ha)5.5 E .33 -.165(ve a)-.22 H(n).165 E
(associated priority)72 496.6 Q 5.5(.I)-.715 G 2.75(ti)-5.5 G 2.75(sp)
-2.75 G(ossible to recei)-2.75 E .33 -.165(ve m)-.275 H
(ultiple mappings all of which might match the same).165 E
(multicast group - this is the common case with BSR.)72 509.6 Q
(The algorithm for performing the group-to-)5.5 E
(RP mapping is as follo)72 522.6 Q(ws:)-.275 E 19.5(1P)72 539.2 S
(erform longest match on group-range to obtain a list of RPs.)-19.5 E
19.5(2F)72 555.8 S
(rom this list of matching RPs, \214nd the one with highest priority)
-19.5 E 5.5(.E)-.715 G(liminate an)-5.5 E 2.75(yR)-.165 G(Ps from)-2.75
E(the list that ha)97 568.8 Q .33 -.165(ve l)-.22 H -.275(ow).165 G
(er priorities.).275 E 19.5(3I)72 585.4 S 2.75(fo)-19.5 G
(nly one RP remains in the list, use that RP)-2.75 E(.)-1.221 E 19.5(4I)
72 602 S 2.75(fm)-19.5 G
(ultiple RPs are in the list, use the PIM hash function to choose one.)
-2.75 E(Thus if tw)72 618.6 Q 2.75(oo)-.11 G 2.75(rm)-2.75 G
(ore group-range-to-RP mappings co)-2.75 E -.165(ve)-.165 G 2.75(rap)
.165 G(articular group, the one with the)-2.75 E
(longest mask is the mapping to use.)72 631.6 Q(If the mappings ha)5.5 E
.33 -.165(ve t)-.22 H(he same mask length, then the one).165 E
(with the highest priority is chosen.)72 644.6 Q
(If there is more than one matching entry with the same)5.5 E(longest m\
ask and the priorities are identical, then a hash function \(see Sectio\
n 4.7.2\) is applied to)72 657.6 Q(choose the RP)72 670.6 Q(.)-1.221 E
(This algorithm is in)72 687.2 Q -.22(vo)-.44 G -.11(ke).22 G 2.75(db)
.11 G 2.75(yaD)-2.75 G 2.75(Rw)-2.75 G
(hen it needs to determine an RP for a gi)-2.75 E -.165(ve)-.275 G 2.75
(ng).165 G(roup, e.g. upon)-2.75 E(reception of a pack)72 700.2 Q
(et or IGMP membership indication for a group for which the DR does not)
-.11 E(kno)72 713.2 Q 2.75(wt)-.275 G(he RP)-2.75 E 5.5(.I)-1.221 G 2.75
(ti)-5.5 G 2.75(si)-2.75 G -2.09 -.44(nv o)-2.75 H -.11(ke).44 G 2.75
(db).11 G 2.75(ya)-2.75 G .33 -.165(ny r)-2.75 H
(outer that has \(*,*,RP\) state when a pack).165 E(et is recei)-.11 E
-.165(ve)-.275 G 2.75(df).165 G(or)-2.75 E .4 LW 555 717.7 555 727.7 DL
555 707.7 555 717.7 DL 555 697.7 555 707.7 DL 555 687.7 555 697.7 DL 555
677.7 555 687.7 DL 555 667.7 555 677.7 DL 555 657.7 555 667.7 DL 555
647.7 555 657.7 DL 555 637.7 555 647.7 DL 555 627.7 555 637.7 DL 555
617.7 555 627.7 DL 555 607.7 555 617.7 DL 555 597.7 555 607.7 DL 555
587.7 555 597.7 DL 555 577.7 555 587.7 DL 555 567.7 555 577.7 DL 555
557.7 555 567.7 DL 555 547.7 555 557.7 DL 555 537.7 555 547.7 DL 555
527.7 555 537.7 DL 555 517.7 555 527.7 DL 555 507.7 555 517.7 DL 555
497.7 555 507.7 DL 555 487.7 555 497.7 DL 555 477.7 555 487.7 DL 555
467.7 555 477.7 DL 555 457.7 555 467.7 DL 555 447.7 555 457.7 DL 555
447.1 555 457.1 DL(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385
E 160.971(elas Section)-.165 F 2.75(4.7.1. [P)2.75 F(age 69])-.165 E EP
%%Page: 70 70
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(which there is no corresponding \(S,G\) or \(*,G\) entry)72 85 Q 5.5
(.F)-.715 G(urthermore, the mapping function is)-5.5 E(in)72 98 Q -.22
(vo)-.44 G -.11(ke).22 G 2.75(db).11 G 2.75(ya)-2.75 G
(ll routers upon recei)-2.75 E
(ving a \(*,G\) or \(*,*,RP\) Join/Prune message.)-.275 E(Note that if \
the set of possible group-range-to-RP mappings changes, each router wil\
l need to)72 114.6 Q(check whether an)72 127.6 Q 2.75(ye)-.165 G
(xisting groups are af)-2.915 E 2.75(fected. This)-.275 F(may)2.75 E
2.75(,f)-.715 G(or e)-2.75 E(xample, cause a DR or acting DR)-.165 E/F1
10/Symbol SF<ef>555 139.6 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(to re-join a group, or cause it to re-start re)72 140.6 Q
(gister encapsulation to the ne)-.165 E 2.75(wR)-.275 G -1.221(P.)-2.75
G/F2 11/Times-Bold@0 SF 2.75(4.7.2. Hash)72 170.2 R(Function)2.75 E F0(\
The hash function is used by all routers within a domain, to map a grou\
p to one of the RPs from)72 186.8 Q
(the matching set of group-range-to-RP mappings \(this set all ha)72
199.8 Q .33 -.165(ve t)-.22 H(he same longest mask length).165 E
(and same highest priority\). The algorithm tak)72 212.8 Q
(es as input the group address, and the addresses of)-.11 E F1<ef>555
224.8 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(the candidate RPs from the mappings, and gi)72 225.8 Q -.165(ve)-.275 G
2.75(sa).165 G 2.75(so)-2.75 G(utput one RP address to be used.)-2.75 E
(The protocol requires that all routers hash to the same RP within a do\
main \(e)72 251.8 Q(xcept for transients\).)-.165 E(The follo)72 264.8 Q
(wing hash function must be used in each router:)-.275 E F1<ef>555 280.4
Q F0 19.5(1F)72 281.4 S(or RP addresses in the matching group-range-to-\
RP mappings, compute a v)-19.665 E(alue:)-.275 E -1.221(Va)97 300.4 S
(lue\(G,M,C\(i\)\)=)1.221 E(\(1103515245 * \(\(1103515245 * \(G&M\)+123\
45\) XOR C\(i\)\) + 12345\) mod 2^31)99.75 313.4 Q(where C\(i\) is the \
RP address and M is a hash-mask included in Bootstrap messages.)97 336 Q
(The)5.5 E(hash-mask allo)97 349 Q(ws a small number of consecuti)-.275
E .33 -.165(ve g)-.275 H(roups \(e.g., 4\) to al).165 E -.11(wa)-.11 G
(ys hash to the same).11 E(RP)97 362 Q 2.75(.F)-1.221 G
(or instance, hierarchically-encoded data can be sent on consecuti)
-2.915 E .33 -.165(ve g)-.275 H(roup addresses to).165 E
(get the same delay and f)97 375 Q(ate-sharing characteristics.)-.11 E
-.165(Fo)97 391.6 S 2.75(ra).165 G(ddress f)-2.75 E(amilies other than \
IPv4, a 32-bit digest to be used as C\(i\) and G must \214rst be)-.11 E
F1<ef>555 403.6 Q<ef>-4.94 -10 M F0(deri)97 404.6 Q -.165(ve)-.275 G
2.75(df).165 G(rom the actual RP or group address.)-2.75 E
(Such a digest method must be used)5.5 E
(consistently throughout the PIM domain. F)97 417.6 Q
(or IPv6 addresses, we recommend using the)-.165 E(equi)97 430.6 Q -.275
(va)-.275 G(lent IPv4 address for an IPv4-compatible address, and the e)
.275 E(xclusi)-.165 E -.165(ve)-.275 G(-or of each 32-bit).165 E(se)97
443.6 Q(gment of the address for all other IPv6 addresses.)-.165 E -.165
(Fo)5.5 G 2.75(re).165 G(xample, the digest of the IPv6)-2.915 E
(address 3f)97 456.6 Q(fe:b00:c18:1::10 w)-.275 E
(ould be computed as 0x3f)-.11 E(fe0b00 ^ 0x0c180001 ^ 0x00000000 ^)
-.275 E F1<ef>555 468.6 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M F0(0x00000010, where ^ represents the e)97 469.6 Q
(xclusi)-.165 E -.165(ve)-.275 G(-or operation.).165 E F1<ef>555 485.2 Q
F0 19.5(2T)72 486.2 S(he candidate RP with the highest resulting hash v)
-19.5 E(alue is then chosen as the RP for that)-.275 E
(group, and its identity and hash v)97 499.2 Q
(alue are stored with the entry created.)-.275 E F1<ef>555 514.8 Q F0
-.385(Ti)97 515.8 S(es between RPs ha).385 E(ving the same hash v)-.22 E
(alue are brok)-.275 E(en in adv)-.11 E(antage of the highest)-.275 E
(address.)97 528.8 Q F2(4.8.)72 558.4 Q/F3 13/Times-Bold@0 SF(Sour)5.5 E
(ce-Speci\214c Multicast)-.234 E F0(The Source-Speci\214c Multicast \(S\
SM\) service model [10] can be implemented with a strict subset)72 575 Q
(of the PIM-SM protocol mechanisms.)72 588 Q(Both re)5.5 E
(gular IP Multicast and SSM semantics can coe)-.165 E(xist)-.165 E(on a\
 single router and both can be implemented using the PIM-SM protocol.)72
601 Q 2.75(Ar)5.5 G(ange of multicast)-2.75 E
(addresses, currently 232.0.0.0/8 in IPv4, is reserv)72 614 Q
(ed for SSM, and the choice of semantics is)-.165 E
(determined by the multicast group address in both data pack)72 627 Q
(ets and PIM messages.)-.11 E F2 2.75(4.8.1. Pr)72 653 R
(otocol Modi\214cations f)-.198 E(or SSM destination addr)-.275 E(esses)
-.198 E F0(The follo)72 669.6 Q(wing rules o)-.275 E -.165(ve)-.165 G
(rride the normal PIM-SM beha).165 E
(vior for a multicast address G in the SSM)-.22 E(reserv)72 682.6 Q
(ed range:)-.165 E 7.15<8341>72 699.2 S(router MUST NO)-4.4 E 2.75(Ts)
-.44 G(end a \(*,G\) Join/Prune message for an)-2.75 E 2.75(yr)-.165 G
(eason.)-2.75 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
160.971(elas Section)-.165 F 2.75(4.8.1. [P)2.75 F(age 70])-.165 E EP
%%Page: 71 71
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E 7.15<8341>72 85 S
(router MUST NO)-4.4 E 2.75(Ts)-.44 G
(end an \(S,G,rpt\) Join/Prune message for an)-2.75 E 2.75(yr)-.165 G
(eason.)-2.75 E 7.15<8341>72 101.6 S(router MUST NO)-4.4 E 2.75(Ts)-.44
G(end a Re)-2.75 E(gister message for an)-.165 E 2.75(yp)-.165 G(ack)
-2.75 E(et that is destined to an SSM)-.11 E(address.)83 114.6 Q 7.15
<8341>72 131.2 S(router MUST NO)-4.4 E 2.75(Tf)-.44 G(orw)-2.75 E
(ard pack)-.11 E(ets based on \(*,G\) or \(S,G,rpt\) state.)-.11 E
(The \(*,G\) and)5.5 E
(\(S,G,rpt\) -related state summarization macros are NULL for an)83
144.2 Q 2.75(yS)-.165 G(SM address, for the purposes)-2.75 E(of pack)83
157.2 Q(et forw)-.11 E(arding.)-.11 E 7.15<8341>72 173.8 S
(router acting as an RP MUST NO)-4.4 E 2.75(Tf)-.44 G(orw)-2.75 E
(ard an)-.11 E 2.75(yR)-.165 G -.165(eg)-2.75 G(ister).165 E
(-encapsulated pack)-.22 E(et that has an)-.11 E
(SSM destination address.)83 186.8 Q(The last tw)72 203.4 Q 2.75(or)-.11
G(ules are present to deal with "le)-2.75 E -.055(ga)-.165 G -.165(cy)
.055 G 2.75("r).165 G(outers una)-2.75 E -.11(wa)-.165 G
(re of SSM that may be sending).11 E
(\(*,G\) and \(S,G,rpt\) Join/Prunes, or Re)72 216.4 Q
(gister messages for SSM destination addresses.)-.165 E(Additionally:)72
233 Q 7.15<8341>72 249.6 S(router MA)-4.4 E 2.75(Yb)-1.155 G 2.75(ec)
-2.75 G(on\214gured to adv)-2.75 E
(ertise itself as a Candidate RP for an SSM address.)-.165 E(If so, it)
5.5 E(SHOULD respond with a Re)83 262.6 Q(gister)-.165 E
(-Stop message to an)-.22 E 2.75(yR)-.165 G -.165(eg)-2.75 G
(ister message containing a pack).165 E(et)-.11 E
(destined for an SSM address.)83 275.6 Q 7.15<8341>72 292.2 S(router MA)
-4.4 E 2.75(Yo)-1.155 G(ptimize out the creation and maintenance of \(S\
,G,rpt\) and \(*,G\) state for SSM)-2.75 E
(destination addresses -- this state is not needed for SSM pack)83 305.2
Q(ets.)-.11 E/F1 11/Times-Bold@0 SF 2.75(4.8.2. PIM-SSM-only)72 331.2 R
(Routers)2.75 E F0(An implementor may choose to implement only the subs\
et of PIM Sparse-Mode that pro)72 347.8 Q(vides)-.165 E(SSM forw)72
360.8 Q(arding semantics.)-.11 E 2.75(AP)72 377.4 S
(IM-SSM-only router MUST implement the follo)-2.75 E
(wing portions of this speci\214cation:)-.275 E 18.15<8355>72 397.6 S
(pstream \(S,G\) state machine \(Section 4.4.7\))-18.15 E 18.15<8344>72
414.2 S -.275(ow)-18.15 G
(nstream \(S,G\) state machine \(Section 4.4.3\)).275 E 18.15<8328>72
430.8 S(S,G\) Assert state machine \(Section 4.5.1\))-18.15 E 18.15
<8348>72 447.4 S(ello messages, neighbor disco)-18.15 E -.165(ve)-.165 G
(ry and DR election \(Section 4.6\)).165 E 18.15<8350>72 464 S(ack)
-18.315 E(et forw)-.11 E(arding rules \(Section 4.2\))-.11 E 2.75(AP)72
480.6 S(IM-SSM-only router does not need to implement the follo)-2.75 E
(wing protocol elements:)-.275 E 18.15<8352>72 500.8 S -.165(eg)-18.15 G
(ister state machine \(Section 4.3\)).165 E 18.15<8328>72 517.4 S
(*,G\), \(S,G,rpt\) and \(*,*,RP\) Do)-18.15 E
(wnstream state machines \(Sections 4.4.2, 4.4.4, and 4.4.1\))-.275 E
18.15<8328>72 534 S(*,G\), \(S,G,rpt\), and \(*,*,RP\) Upstream state m\
achines \(Sections 4.4.6, 4.4.8, and 4.4.5\))-18.15 E 18.15<8328>72
550.6 S(*,G\) Assert state machine \(Section 4.5.2\))-18.15 E 18.15
<8342>72 567.2 S(ootstrap RP Election \(Section 4.7\))-18.15 E 18.15
<834b>72 583.8 S(eepali)-18.425 E .33 -.165(ve T)-.275 H(imer)-.22 E
18.15<8353>72 600.4 S(ptBit \(Section 4.2.2\))-18.15 E(The)72 617 Q/F2
11/Courier@0 SF(KeepaliveTimer)2.75 E F0(should be treated as al)2.75 E
-.11(wa)-.11 G(ys running and).11 E F2(SptBit)2.75 E F0
(should be treated as)2.75 E(being al)72 630 Q -.11(wa)-.11 G
(ys set for an SSM address.).11 E(Additionally)5.5 E 2.75(,t)-.715 G
(he P)-2.75 E(ack)-.165 E(et forw)-.11 E(arding rules of Section 4.2)
-.11 E(can be simpli\214ed in a PIM-SSM-only router:)72 643 Q
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.8.2. [P)2.75 F(age 71])-.165 E EP
%%Page: 72 72
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF(if\( iif ==\
 RPF_interface\(S\) AND UpstreamJPState\(S,G\) == Joined \) {)98.4 85 Q
(oiflist = inherited_olist\(S,G\))124.8 98 Q 6.6(}e)98.4 111 S
(lse if\( iif is in inherited_olist\(S,G\) \) {)-6.6 E
(send Assert\(S,G\) on iif)124.8 124 Q(})98.4 137 Q
(oiflist = oiflist \(-\) iif)98.4 163 Q
(forward packet on all interfaces in oiflist)98.4 176 Q F0
(This is nothing more than the reduction of the normal PIM-SM forw)72
208 Q(arding rule, with all \(S,G,rpt\))-.11 E
(and \(*,G\) clauses replaced with NULL.)72 221 Q/F2 11/Times-Bold@0 SF
(4.9.)72 247 Q/F3 13/Times-Bold@0 SF(PIM P)5.5 E(ack)-.13 E(et F)-.13 E
(ormats)-.325 E F0(This section describes the details of the pack)72
263.6 Q(et formats for PIM control messages.)-.11 E
(All PIM control messages ha)72 280.2 Q .33 -.165(ve I)-.22 H 2.75(Pp)
.165 G(rotocol number 103.)-2.75 E
(PIM messages are either unicast \(e.g.)72 296.8 Q(Re)5.5 E
(gisters and Re)-.165 E(gister)-.165 E
(-Stop\), or multicast with TTL 1 to)-.22 E(the `)72 309.8 Q(ALL-PIM-R)
-.88 E(OUTERS' group \(e.g. Join/Prune, Asserts, etc.\).)-.44 E
(The source address used for)5.5 E(unicast messages is a domain-wide re\
achable address; the source address used for multicast)72 322.8 Q/F4 10
/Symbol SF<ef>555 334.8 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(messages is the link-local address of the interf)72 335.8 Q
(ace on which the message is being sent.)-.11 E(The IPv4 `)72 352.4 Q
(ALL-PIM-R)-.88 E(OUTERS' group is `224.0.0.13'.)-.44 E(The IPv6 `)5.5 E
(ALL-PIM-R)-.88 E(OUTERS' group)-.44 E F4<ef>555 364.4 Q<ef>-4.94 -10 M
F0(is `f)72 365.4 Q(f02::d'.)-.275 E F1 125.4(0123)78.6 384.4 S 6.6
(01234567890123456789012345678901)78.6 397.4 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
410.4 Q(|PIM Ver| Type)72 423.4 Q 19.8(|R)13.2 G 19.8(eserved |)-19.8 F
72.6(Checksum |)72.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
436.4 Q F2(PIM V)72 459 Q(er)-1.1 E F0(PIM V)97 472 Q
(ersion number is 2.)-1.221 E F2 -.814(Ty)72 488.6 S(pe).814 E F0 -.88
(Ty)97 501.6 S(pes for speci\214c PIM messages.).88 E(PIM T)5.5 E
(ypes are:)-.88 E(Message T)72 524.2 Q 120.736(ype Destination)-.88 F
.44 LW 417.334 528.95 72 528.95 DL 2.75(0=H)72 539.2 S 142.054
(ello Multicast)-2.75 F(to ALL-PIM-R)2.75 E(OUTERS)-.44 E 2.75(1=R)72
552.2 S -.165(eg)-2.75 G 129.998(ister Unicast).165 F(to RP)2.75 E 2.75
(2=R)72 565.2 S -.165(eg)-2.75 G(ister).165 E 106.381(-Stop Unicast)-.22
F(to source of Re)2.75 E(gister pack)-.165 E(et)-.11 E 2.75(3=J)72 578.2
S 119.438(oin/Prune Multicast)-2.75 F(to ALL-PIM-R)2.75 E(OUTERS)-.44 E
2.75(4=B)72 591.2 S 123.717(ootstrap Multicast)-2.75 F(to ALL-PIM-R)2.75
E(OUTERS)-.44 E 2.75(5=A)72 604.2 S 138.391(ssert Multicast)-2.75 F
(to ALL-PIM-R)2.75 E(OUTERS)-.44 E 2.75(6=G)72 617.2 S
(raft \(used in PIM-DM only\))-2.75 E(Multicast to ALL-PIM-R)38.489 E
(OUTERS)-.44 E 2.75(7=G)72 630.2 S(raft-Ack \(used in PIM-DM only\))
-2.75 E(Unicast to source of Graft pack)16.5 E(et)-.11 E 2.75(8=C)72
643.2 S(andidate-RP-Adv)-2.75 E 36.509(ertisement Unicast)-.165 F
(to Domain')2.75 E 2.75(sB)-.605 G(SR)-2.75 E F2(Reser)72 665.8 Q -.11
(ve)-.11 G(d).11 E F0(Set to zero on transmission.)97 678.8 Q
(Ignored upon receipt.)5.5 E F2(Checksum)72 708.4 Q F4<ef>555 720.4 Q .4
LW 555 724.9 555 734.9 DL 555 714.9 555 724.9 DL 555 710.9 555 720.9 DL
F0(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 169.221
(elas Section)-.165 F 2.75(4.9. [P)2.75 F(age 72])-.165 E EP
%%Page: 73 73
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E
(The checksum is a standard IP checksum, i.e.)97 85 Q(the 16-bit one')
5.5 E 2.75(sc)-.605 G(omplement of the one')-2.75 E(s)-.605 E
(complement sum of the entire PIM message, e)97 98 Q
(xcluding the data portion in the Re)-.165 E(gister)-.165 E 2.75
(message. F)97 111 R
(or computing the checksum, the checksum \214eld is zeroed.)-.165 E
-.165(Fo)97 127.6 S 2.75(rI).165 G(Pv6, the checksum also includes the \
IPv6 "pseudo-header", as speci\214ed in RFC 2460,)-2.75 E(section 8.1 [\
9]. This "pseudo-header" is prepended to the PIM header for the purpose\
s of)97 140.6 Q(calculating the checksum.)97 153.6 Q(The "Upper)5.5 E
(-Layer P)-.22 E(ack)-.165 E(et Length" in the pseudo-header is set to)
-.11 E(the length of the PIM message.)97 166.6 Q(The Ne)5.5 E
(xt Header v)-.165 E(alue used in the pseudo-header is 103.)-.275 E(If)
5.5 E(the pack)97 179.6 Q(et')-.11 E 2.75(sl)-.605 G
(ength is not an inte)-2.75 E(gral number of 16-bit w)-.165 E
(ords, the pack)-.11 E(et is padded with a)-.11 E/F1 10/Symbol SF<ef>555
191.6 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(byte of zero before performing the checksum.)97 192.6 Q/F2 11
/Times-Bold@0 SF 2.75(4.9.1. Encoded)72 231.6 R(Sour)2.75 E(ce and Gr)
-.198 E(oup Addr)-.198 E(ess F)-.198 E(ormats)-.275 E
(Encoded-Unicast addr)72 261.2 Q(ess)-.198 E F0
(An Encoded-Unicast address tak)72 277.8 Q(es the follo)-.11 E
(wing format:)-.275 E/F3 11/Courier@0 SF 125.4(0123)78.6 296.8 S 6.6
(01234567890123456789012345678901)78.6 309.8 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
322.8 Q 13.2(|A)72 335.8 S(ddr Family)-13.2 E 6.6(|E)13.2 G
(ncoding Type |)-6.6 E(Unicast Address)33 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...)72 348.8 Q F2
(Addr F)72 371.4 Q(amily)-.275 E F1<ef>555 383.4 Q F0(The PIM address f)
97 384.4 Q(amily of the `Unicast Address' \214eld of this address.)-.11
E -1.221(Va)97 401 S(lues of 0-127 are as assigned by the IAN)1.221 E
2.75(Af)-.385 G(or Internet Address F)-2.75 E(amilies in [5]. V)-.165 E
(alues)-1.221 E(128-250 are reserv)97 414 Q
(ed to be assigned by the IAN)-.165 E 2.75(Af)-.385 G
(or PIM-speci\214c Address F)-2.75 E(amilies.)-.165 E -1.221(Va)97 427 S
(lues 251 though 255 are designated for pri)1.221 E -.275(va)-.275 G
(te use.).275 E(As there is no assignment authority)5.5 E
(for this space, collisions should be e)97 440 Q(xpected.)-.165 E F2
(Encoding T)72 456.6 Q(ype)-.814 E F0
(The type of encoding used within a speci\214c Address F)97 469.6 Q
(amily)-.165 E 5.5(.T)-.715 G(he v)-5.5 E(alue `0' is reserv)-.275 E
(ed for)-.165 E(this \214eld, and represents the nati)97 482.6 Q .33
-.165(ve e)-.275 H(ncoding of the Address F).165 E(amily)-.165 E(.)-.715
E F2(Unicast Addr)72 512.2 Q(ess)-.198 E F0
(The unicast address as represented by the gi)97 525.2 Q -.165(ve)-.275
G 2.75(nA).165 G(ddress F)-2.75 E(amily and Encoding T)-.165 E(ype.)-.88
E F2(Encoded-Gr)72 564.2 Q(oup addr)-.198 E(ess)-.198 E F0
(Encoded-Group addresses tak)72 580.8 Q 2.75(et)-.11 G(he follo)-2.75 E
(wing format:)-.275 E F3 125.4(0123)78.6 599.8 S 6.6
(01234567890123456789012345678901)78.6 612.8 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
625.8 Q 13.2(|A)72 638.8 S(ddr Family)-13.2 E 6.6(|E)13.2 G
(ncoding Type |B| Reserved)-6.6 E 6.6(|Z| Mask)13.2 F 26.4(Len |)6.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
651.8 Q 105.6(|G)72 664.8 S(roup multicast Address)-105.6 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...)72 677.8 Q F2(Addr F)72 700.4
Q(amily)-.275 E F0(described abo)97 713.4 Q -.165(ve)-.165 G(.).165 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.9.1. [P)2.75 F(age 73])-.165 E EP
%%Page: 74 74
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF
(Encoding T)72 85 Q(ype)-.814 E F0(described abo)97 98 Q -.165(ve)-.165
G(.).165 E F1([B]idir)72 127.6 Q(ectional PIM)-.198 E F0
(indicates the group range should use Bidirectional PIM [6]. F)97 140.6
Q(or PIM-SM de\214ned in this)-.165 E
(speci\214cation, this bit MUST be zero.)97 153.6 Q F1(Reser)72 183.2 Q
-.11(ve)-.11 G(d).11 E F0 -.385(Tr)97 196.2 S
(ansmitted as zero. Ignored upon receipt.).385 E F1(Admin Scope [Z]one)
72 225.8 Q F0(indicates the group range is an admin scope zone.)97 238.8
Q(This is used in the Bootstrap Router)5.5 E(Mechanism [4] only)97 251.8
Q 5.5(.F)-.715 G
(or all other purposes, this bit is set to zero and ignored on receipt.)
-5.665 E F1(Mask Len)72 281.4 Q F0
(The Mask length \214eld is 8 bits. The v)97 294.4 Q
(alue is the number of contiguous one bits left justi\214ed)-.275 E(use\
d as a mask which, combined with the group address, describes a range o\
f groups. It is)97 307.4 Q
(less than or equal to the address length in bits for the gi)97 320.4 Q
-.165(ve)-.275 G 2.75(nA).165 G(ddress F)-2.75 E(amily and Encoding)
-.165 E -.88(Ty)97 333.4 S(pe. If the message is sent for a single grou\
p then the Mask length must equal the address).88 E
(length in bits for the gi)97 346.4 Q -.165(ve)-.275 G 2.75(nA).165 G
(ddress F)-2.75 E(amily and Encoding T)-.165 E 2.75(ype. \(e.g.)-.88 F
(32 for IPv4 nati)2.75 E -.165(ve)-.275 G
(encoding and 128 for IPv6 nati)97 359.4 Q .33 -.165(ve e)-.275 H
(ncoding\).).165 E F1(Gr)72 389 Q(oup multicast Addr)-.198 E(ess)-.198 E
F0(Contains the group address.)97 402 Q F1(Encoded-Sour)72 441 Q
(ce addr)-.198 E(ess)-.198 E F0(Encoded-Source address tak)72 457.6 Q
(es the follo)-.11 E(wing format:)-.275 E/F2 11/Courier@0 SF 125.4(0123)
78.6 476.6 S 6.6(01234567890123456789012345678901)78.6 489.6 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
502.6 Q 6.6(|A)72 515.6 S(ddr Family)-6.6 E 6.6(|E)19.8 G
(ncoding Type | Rsrvd)-6.6 E 6.6(|S|W|R| Mask)19.8 F 26.4(Len |)6.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
528.6 Q 158.4(|S)72 541.6 S(ource Address)-158.4 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-...)72 554.6 Q F1(Addr F)72 577.2 Q
(amily)-.275 E F0(described abo)97 590.2 Q -.165(ve)-.165 G(.).165 E F1
(Encoding T)72 619.8 Q(ype)-.814 E F0(described abo)97 632.8 Q -.165(ve)
-.165 G(.).165 E F1(Reser)72 662.4 Q -.11(ve)-.11 G(d).11 E F0 -.385(Tr)
97 675.4 S(ansmitted as zero, ignored on receipt.).385 E F1(S)72 705 Q
F0(The Sparse bit is a 1 bit v)18.884 E(alue, set to 1 for PIM-SM.)-.275
E(It is used for PIM v)5.5 E(ersion 1)-.165 E(compatibility)97 718 Q(.)
-.715 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.9.1. [P)2.75 F(age 74])-.165 E EP
%%Page: 75 75
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(W)72 85 Q
F0(The WC \(or W)14 E(ildCard\) bit is a 1 bit v)-.44 E
(alue for use with PIM Join/Prune messages \(see)-.275 E/F2 10/Symbol SF
<ef>555 97 Q<ef>-4.94 -10 M F0(section 4.9.5.1 \).)97 98 Q F1(R)72 127.6
Q F0(The RPT \(or Rendezv)17.058 E(ous Point T)-.22 E
(ree\) bit is a 1 bit v)-.385 E(alue for use with PIM Join/Prune)-.275 E
F2<ef>555 139.6 Q<ef>-4.94 -10 M F0(messages \(see section 4.9.5.1 \). \
If the WC bit is 1, the RPT bit MUST be 1.)97 140.6 Q F1(Mask Len)72
170.2 Q F0(The mask length \214eld is 8 bits. The v)97 183.2 Q
(alue is the number of contiguous one bits left justi\214ed)-.275 E(use\
d as a mask which, combined with the Source Address, describes a source\
 subnet. The)97 196.2 Q
(mask length MUST be equal to the mask length in bits for the gi)97
209.2 Q -.165(ve)-.275 G 2.75(nA).165 G(ddress F)-2.75 E(amily and)-.165
E(Encoding T)97 222.2 Q(ype \(32 for IPv4 nati)-.88 E .33 -.165(ve a)
-.275 H(nd 128 for IPv6 nati).165 E -.165(ve)-.275 G 2.75(\). A).165 F
(router SHOULD ignore an)2.75 E(y)-.165 E(messages recei)97 235.2 Q
-.165(ve)-.275 G 2.75(dw).165 G(ith an)-2.75 E 2.75(yo)-.165 G
(ther mask length.)-2.75 E F1(Sour)72 264.8 Q(ce Addr)-.198 E(ess)-.198
E F0(The source address.)97 277.8 Q F1 2.75(4.9.2. Hello)72 316.8 R
(Message F)2.75 E(ormat)-.275 E F0
(It is sent periodically by routers on all interf)72 333.4 Q(aces.)-.11
E/F3 11/Courier@0 SF 125.4(0123)78.6 352.4 S 6.6
(01234567890123456789012345678901)78.6 365.4 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
378.4 Q(|PIM Ver| Type)72 391.4 Q 19.8(|R)13.2 G 19.8(eserved |)-19.8 F
72.6(Checksum |)72.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
404.4 Q 66(|O)72 417.4 S 66(ptionType |)-66 F 59.4(OptionLength |)59.4 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
430.4 Q 171.6(|O)72 443.4 S 165(ptionValue |)-171.6 F 198(|.)72 456.4 S
191.4(.. |)-198 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
469.4 Q 204.6(|.|)72 482.4 S 204.6(|.|)72 495.4 S 204.6(|.|)72 508.4 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
521.4 Q 66(|O)72 534.4 S 66(ptionType |)-66 F 59.4(OptionLength |)59.4 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
547.4 Q 171.6(|O)72 560.4 S 165(ptionValue |)-171.6 F 198(|.)72 573.4 S
191.4(.. |)-198 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
586.4 Q F1(PIM V)72 609 Q(ersion, T)-1.1 E(ype, Reser)-.814 E -.11(ve)
-.11 G(d, Checksum).11 E F0(Described abo)97 622 Q -.165(ve)-.165 G(.)
.165 E F1(OptionT)72 651.6 Q(ype)-.814 E F0(The type of the option gi)97
664.6 Q -.165(ve)-.275 G 2.75(ni).165 G 2.75(nt)-2.75 G(he follo)-2.75 E
(wing OptionV)-.275 E(alue \214eld.)-1.221 E F1(OptionLength)72 694.2 Q
F0(The length of the OptionV)97 707.2 Q(alue \214eld in bytes.)-1.221 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.9.2. [P)2.75 F(age 75])-.165 E EP
%%Page: 76 76
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(OptionV)
72 85 Q(alue)-1.012 E F0 2.75(Av)97 98 S
(ariable length \214eld, carrying the v)-3.025 E(alue of the option.)
-.275 E(The Option \214elds may contain the follo)97 114.6 Q(wing v)
-.275 E(alues:)-.275 E 7.15<834f>97 131.2 S(ptionT)-7.15 E
(ype 1: Hold T)-.88 E(ime)-.385 E/F2 11/Courier@0 SF 125.4(0123)114.6
150.2 S 6.6(01234567890123456789012345678901)114.6 163.2 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
176.2 Q 66(|T)108 189.2 S(ype = 1)-66 E 59.4(|L)85.8 G(ength = 2)-59.4 E
(|)79.2 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
202.2 Q 59.4(|H)108 215.2 S(old Time)-59.4 E(|)85.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108 228.2 Q F0(Hold T)108 247.2 Q
(ime is the amount of time a recei)-.385 E -.165(ve)-.275 G 2.75(rm).165
G(ust k)-2.75 E(eep the neighbor reachable, in seconds.)-.11 E
(If the Holdtime is set to `0xf)108 260.2 Q -1.595 -.275(fff ')-.275 H
2.75(,t).275 G(he recei)-2.75 E -.165(ve)-.275 G 2.75(ro).165 G 2.75(ft)
-2.75 G(his message ne)-2.75 E -.165(ve)-.275 G 2.75(rt).165 G
(imes out the)-2.75 E(neighbor)108 273.2 Q 2.75(.T)-.605 G
(his may be used with dial-on-demand links, to a)-2.75 E -.22(vo)-.22 G
(id k).22 E(eeping the link up with)-.11 E(periodic Hello messages.)108
286.2 Q(Hello messages with a Holdtime v)108 312.2 Q
(alue set to `0' are also sent by a router on an interf)-.275 E(ace)-.11
E(about to go do)108 325.2 Q
(wn or changing IP address \(see section 4.6.1\). These are ef)-.275 E
(fecti)-.275 E -.165(ve)-.275 G(ly).165 E(goodb)108 338.2 Q
(uy messages and the recei)-.22 E
(ving routers should immediately time out the neighbor)-.275 E
(information for the sender)108 351.2 Q(.)-.605 E 7.15<834f>97 367.8 S
(ptionT)-7.15 E(ype 2: LAN Prune Delay)-.88 E F2 125.4(0123)114.6 386.8
S 6.6(01234567890123456789012345678901)114.6 399.8 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
412.8 Q 66(|T)108 425.8 S(ype = 2)-66 E 59.4(|L)85.8 G(ength = 4)-59.4 E
(|)79.2 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
438.8 Q 46.2(|T| LAN)108 451.8 R 72.6(Delay |)6.6 F(Override Interval)
39.6 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
464.8 Q F0(The LAN_Prune_Delay option is used to tune the prune propag)
108 483.8 Q(ation delay on multi-)-.055 E(access LANs.)108 496.8 Q(The \
T bit speci\214es the ability of the sending router to disable joins su\
ppression.)97 513.4 Q(LAN Delay and Ov)97 530 Q(erride Interv)-.165 E
(al are time interv)-.275 E
(als in units of milliseconds are are used to)-.275 E(tune the v)97 543
Q(alue of the J/P Ov)-.275 E(erride Interv)-.165 E(al and its deri)-.275
E -.165(ve)-.275 G 2.75(dt).165 G(imer v)-2.75 E(alues. Section 4.6.3)
-.275 E(describes ho)97 556 Q 2.75(wt)-.275 G(hese v)-2.75 E(alues af)
-.275 E(fect the beha)-.275 E(viour of a router)-.22 E(.)-.605 E 7.15
<834f>97 572.6 S(ptionT)-7.15 E(ype 3 to 16: reserv)-.88 E
(ed to be de\214ned in future v)-.165 E(ersions of this document.)-.165
E 7.15<834f>97 589.2 S(ptionT)-7.15 E
(ype 18: deprecated and should not be used.)-.88 E 7.15<834f>97 605.8 S
(ptionT)-7.15 E(ype 19: DR Priority)-.88 E F2 125.4(0123)114.6 624.8 S
6.6(01234567890123456789012345678901)114.6 637.8 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
650.8 Q 66(|T)108 663.8 S(ype = 19)-66 E 59.4(|L)79.2 G(ength = 4)-59.4
E(|)79.2 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
676.8 Q 165(|D)108 689.8 S 6.6(RP)-165 G 171.6(riority |)-6.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
702.8 Q F0(DR Priority is a 32-bit unsigned number and should be consid\
ered in the DR election as)108 721.8 Q(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(4.9.2. [P)2.75 F(age 76])-.165 E EP
%%Page: 77 77
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(described in section 4.6.2.)108
85 Q 7.15<834f>97 101.6 S(ptionT)-7.15 E(ype 20: Generation ID)-.88 E/F1
11/Courier@0 SF 125.4(0123)114.6 120.6 S 6.6
(01234567890123456789012345678901)114.6 133.6 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
146.6 Q 66(|T)108 159.6 S(ype = 20)-66 E 59.4(|L)79.2 G(ength = 4)-59.4
E(|)79.2 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
172.6 Q 151.8(|G)108 185.6 S(eneration ID)-151.8 E(|)178.2 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)108
198.6 Q F0(Generation ID is a random 32-bit v)108 217.6 Q
(alue for the interf)-.275 E(ace on which the Hello message is)-.11 E
2.75(sent. The)108 230.6 R(Generation ID is re)2.75 E(generated whene)
-.165 E -.165(ve)-.275 G 2.75(rP).165 G(IM forw)-2.75 E
(arding is started or restarted)-.11 E(on the interf)108 243.6 Q(ace.)
-.11 E(OptionT)97 260.2 Q(ypes 17 thru 65000 are assigned by the IAN)
-.88 E 2.75(A. OptionT)-.385 F(ypes 65001 through 65535)-.88 E
(are reserv)97 273.2 Q(ed for Pri)-.165 E -.275(va)-.275 G
(te Use, as de\214ned in [7].).275 E(Unkno)97 286.2 Q
(wn options may be ignored.)-.275 E(The "Hold T)5.5 E
(ime" option MUST be implemented; the)-.385 E
("DR Priority" and "Generation ID" options SHOULD be implemented.)97
299.2 Q/F2 11/Times-Bold@0 SF 2.75(4.9.3. Register)72 338.2 R(Message F)
2.75 E(ormat)-.275 E F0 2.75(AR)72 354.8 S -.165(eg)-2.75 G(ister messa\
ge is sent by the DR or a PMBR to the RP when a multicast pack).165 E
(et needs to be)-.11 E(transmitted on the RP-tree.)72 367.8 Q
(The IP source address is set to the address of the DR, the destination)
5.5 E/F3 10/Symbol SF<ef>555 379.8 Q<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(address to the RP')72 380.8 Q 2.75(sa)-.605 G 2.75(ddress. The)-2.75 F
(IP TTL of the PIM pack)2.75 E(et is the system')-.11 E 2.75(sn)-.605 G
(ormal unicast TTL.)-2.75 E F1 125.4(0123)78.6 399.8 S 6.6
(01234567890123456789012345678901)78.6 412.8 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
425.8 Q(|PIM Ver| Type)72 438.8 Q 19.8(|R)13.2 G 19.8(eserved |)-19.8 F
72.6(Checksum |)72.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
451.8 Q 145.2(|B|N| Reserved2)72 464.8 R(|)178.2 E F3<ef>555 476.8 Q<ef>
-4.94 -10 M F1
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
477.8 Q 415.8(||)72 490.8 S 138.6(.M)72 503.8 S(ulticast data packet)
-138.6 E(.)138.6 E F3<ef>555 515.8 Q<ef>-4.94 -10 M F1 415.8(||)72 516.8
S(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
529.8 Q F2(PIM V)72 552.4 Q(ersion, T)-1.1 E(ype, Reser)-.814 E -.11(ve)
-.11 G(d, Checksum).11 E F0(Described abo)97 565.4 Q -.165(ve)-.165 G
2.75(.N).165 G(ote that the checksum for Re)-2.75 E
(gisters is done only on \214rst 8 bytes of)-.165 E(pack)97 578.4 Q
(et, including the PIM header and the ne)-.11 E(xt 4 bytes, e)-.165 E
(xcluding the data pack)-.165 E(et portion.)-.11 E -.165(Fo)97 591.4 S
2.75(ri).165 G
(nteroperability reasons, a message carrying a checksum calculated o)
-2.75 E -.165(ve)-.165 G 2.75(rt).165 G(he entire PIM)-2.75 E(re)97
604.4 Q(gister message should be accepted.)-.165 E F2(B)72 634 Q F0(The\
 Border bit. If the router is a DR for a source that it is directly con\
nected to, it sets the B)17.663 E(bit to 0. If the router is a PMBR for\
 a source in a directly connected cloud, it sets the B bit)97 647 Q
(to 1.)97 660 Q F2(N)72 689.6 Q F0(The Null-Re)17.058 E
(gister bit. Set to 1 by a DR that is probing the RP before e)-.165 E
(xpiring its local)-.165 E(Re)97 702.6 Q(gister)-.165 E
(-Suppression timer)-.22 E 2.75(.S)-.605 G(et to 0 otherwise.)-2.75 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.9.3. [P)2.75 F(age 77])-.165 E EP
%%Page: 78 78
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(Reser)72
85 Q -.11(ve)-.11 G(d2).11 E F0 -.385(Tr)97 98 S
(ansmitted as zero, ignored on receipt.).385 E F1(Multicast data pack)72
127.6 Q(et)-.11 E F0(The original pack)97 140.6 Q
(et sent by the source.)-.11 E(This pack)5.5 E
(et must be the of the same address f)-.11 E(amily)-.11 E
(as the encapsulating PIM pack)97 153.6 Q(et, e.g. an IPv6 data pack)
-.11 E(et must be encapsulated in an IPv6)-.11 E(PIM pack)97 166.6 Q
2.75(et. Note)-.11 F(that the TTL of the original pack)2.75 E
(et is decremented before encapsulation,)-.11 E(just lik)97 179.6 Q 2.75
(ea)-.11 G .33 -.165(ny o)-2.75 H(ther pack).165 E(et that is forw)-.11
E 2.75(arded. In)-.11 F(addition, the RP decrements the TTL after)2.75 E
/F2 10/Symbol SF<ef>555 191.6 Q<ef>-4.94 -10 M<ef>-4.94 -10 M F0
(decapsulating, before forw)97 192.6 Q(arding the pack)-.11 E(et do)-.11
E(wn the shared tree.)-.275 E -.165(Fo)97 209.2 S 2.75(r\().165 G
(S,G\) null Re)-2.75 E(gisters, the Multicast data pack)-.165 E
(et portion contains only a dummy header)-.11 E(with S as the source ad\
dress, G as the destination address, and a data length of zero.)97 222.2
Q F1 2.75(4.9.4. Register)72 261.2 R(-Stop Message F)-.407 E(ormat)-.275
E F0 2.75(AR)72 277.8 S -.165(eg)-2.75 G(ister).165 E
(-Stop is unicast from the RP to the sender of the Re)-.22 E
(gister message.)-.165 E(The IP source)5.5 E
(address is the address to which the re)72 290.8 Q(gister w)-.165 E
(as addressed.)-.11 E(The IP destination address is the)5.5 E
(source address of the re)72 303.8 Q(gister message.)-.165 E/F3 11
/Courier@0 SF 125.4(0123)78.6 322.8 S 6.6
(01234567890123456789012345678901)78.6 335.8 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
348.8 Q(|PIM Ver| Type)72 361.8 Q 19.8(|R)13.2 G 19.8(eserved |)-19.8 F
72.6(Checksum |)72.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
374.8 Q 85.8(|G)72 387.8 S(roup Address \(Encoded-Group format\))-85.8 E
(|)92.4 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
400.8 Q 79.2(|S)72 413.8 S(ource Address \(Encoded-Unicast format\))
-79.2 E(|)79.2 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
426.8 Q F1(PIM V)72 449.4 Q(ersion, T)-1.1 E(ype, Reser)-.814 E -.11(ve)
-.11 G(d, Checksum).11 E F0(Described abo)97 462.4 Q -.165(ve)-.165 G(.)
.165 E F1(Gr)72 492 Q(oup Addr)-.198 E(ess)-.198 E F0
(The group address from the multicast data pack)97 505 Q(et in the Re)
-.11 E(gister)-.165 E 5.5(.F)-.605 G(ormat described in)-5.665 E
(section 4.9.1. Note that for Re)97 518 Q(gister)-.165 E
(-Stops the Mask Len \214eld contains the full address)-.22 E
(length * 8 \(e.g. 32 for IPv4 nati)97 531 Q .33 -.165(ve e)-.275 H
(ncoding\), if the message is sent for a single group.).165 E F1(Sour)72
560.6 Q(ce Addr)-.198 E(ess)-.198 E F0
(The host address of the source from the multicast data pack)97 573.6 Q
(et in the re)-.11 E(gister)-.165 E 5.5(.T)-.605 G(he format for)-5.5 E
(this address is gi)97 586.6 Q -.165(ve)-.275 G 2.75(ni).165 G 2.75(nt)
-2.75 G
(he Encoded-Unicast address in section 4.9.1. A special wild card)-2.75
E -.275(va)97 599.6 S(lue consisting of an address \214eld of all zeroe\
s can be used to indicate an).275 E 2.75(ys)-.165 G(ource.)-2.75 E F1
2.75(4.9.5. J)72 638.6 R(oin/Prune Message F)-.165 E(ormat)-.275 E F0
2.75(AJ)72 655.2 S(oin/Prune message is sent by routers to)-2.75 E -.11
(wa)-.275 G(rds upstream sources and RPs.).11 E(Joins are sent to)5.5 E
-.22(bu)72 668.2 S(ild shared trees \(RP trees\) or source trees \(SPT\
\). Prunes are sent to prune source trees when).22 E(members lea)72
681.2 Q .33 -.165(ve g)-.22 H
(roups as well as sources that do not use the shared tree.).165 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.9.5. [P)2.75 F(age 78])-.165 E EP
%%Page: 79 79
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Courier@0 SF 125.4(0123)
78.6 85 S 6.6(01234567890123456789012345678901)78.6 98 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
111 Q(|PIM Ver| Type)72 124 Q 19.8(|R)13.2 G 19.8(eserved |)-19.8 F 72.6
(Checksum |)72.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
137 Q 52.8(|U)72 150 S
(pstream Neighbor Address \(Encoded-Unicast format\))-52.8 E(|)33 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
163 Q 13.2(|R)72 176 S 26.4(eserved |)-13.2 F(Num groups)6.6 E 66(|H)
26.4 G 79.2(oldtime |)-66 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
189 Q 59.4(|M)72 202 S
(ulticast Group Address 1 \(Encoded-Group format\))-59.4 E(|)39.6 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
215 Q 19.8(|N)72 228 S(umber of Joined Sources)-19.8 E 19.8(|N)26.4 G
(umber of Pruned Sources)-19.8 E(|)26.4 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
241 Q 52.8(|J)72 254 S(oined Source Address 1 \(Encoded-Source format\))
-52.8 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
267 Q -171.6 191.4(|. |)72 280 T -171.6 191.4(|. |)72 293 T
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
306 Q 52.8(|J)72 319 S(oined Source Address n \(Encoded-Source format\))
-52.8 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
332 Q 52.8(|P)72 345 S(runed Source Address 1 \(Encoded-Source format\))
-52.8 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
358 Q -171.6 191.4(|. |)72 371 T -171.6 191.4(|. |)72 384 T
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
397 Q 52.8(|P)72 410 S(runed Source Address n \(Encoded-Source format\))
-52.8 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
423 Q -132 178.2(|. |)72 436 T -132 178.2(|. |)72 449 T -132 178.2(|. |)
72 462 T
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
475 Q 59.4(|M)72 488 S
(ulticast Group Address m \(Encoded-Group format\))-59.4 E(|)39.6 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
501 Q 19.8(|N)72 514 S(umber of Joined Sources)-19.8 E 19.8(|N)26.4 G
(umber of Pruned Sources)-19.8 E(|)26.4 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
527 Q 52.8(|J)72 540 S(oined Source Address 1 \(Encoded-Source format\))
-52.8 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
553 Q -171.6 191.4(|. |)72 566 T -171.6 191.4(|. |)72 579 T
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
592 Q 52.8(|J)72 605 S(oined Source Address n \(Encoded-Source format\))
-52.8 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
618 Q 52.8(|P)72 631 S(runed Source Address 1 \(Encoded-Source format\))
-52.8 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
644 Q -171.6 191.4(|. |)72 657 T -171.6 191.4(|. |)72 670 T
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
683 Q 52.8(|P)72 696 S(runed Source Address n \(Encoded-Source format\))
-52.8 E(|)52.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
709 Q F0(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.9.5. [P)2.75 F(age 79])-.165 E EP
%%Page: 80 80
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(PIM V)72
85 Q(ersion, T)-1.1 E(ype, Reser)-.814 E -.11(ve)-.11 G(d, Checksum).11
E F0(Described abo)97 98 Q -.165(ve)-.165 G(.).165 E F1(Unicast Upstr)72
127.6 Q(eam Neighbor Addr)-.198 E(ess)-.198 E F0
(The address of the RPF or upstream neighbor)97 140.6 Q 5.5(.T)-.605 G
(he format for this address is gi)-5.5 E -.165(ve)-.275 G 2.75(ni).165 G
2.75(nt)-2.75 G(he)-2.75 E(Encoded-Unicast address in section 4.9.1. Th\
is address should be the link-local address of)97 153.6 Q/F2 10/Symbol
SF<ef>555 165.6 Q<ef>-4.94 -10 M F0(the upstream neighbor)97 166.6 Q
2.75(,a)-.44 G 2.75(so)-2.75 G(btained from the RPF lookup.)-2.75 E F1
(Reser)72 196.2 Q -.11(ve)-.11 G(d).11 E F0 -.385(Tr)97 209.2 S
(ansmitted as zero, ignored on receipt.).385 E F1(Holdtime)72 238.8 Q F0
(The amount of time a recei)97 251.8 Q -.165(ve)-.275 G 2.75(rm).165 G
(ust k)-2.75 E(eep the Join/Prune state ali)-.11 E -.165(ve)-.275 G 2.75
(,i).165 G 2.75(ns)-2.75 G 2.75(econds. If)-2.75 F(the)2.75 E
(Holdtime is set to `0xf)97 264.8 Q -1.595 -.275(fff ')-.275 H 2.75(,t)
.275 G(he recei)-2.75 E -.165(ve)-.275 G 2.75(ro).165 G 2.75(ft)-2.75 G
(his message should hold the state until canceled)-2.75 E(by the approp\
riate cancelling Join/Prune message, or timed out according to local po\
lic)97 277.8 Q -.715(y.)-.165 G
(This may be used with dial-on-demand links, to a)97 290.8 Q -.22(vo)
-.22 G(id k).22 E(eeping the link up with periodic)-.11 E
(Join/Prune messages.)97 303.8 Q F2<ef>555 328.8 Q<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
F0(Note that the HoldT)97 329.8 Q(ime must be lar)-.385 E
(ger than the J/P_Ov)-.198 E(erride_Interv)-.165 E(al.)-.275 E F1
(Number of Gr)72 359.4 Q(oups)-.198 E F0
(The number of multicast group sets contained in the message.)97 372.4 Q
F1(Multicast gr)72 402 Q(oup addr)-.198 E(ess)-.198 E F0 -.165(Fo)97 415
S 2.75(rf).165 G(ormat description see Section 4.9.1.)-2.75 E F1
(Number of J)72 431.6 Q(oined Sour)-.165 E(ces)-.198 E F0
(Number of join source addresses listed for a gi)97 444.6 Q -.165(ve)
-.275 G 2.75(ng).165 G(roup.)-2.75 E F1 -.165(Jo)72 474.2 S(in Sour).165
E(ce Addr)-.198 E(ess 1 .. n)-.198 E F0
(This list contains the sources that the sending router will forw)97
487.2 Q(ard multicast datagrams for if)-.11 E(recei)97 500.2 Q -.165(ve)
-.275 G 2.75(do).165 G 2.75(nt)-2.75 G(he interf)-2.75 E
(ace this message is sent on.)-.11 E
(See Encoded-Source-Address format in section 4.9.1.)97 526.2 Q F1
(Number of Pruned Sour)72 542.8 Q(ces)-.198 E F0
(Number of prune source addresses listed for a group.)97 555.8 Q F1
(Prune Sour)72 585.4 Q(ce Addr)-.198 E(ess 1 .. n)-.198 E F0
(This list contains the sources that the sending router does not w)97
598.4 Q(ant to forw)-.11 E(ard multicast)-.11 E F2<ef>555 610.4 Q F0
(datagrams for when recei)97 611.4 Q -.165(ve)-.275 G 2.75(do).165 G
2.75(nt)-2.75 G(he interf)-2.75 E(ace this message is sent on.)-.11 E F1
2.75(4.9.5.1. Gr)72 663.4 R(oup Set Sour)-.198 E(ce List Rules)-.198 E
F0(As described abo)72 680 Q -.165(ve)-.165 G 2.75(,J).165 G
(oin / Prune messages are composed by one or more group sets. Each set)
-2.75 E(contains tw)72 693 Q 2.75(os)-.11 G(ource lists, the Join Sourc\
es and the Prune Sources. This section describes the)-2.75 E(dif)72 706
Q(ferent types of group sets and source list entries that can e)-.275 E
(xist in a Join / Prune message.)-.165 E .4 LW 555 717.3 555 727.3 DL
555 707.3 555 717.3 DL 555 697.3 555 707.3 DL 555 687.3 555 697.3 DL 555
677.3 555 687.3 DL 555 667.3 555 677.3 DL 555 657.3 555 667.3 DL 555
647.3 555 657.3 DL 555 639.9 555 649.9 DL(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 152.721(elas Section)-.165 F 2.75
(4.9.5.1. [P)2.75 F(age 80])-.165 E EP
%%Page: 81 81
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(There are tw)72 85 Q 2.75(ov)
-.11 G(alid group set types:)-3.025 E/F1 11/Times-Bold@0 SF -.198(Wi)72
114.6 S(ldcard Gr).198 E(oup Set)-.198 E F0(The wildcard group set is r\
epresented by the entire multicast range - the be)97 127.6 Q
(ginning of the)-.165 E(multicast address range in the group address \
\214eld and the pre\214x length of the multicast)97 140.6 Q(address ran\
ge in the mask length \214eld of the Multicast Group Address, e.g. 224.\
0.0.0/4 for)97 153.6 Q 2.75(IPv4. Each)97 166.6 R(wildcard group set ma\
y contain one or more \(*,*,RP\) source list entries in)2.75 E
(either the Join or Prune lists.)97 179.6 Q 2.75(A\()97 205.6 S
(*,*,RP\) source list entry may only e)-2.75 E
(xist in a wildcard group set.)-.165 E(When added to a Join)5.5 E
(source list, this type of source entry e)97 218.6 Q
(xpresses the routers interest in recei)-.165 E(ving traf)-.275 E
(\214c for all)-.275 E(groups mapping to the speci\214ed RP)97 231.6 Q
2.75(.W)-1.221 G(hen added to a Prune source list a \(*,*,RP\) entry)
-2.75 E -.165(ex)97 244.6 S(presses the routers interest to stop recei)
.165 E(ving such traf)-.275 E(\214c.)-.275 E
(\(*,*,RP\) source list entries ha)97 270.6 Q .33 -.165(ve t)-.22 H
(he Source-Address set to the address of the RP).165 E 2.75(,t)-1.221 G
(he Source-)-2.75 E(Address Mask-Len set to the full length of the IP a\
ddress and both the WC and RPT bits of)97 283.6 Q
(the Source-Address set to 1.)97 296.6 Q F1(Gr)72 326.2 Q
(oup Speci\214c Set)-.198 E F0 -.165(Fo)97 339.2 S 2.75(rI).165 G
(Pv4, a Group Speci\214c Set is represented by a v)-2.75 E
(alid IP multicast address in the group)-.275 E(address \214eld and the\
 full length of the IP address in the mask length \214eld of the Multic\
ast)97 352.2 Q(Group Address. Each group speci\214c set may contain \(*\
,G\), \(S,G,rpt\) and \(S,G\) source list)97 365.2 Q
(entries in the Join or Prune lists.)97 378.2 Q F1(\(*,G\))97 394.8 Q F0
(The \(*,G\) source list entry is used in Join / Prune messages sent to)
122 407.8 Q -.11(wa)-.275 G(rds the RP for).11 E
(the speci\214ed group. It e)122 420.8 Q
(xpresses interest \(or lack of\) in recei)-.165 E(ving traf)-.275 E
(\214c sent to the)-.275 E(group through the Rendezv)122 433.8 Q
(ous-Point shared tree. There may only be one such entry in)-.22 E
(both the Join and Prune lists of a group speci\214c set.)122 446.8 Q
(\(*,G\) source list entries ha)122 472.8 Q .33 -.165(ve t)-.22 H
(he Source-Address set to the address of the RP for).165 E(group G, the\
 Source-Address Mask-Len set to the full length of the IP address and)
122 485.8 Q(ha)122 498.8 Q .33 -.165(ve b)-.22 H
(oth the WC and RPT bits of the Encoded-Source-Address set.).165 E F1
(\(S,G,r)97 528.4 Q(pt\))-.11 E F0(The \(S,G,rpt\) source list entry is\
 used in Join / Prune messages sent to)122 541.4 Q -.11(wa)-.275 G
(rds the RP for).11 E(the speci\214ed group. It e)122 554.4 Q
(xpresses interest \(or lack of\) in recei)-.165 E(ving traf)-.275 E
(\214c through the)-.275 E
(shared tree sent by the speci\214ed source to this group. F)122 567.4 Q
(or each source address the)-.165 E(entry may e)122 580.4 Q(xist in onl\
y one of the Join and Prune source lists of a group speci\214c set)-.165
E -.22(bu)122 593.4 S 2.75(tn).22 G(ot both.)-2.75 E
(\(S,G,rpt\) source list entries ha)122 619.4 Q .33 -.165(ve t)-.22 H
(he Source-Address set to the address of the source S,).165 E(the Sourc\
e-Address Mask-Len set to the full length of the IP address and ha)122
632.4 Q .33 -.165(ve t)-.22 H(he WC).165 E
(bit clear and the RPT bit set in the Encoded-Source-Address.)122 645.4
Q F1(\(S,G\))97 675 Q F0
(The \(S,G\) source list entry is used in Join / Prune messages sent to)
122 688 Q -.11(wa)-.275 G(rds the speci\214ed).11 E(source. It e)122 701
Q(xpresses interest \(or lack of\) in recei)-.165 E(ving traf)-.275 E
(\214c through the shortest path)-.275 E
(tree sent by the source to the speci\214ed group. F)122 714 Q
(or each source address the entry may)-.165 E .4 LW 555 718.5 555 728.5
DL 555 708.5 555 718.5 DL 555 698.5 555 708.5 DL 555 688.5 555 698.5 DL
555 678.5 555 688.5 DL 555 668.5 555 678.5 DL 555 658.5 555 668.5 DL 555
648.5 555 658.5 DL 555 638.5 555 648.5 DL 555 628.5 555 638.5 DL 555
618.5 555 628.5 DL 555 608.5 555 618.5 DL 555 598.5 555 608.5 DL 555
588.5 555 598.5 DL 555 578.5 555 588.5 DL 555 568.5 555 578.5 DL 555
558.5 555 568.5 DL 555 548.5 555 558.5 DL 555 538.5 555 548.5 DL 555
528.5 555 538.5 DL 555 518.5 555 528.5 DL 555 508.5 555 518.5 DL 555
498.5 555 508.5 DL 555 488.5 555 498.5 DL 555 478.5 555 488.5 DL 555
468.5 555 478.5 DL 555 458.5 555 468.5 DL 555 448.5 555 458.5 DL 555
438.5 555 448.5 DL 555 428.5 555 438.5 DL 555 418.5 555 428.5 DL 555
408.5 555 418.5 DL 555 398.5 555 408.5 DL 555 388.5 555 398.5 DL 555
378.5 555 388.5 DL 555 368.5 555 378.5 DL 555 358.5 555 368.5 DL 555
348.5 555 358.5 DL 555 338.5 555 348.5 DL 555 328.5 555 338.5 DL 555
318.5 555 328.5 DL 555 308.5 555 318.5 DL 555 298.5 555 308.5 DL 555
288.5 555 298.5 DL 555 278.5 555 288.5 DL 555 268.5 555 278.5 DL 555
258.5 555 268.5 DL 555 248.5 555 258.5 DL 555 238.5 555 248.5 DL 555
228.5 555 238.5 DL 555 218.5 555 228.5 DL 555 208.5 555 218.5 DL 555
198.5 555 208.5 DL 555 188.5 555 198.5 DL 555 178.5 555 188.5 DL 555
168.5 555 178.5 DL 555 158.5 555 168.5 DL 555 148.5 555 158.5 DL 555
138.5 555 148.5 DL 555 128.5 555 138.5 DL 555 118.5 555 128.5 DL 555
108.5 555 118.5 DL 555 98.5 555 108.5 DL 555 88.5 555 98.5 DL 555 78.5
555 88.5 DL 555 74.5 555 84.5 DL(Fenner/Handle)72 769 Q(y/Holbrook/K)
-.165 E(ouv)-.385 E 152.721(elas Section)-.165 F 2.75(4.9.5.1. [P)2.75 F
(age 81])-.165 E EP
%%Page: 82 82
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E -.165(ex)122 85 S(ist in only \
one of the Join and Prune source lists of a group speci\214c set b).165
E(ut not both.)-.22 E(\(S,G\) source list entries ha)122 111 Q .33 -.165
(ve t)-.22 H(he Source-Address set to the address of the source S, the)
.165 E(Source-Address Mask-Len set to the full length of the IP address\
 and ha)122 124 Q .33 -.165(ve b)-.22 H(oth the).165 E
(WC and RPT bits of the Encoded-Source-Address cleared.)122 137 Q
(The rules described abo)72 153.6 Q .33 -.165(ve a)-.165 H(re suf).165 E
(\214cient to pre)-.275 E -.165(ve)-.275 G(nt in).165 E -.275(va)-.44 G
(lid combinations of source list entries in).275 E
(group-speci\214c sets.)72 166.6 Q(There are ho)5.5 E(we)-.275 E -.165
(ve)-.275 G 2.75(ran).165 G(umber of combinations that ha)-2.75 E .33
-.165(ve a v)-.22 H(alid interpretation)-.11 E -.22(bu)72 179.6 S 2.75
(tw).22 G(hich are not generated by the protocol as described in this s\
peci\214cation:)-2.75 E 7.15<8343>72 196.2 S(ombining a \(*,G\) Join an\
d a \(S,G,rpt\) Join entry in the same message is redundant as the)-7.15
E(\(*,G\) entry co)83 209.2 Q -.165(ve)-.165 G(rs the information pro)
.165 E(vided by the \(S,G,rpt\) entry)-.165 E(.)-.715 E 7.15<8354>72
225.8 S(he same applies for a \(*,G\) Prunes and \(S,G,rpt\) Prunes.)
-7.15 E 7.15<8354>72 242.4 S(he combination of a \(*,G\) Prune and a \(\
S,G,rpt\) Join is also not generated. \(S,G,rpt\) Joins are)-7.15 E
(only sent when the router is recei)83 255.4 Q(ving all traf)-.275 E
(\214c for a group on the shared tree and it wishes to)-.275 E(indicate\
 a change for the particular source. As a \(*,G\) prune indicates that \
the router no longer)83 268.4 Q(wishes to recei)83 281.4 Q .33 -.165
(ve s)-.275 H(hared tree traf).165 E
(\214c, the \(S,G,rpt\) Join is meaningless.)-.275 E 7.15<8341>72 298 S
2.75(sJ)-7.15 G(oin / Prune messages are tar)-2.75 E
(geted to a single PIM neighbour)-.198 E 2.75(,i)-.44 G
(ncluding both a \(S,G\) Join)-2.75 E(and a \(S,G,rpt\) prune in the sa\
me message is redundant. The \(S,G\) Join informs the neighbour)83 311 Q
(that the sender wishes to recei)83 324 Q .33 -.165(ve t)-.275 H
(he particular source on the shortest path tree. It is therefore).165 E
(unnecessary for the router to say that it no longer wishes to recei)83
337 Q .33 -.165(ve i)-.275 H 2.75(to).165 G 2.75(nt)-2.75 G
(he shared tree.)-2.75 E 7.15<8354>72 353.6 S(he combination of a \(S,G\
\) Prune and a \(S,G,rpt\) Join could possibly be used by a router to)
-7.15 E(switch from recei)83 366.6 Q
(ving a particular source on the shortest-path tree back to recei)-.275
E(ving it on the)-.275 E(shared tree \(pro)83 379.6 Q(vided that the RP\
F neighbor for the shortest-path and shared trees is common\).)-.165 E
(Ho)83 392.6 Q(we)-.275 E -.165(ve)-.275 G 2.75(rS).165 G
(parse-Mode PIM does not pro)-2.75 E
(vide a mechanism for switching back to the shared)-.165 E/F1 10/Symbol
SF<ef>555 404.6 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M F0(tree.)83 405.6 Q(The rules are summarised in the table belo)72
435.2 Q -.715(w.)-.275 G .44 LW 449.311 458.95 72 458.95 DL/F2 11
/Times-Bold@0 SF 13.75(\(*,G\)J \(*,G\)P \(S,G,r)142.774 469.2 R 13.75
(pt\)J \(S,G,r)-.11 F 13.75(pt\)P \(S,G\)J \(S,G\)P)-.11 F 449.311
473.95 72 473.95 DL 449.311 475.95 72 475.95 DL(\(*,G\)J)77.5 486.2 Q F0
42.471(-n)35.64 G -16.291 36.355(o? y)-42.471 H 47.861(es yes)-36.355 F
(yes)32.087 E 449.311 490.95 72 490.95 DL F2(\(*,G\)P)77.5 501.2 Q F0
-30.965 43.692(-? ?)80.553 H 29.337(yes yes)16.698 F 449.311 505.95 72
505.95 DL F2(\(S,G,r)77.5 516.2 Q(pt\)J)-.11 E F0 60.39(-n)111.21 G
54.274(oy)-60.39 G 29.337(es yes)-54.274 F 449.311 520.95 72 520.95 DL
F2(\(S,G,r)77.5 531.2 Q(pt\)P)-.11 E F0 61.611(-?)174.042 G(?)-19.745 E
449.311 535.95 72 535.95 DL F2(\(S,G\)J)77.5 546.2 Q F0 43.087(-n)257.84
G(o)-43.087 E 449.311 550.95 72 550.95 DL F2(\(S,G\)P)77.5 561.2 Q F0(-)
303.369 E 449.311 565.95 72 565.95 DL 404.09 458.95 404.09 565.95 DL
357.34 458.95 357.34 565.95 DL 292.066 458.95 292.066 565.95 DL 228.013
458.95 228.013 565.95 DL 180.658 458.95 180.658 565.95 DL 133.524 458.95
133.524 565.95 DL 135.524 458.95 135.524 565.95 DL 449.311 458.95
449.311 565.95 DL 72 458.95 72 565.95 DL F2 -.11(ye)72 596.8 S(s).11 E
F0(Allo)10.447 E(wed and e)-.275 E(xpected.)-.165 E F2(no)72 626.4 Q F0
(Combination is not allo)13.384 E
(wed by the protocol and MUST not be generated by a router)-.275 E(.)
-.605 E F2(?)72 656 Q F0(Combination not e)19.5 E
(xpected by the protocol, b)-.165 E(ut well-de\214ned. A router MA)-.22
E 2.75(Ya)-1.155 G(ccept it b)-2.75 E(ut)-.22 E(SHOULD not generate it.)
97 669 Q(The order of source list entries in a group set source list is\
 not important. As a result the table)72 685.6 Q(abo)72 698.6 Q .33
-.165(ve i)-.165 H 2.75(ss).165 G
(ymmetric and only entries on the upper right half ha)-2.75 E .33 -.165
(ve b)-.22 H(een speci\214ed as entries on the).165 E(lo)72 711.6 Q
(wer left are just a mirror)-.275 E(.)-.605 E .4 LW 555 717.3 555 727.3
DL 555 707.3 555 717.3 DL 555 697.3 555 707.3 DL 555 687.3 555 697.3 DL
555 677.3 555 687.3 DL 555 667.3 555 677.3 DL 555 657.3 555 667.3 DL 555
647.3 555 657.3 DL 555 637.3 555 647.3 DL 555 627.3 555 637.3 DL 555
617.3 555 627.3 DL 555 607.3 555 617.3 DL 555 597.3 555 607.3 DL 555
587.3 555 597.3 DL 555 577.3 555 587.3 DL 555 567.3 555 577.3 DL 555
557.3 555 567.3 DL 555 547.3 555 557.3 DL 555 537.3 555 547.3 DL 555
527.3 555 537.3 DL 555 517.3 555 527.3 DL 555 507.3 555 517.3 DL 555
497.3 555 507.3 DL 555 487.3 555 497.3 DL 555 477.3 555 487.3 DL 555
467.3 555 477.3 DL 555 457.3 555 467.3 DL 555 450.7 555 460.7 DL
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 152.721
(elas Section)-.165 F 2.75(4.9.5.1. [P)2.75 F(age 82])-.165 E EP
%%Page: 83 83
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF 2.75
(4.9.5.2. Gr)72 85 R(oup Set Fragmentation)-.198 E F0(When b)72 101.6 Q
(uilding a Join / Prune for a prticular neighbour)-.22 E 2.75(,ar)-.44 G
(outer should try and include in the)-2.75 E
(message as much of the information it needs to con)72 114.6 Q .33 -.165
(vey t)-.44 H 2.75(ot).165 G(he neighbour as possible.)-2.75 E
(This implies)5.5 E(adding one group set for each multicast group that \
has information pending transmission and)72 127.6 Q
(within each set including all rele)72 140.6 Q -.275(va)-.275 G
(nt source list entries.).275 E(On a router with a lar)72 157.2 Q(ge am\
ount of multicast state the number of entries that must be included)
-.198 E(may result in pack)72 170.2 Q(ets that are lar)-.11 E
(ger in the maximum IP pack)-.198 E(et size. In most such cases the)-.11
E(information may be split into multiple messages.)72 183.2 Q
(There is an e)72 199.8 Q
(xception with group sets that contain a \(*,G\) Join source list entry)
-.165 E 2.75(.T)-.715 G(he group set)-2.75 E -.165(ex)72 212.8 S
(presses the routers interest in recei).165 E(ving all traf)-.275 E
(\214c for the speci\214ed group on the shared tree and)-.275 E
(it MUST include an \(S,G,rpt\) Prune source list entry for e)72 225.8 Q
-.165(ve)-.275 G(ry source that the router does not).165 E
(wish to recei)72 238.8 Q -.165(ve)-.275 G 2.75(.T).165 G(his list of \
\(S,G,rpt\) Prune source-list entries MUST not be split in multiple)
-2.75 E(messages.)72 251.8 Q(If only N \(S,G,rpt\) Prune entries \214t \
into a maximum-sized Join / Prune message, b)72 277.8 Q(ut the router)
-.22 E(has more than N \(S,G,rpt\) Prunes to add, then the router MUST \
choose to include the \214rst N)72 290.8 Q
(\(numerically smallest\) IP addresses.)72 303.8 Q/F2 10/Symbol SF<ef>
555 328.8 Q<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>
-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M F1 2.75(4.9.6. Assert)72 342.8 R(Message F)2.75 E
(ormat)-.275 E F0(The Assert message is used to resolv)72 359.4 Q 2.75
(ef)-.165 G(orw)-2.75 E
(arder con\215icts between routers on a link. It is sent)-.11 E
(when a multicast data pack)72 372.4 Q(et is recei)-.11 E -.165(ve)-.275
G 2.75(do).165 G 2.75(na)-2.75 G 2.75(ni)-2.75 G(nterf)-2.75 E
(ace that the router w)-.11 E(ould normaly forw)-.11 E(ard)-.11 E
(that pack)72 385.4 Q 2.75(et. Assert)-.11 F(messages may also be sent \
in response to an Assert message from another)2.75 E(router)72 398.4 Q
(.)-.605 E/F3 11/Courier@0 SF 125.4(0123)78.6 417.4 S 6.6
(01234567890123456789012345678901)78.6 430.4 S
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
443.4 Q(|PIM Ver| Type)72 456.4 Q 19.8(|R)13.2 G 19.8(eserved |)-19.8 F
72.6(Checksum |)72.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
469.4 Q 92.4(|G)72 482.4 S(roup Address \(Encoded-Group format\))-92.4 E
(|)85.8 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
495.4 Q 79.2(|S)72 508.4 S(ource Address \(Encoded-Unicast format\))
-79.2 E(|)79.2 E
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
521.4 Q 138.6(|R| Metric)72 534.4 R 138.6(Preference |)6.6 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
547.4 Q 191.4(|M)72 560.4 S 178.2(etric |)-191.4 F
(+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+)72
573.4 Q F1(PIM V)72 596 Q(ersion, T)-1.1 E(ype, Reser)-.814 E -.11(ve)
-.11 G(d, Checksum).11 E F0(Described abo)97 609 Q -.165(ve)-.165 G(.)
.165 E F1(Gr)72 638.6 Q(oup Addr)-.198 E(ess)-.198 E F0
(The group address for which the router wishes to resolv)97 651.6 Q 2.75
(et)-.165 G(he forw)-2.75 E(arding con\215ict.)-.11 E(This is an)5.5 E
(Encoded-Group address, as speci\214ed in 4.9.1.)97 664.6 Q F1(Sour)72
681.2 Q(ce Addr)-.198 E(ess)-.198 E F0
(Source address for which the router wishes to resolv)97 694.2 Q 2.75
(et)-.165 G(he forw)-2.75 E(arding con\215ict. The source)-.11 E
(address MA)97 707.2 Q 2.75(Yb)-1.155 G 2.75(es)-2.75 G(et to IN)-2.75 E
(ADDR_ANY for \(*,G\) asserts \(see belo)-.385 E 2.75(w\). The)-.275 F
(format for this)2.75 E(address is gi)97 720.2 Q -.165(ve)-.275 G 2.75
(ni).165 G 2.75(nE)-2.75 G(ncoded-Unicast-Address in section 4.9.1.)
-2.75 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971
(elas Section)-.165 F 2.75(4.9.6. [P)2.75 F(age 83])-.165 E EP
%%Page: 84 84
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(R)72 85 Q
F0(RPT)17.058 E(-bit is a 1 bit v)-1.012 E(alue. The RPT)-.275 E
(-bit is set to 1 for \(*,G\) Assert messages and 0 for \(S,G\))-1.012 E
(assert messages.)97 98 Q F1(Metric Pr)72 127.6 Q(efer)-.198 E(ence)
-.198 E F0(Preference v)97 140.6 Q
(alue assigned to the unicast routing protocol that pro)-.275 E
(vided the route to the)-.165 E(multicast source or Rendezv)97 153.6 Q
(ous-Point.)-.22 E F1(Metric)72 183.2 Q F0(The unicast routing table me\
tric associated with the route used to reach the multicast source)97
196.2 Q(or Rendezv)97 209.2 Q(ous-Point. The metric is in units applica\
ble to the unicast routing protocol used.)-.22 E
(Assert messages can be sent to resolv)72 238.8 Q 2.75(eaf)-.165 G(orw)
-2.75 E(arding con\215ict for all traf)-.11 E(\214c to gi)-.275 E -.165
(ve)-.275 G 2.75(ng).165 G(roup or for a)-2.75 E
(speci\214c source and group.)72 251.8 Q F1(\(S,G\) Asserts)72 268.4 Q
F0(Source speci\214c asserts are sent by routers forw)97 281.4 Q
(arding a speci\214c source on the shortest-path)-.11 E
(tree \(SPT bit is TR)97 294.4 Q(UE\). \(S,G\) Asserts ha)-.44 E .33
-.165(ve t)-.22 H(he Group-Address \214eld set to the group G and).165 E
(the Source-Address \214eld set to the source S. The RPT)97 307.4 Q
(-bit is set to 0, the Metric-Preference)-1.012 E
(is set to MRIB.pref\(S\) and the Metric is set to MRIB.metric\(S\).)97
320.4 Q F1(\(*,G\) Asserts)72 350 Q F0
(Group speci\214c asserts are sent by routers forw)97 363 Q
(arding data for the group and source\(s\) under)-.11 E
(contention on the shared tree. \(*,G\) asserts ha)97 376 Q .33 -.165
(ve t)-.22 H(he Group-Address \214eld set to the group G.).165 E -.165
(Fo)97 389 S 2.75(rd).165 G
(ata triggered Asserts the Source-Address \214eld MA)-2.75 E 2.75(Yb)
-1.155 G 2.75(es)-2.75 G(et to the IP source address of)-2.75 E
(the data pack)97 402 Q(et that triggered the Assert and is set to IN)
-.11 E(ADDR_ANY otherwise.)-.385 E(The RPT)5.5 E(-)-1.012 E(bit is set \
to 1, the Metric-Preference is set to MRIB.pref\(RP\(G\)\) and the Metr\
ic is set to)97 415 Q(MRIB.metric\(RP\(G\)\).)97 428 Q F1(4.10.)72 467 Q
/F2 13/Times-Bold@0 SF(PIM T)5.5 E(imers)-.234 E F0
(PIM-SM maintains the follo)72 483.6 Q
(wing timers, as discussed in section 4.1. All timers are countdo)-.275
E(wn)-.275 E(timers - the)72 496.6 Q 2.75(ya)-.165 G(re set to a v)-2.75
E(alue and count do)-.275 E(wn to zero, at which point the)-.275 E 2.75
(yt)-.165 G(ypically trigger an)-2.75 E 2.75(action. Of)72 509.6 R
(course the)2.75 E 2.75(yc)-.165 G(an just as easily be implemented as \
count-up timers, where the absolute)-2.75 E -.165(ex)72 522.6 S
(piry time is stored and compared ag).165 E(ainst a real-time clock, b)
-.055 E(ut the language in this speci\214cation)-.22 E(assumes that the)
72 535.6 Q 2.75(yc)-.165 G(ount do)-2.75 E(wnw)-.275 E(ards to zero.)
-.11 E(Global T)72 565.2 Q(imers)-.385 E(Per interf)72 581.8 Q
(ace \(I\):)-.11 E F1(Hello T)97 598.4 Q(imer: HT\(I\))-.198 E F0
(Per neighbor \(N\):)97 615 Q F1(Neighbor li)122 631.6 Q -.11(ve)-.11 G
(ness T).11 E(imer: NL)-.198 E(T\(N,I\))-1.012 E F0(Per acti)97 648.2 Q
.33 -.165(ve R)-.275 H 2.75(P\().165 G(RP\):)-2.75 E F1(\(*,*,RP\) J)122
664.8 Q(oin Expiry T)-.165 E(imer: ET\(*,*,RP)-.198 E(,I\))-1.012 E
(\(*,*,RP\) PruneP)122 681.4 Q(ending T)-.22 E(imer: PPT\(*,*,RP)-.198 E
(,I\))-1.012 E F0(Per Group \(G\):)97 698 Q(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 163.721(elas Section)-.165 F 2.75
(4.10. [P)2.75 F(age 84])-.165 E EP
%%Page: 85 85
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF
(\(*,G\) J)122 85 Q(oin Expiry T)-.165 E(imer: ET\(*,G,I\))-.198 E
(\(*,G\) PruneP)122 101.6 Q(ending T)-.22 E(imer: PPT\(*,G,I\))-.198 E
(\(*,G\) Assert T)122 118.2 Q(imer: A)-.198 E(T\(*,G,I\))-1.045 E F0
(Per Source \(S\):)122 134.8 Q F1(\(S,G\) J)147 151.4 Q(oin Expiry T)
-.165 E(imer: ET\(S,G,I\))-.198 E(\(S,G\) PruneP)147 168 Q(ending T)-.22
E(imer: PPT\(S,G,I\))-.198 E(\(S,G\) Assert T)147 184.6 Q(imer: A)-.198
E(T\(S,G,I\))-1.045 E(\(S,G,r)147 201.2 Q(pt\) Prune Expiry T)-.11 E
(imer: ET\(S,G,r)-.198 E(pt,I\))-.11 E(\(S,G,r)147 217.8 Q(pt\) PruneP)
-.11 E(ending T)-.22 E(imer: PPT\(S,G,r)-.198 E(pt,I\))-.11 E F0
(Per acti)72 234.4 Q .33 -.165(ve R)-.275 H 2.75(P\().165 G(RP\):)-2.75
E F1(\(*,*,RP\) Upstr)97 251 Q(eam J)-.198 E(oin T)-.165 E
(imer: JT\(*,*,RP\))-.198 E F0(Per Group \(G\):)72 267.6 Q F1
(\(*,G\) Upstr)97 284.2 Q(eam J)-.198 E(oin T)-.165 E(imer: JT\(*,G\))
-.198 E F0(Per Source \(S\):)97 300.8 Q F1(\(S,G\) Upstr)122 317.4 Q
(eam J)-.198 E(oin T)-.165 E(imer: JT\(S,G\))-.198 E(\(S,G\) K)122 334 Q
(eepali)-.275 E .22 -.11(ve T)-.11 H(imer: KA)-.088 E(T\(S,G\))-1.045 E
(\(S,G,r)122 350.6 Q(pt\) Upstr)-.11 E(eam Ov)-.198 E(erride T)-.11 E
(imer: O)-.198 E(T\(S,G,r)-.44 E(pt\))-.11 E F0(At the DRs or rele)72
367.2 Q -.275(va)-.275 G(nt Assert W).275 E(inners only:)-.44 E
(Per Source,Group pair \(S,G\):)97 383.8 Q F1(Register Stop T)122 400.4
Q(imer: RST\(S,G\))-.198 E(4.11.)72 426.4 Q/F2 13/Times-Bold@0 SF -.234
(Ti)5.5 G(mer V).234 E(alues)-1.196 E F0
(When timers are started or restarted, the)72 443 Q 2.75(ya)-.165 G
(re set to def)-2.75 E(ault v)-.11 E 2.75(alues. This)-.275 F
(section summarizes those)2.75 E(def)72 456 Q(ault v)-.11 E(alues.)-.275
E(Note that protocol e)72 472.6 Q -.165(ve)-.275 G
(nts or con\214guration may change the def).165 E(ault v)-.11 E
(alue of a timer on a speci\214c)-.275 E(interf)72 485.6 Q
(ace. When timers are initialised in this document the v)-.11 E
(alue speci\214c to the interf)-.275 E(ace in)-.11 E(conte)72 498.6 Q
(xt must be used.)-.165 E(Some of the timers listed belo)72 515.2 Q 2.75
(w\()-.275 G(Prune Pending, Upstream Join, Upstream Ov)-2.75 E
(erride\) can be set to)-.165 E -.275(va)72 528.2 S
(lues which depend on the settings of the Propag).275 E
(ation Delay and Ov)-.055 E(erride Interv)-.165 E(al of the)-.275 E
(corresponding interf)72 541.2 Q(ace. The def)-.11 E(ault v)-.11 E
(alues for these are gi)-.275 E -.165(ve)-.275 G 2.75(nb).165 G(elo)
-2.75 E 4.18 -.715(w. N)-.275 H(ote that the v).715 E(alue of both)-.275
E(the Propag)72 554.2 Q(ation Delay and Ov)-.055 E(erride Interv)-.165 E
(al of an interf)-.275 E(ace can change as a result of recei)-.11 E
(ving)-.275 E(Hello messages on that interf)72 567.2 Q
(ace \(section 4.6.3\).)-.11 E F1 -1.012(Va)72 593.2 S(riable Name: Pr)
1.012 E(opagation Delay \(PD\(I\)\))-.198 E .44 LW 503.996 607.55 72
607.55 DL -1.012(Va)99.176 617.8 S(lue Name)1.012 E -1.012(Va)112.669 G
82.837(lue Explanation)1.012 F 503.996 622.55 72 622.55 DL 503.996
624.55 72 624.55 DL F0(LAN_delay_def)99.176 634.8 Q 78.778(ault 0.5)-.11
F(sec)2.75 E(Expected propag)380.647 634.8 Q(ation)-.055 E(delay o)
380.647 647.8 Q -.165(ve)-.165 G 2.75(rt).165 G(he local)-2.75 E(link.)
380.647 660.8 Q 503.996 665.55 72 665.55 DL 339.883 607.55 339.883
665.55 DL 227.808 607.55 227.808 665.55 DL 503.996 607.55 503.996 665.55
DL 72 607.55 72 665.55 DL(The def)72 683.4 Q(ault v)-.11 E
(alue of the LAN_delay_def)-.275 E(ault is chosen to be relati)-.11 E
-.165(ve)-.275 G(ly lar).165 E(ge to pro)-.198 E(vide)-.165 E
(compatibility with older PIM implementations.)72 696.4 Q(Fenner/Handle)
72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 163.721(elas Section)-.165 F
2.75(4.11. [P)2.75 F(age 85])-.165 E EP
%%Page: 86 86
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF -1.012
(Va)72 85 S(riable Name: Ov)1.012 E(erride Inter)-.11 E -.11(va)-.11 G
2.75(l\().11 G(OI\(I\)\))-2.75 E .44 LW 503.995 99.35 72 99.35 DL -1.012
(Va)100.137 109.6 S(lue Name)1.012 E -1.012(Va)108.501 G 85.72
(lue Explanation)1.012 F 503.995 114.35 72 114.35 DL 503.995 116.35 72
116.35 DL F0(t_o)100.137 126.6 Q -.165(ve)-.165 G(rride_def).165 E
81.661(ault 2.5)-.11 F(sec)2.75 E(Def)380.323 126.6 Q(ault delay interv)
-.11 E(al)-.275 E -.165(ove)380.323 139.6 S 2.75(rw).165 G(hich to)-2.75
E(randomize when)380.323 152.6 Q(scheduling a delayed)380.323 165.6 Q
(Join message.)380.323 178.6 Q 503.995 183.35 72 183.35 DL 338.117 99.35
338.117 183.35 DL 223.159 99.35 223.159 183.35 DL 503.995 99.35 503.995
183.35 DL 72 99.35 72 183.35 DL F1 -.198(Ti)72 210.6 S
(mer Name: Hello T).198 E(imer \(HT\(I\)\))-.198 E 503.996 224.95 72
224.95 DL -1.012(Va)89.243 235.2 S(lue Name)1.012 E -1.012(Va)99.7 G
51.729(lue Explanation)1.012 F 503.996 239.95 72 239.95 DL 503.996
241.95 72 241.95 DL F0 95.014(Hello_Period 30)89.243 252.2 R 50.42
(sec Periodic)2.75 F(interv)2.75 E(al for hello messages.)-.275 E
503.996 256.95 72 256.95 DL -.385(Tr)89.243 267.2 S 48.979
(iggered_Hello_Delay 5).385 F(sec)2.75 E(Randomized interv)326.637 267.2
Q(al for initial)-.275 E(Hello message on bootup or)326.637 280.2 Q
(triggered Hello message to a)326.637 293.2 Q(rebooting neighbor)326.637
306.2 Q(.)-.605 E/F2 10/Symbol SF<ef>555 318.2 Q<ef>-4.94 -10 M<ef>-4.94
-10 M<ef>-4.94 -10 M<ef>-4.94 -10 M<ef>-4.94 -10 M 503.996 310.95 72
310.95 DL 300.772 224.95 300.772 310.95 DL 219.805 224.95 219.805 310.95
DL 503.996 224.95 503.996 310.95 DL 72 224.95 72 310.95 DL<ef>555 327.8
Q F0(At system po)72 328.8 Q(wer)-.275 E
(-up, the timer is initialized to rand\(0,T)-.22 E
(riggered_Hello_Delay\) to pre)-.385 E -.165(ve)-.275 G(nt).165 E 2.75
(synchronization. When)72 341.8 R 2.75(an)2.75 G .55 -.275(ew o)-2.75 H
2.75(rr).275 G
(ebooting neighbor is detected, a responding Hello is sent)-2.75 E F2
<ef>555 353.8 Q<ef>-4.94 -10 M F0(within rand\(0,T)72 354.8 Q
(riggered_Hello_Delay\).)-.385 E F1 -.198(Ti)72 380.8 S
(mer Name: Neighbor Li).198 E -.11(ve)-.11 G(ness T).11 E(imer \(NL)
-.198 E(T\(N,I\)\))-1.012 E 503.999 395.15 72 395.15 DL -1.012(Va)92.212
405.4 S(lue Name)1.012 E -1.012(Va)72.659 G 92.8(lue Explanation)1.012 F
503.999 410.15 72 410.15 DL 503.999 412.15 72 412.15 DL F0
(Hello Holdtime)92.212 422.4 Q(from message)60.636 E(Hold T)60.636 E
(ime from Hello Message)-.385 E 503.999 427.15 72 427.15 DL 313.318
395.15 313.318 427.15 DL 191.28 395.15 191.28 427.15 DL 503.999 395.15
503.999 427.15 DL 72 395.15 72 427.15 DL(The Holdtime in a Hello Messag\
e should be set to \(3.5 * Hello_Period\), gi)72 445 Q(ving a def)-.275
E(ault v)-.11 E(alue of)-.275 E(105 seconds.)72 458 Q F1 -.198(Ti)72 484
S(mer Names: Expiry T).198 E(imer \(ET\(*,*,RP)-.198 E
(,I\), ET\(*,G,I\), ET\(S,G,I\), ET\(S,G,r)-1.012 E(pt,I\)\))-.11 E 504
498.35 72 498.35 DL -1.012(Va)90.349 508.6 S(lue Name)1.012 E -1.012(Va)
59.359 G 87.211(lue Explanation)1.012 F 504 513.35 72 513.35 DL 504
515.35 72 515.35 DL F0(J/P HoldT)90.349 525.6 Q 52.297(ime from)-.385 F
52.297(message Hold)2.75 F -.385(Ti)2.75 G(me from Join/Prune Message)
.385 E 504 530.35 72 530.35 DL 295.36 498.35 295.36 530.35 DL 178.911
498.35 178.911 530.35 DL 504 498.35 504 530.35 DL 72 498.35 72 530.35 DL
(See details of JT\(*,G\) for the Hold T)72 548.2 Q
(ime that is included in Join/Prune Messages.)-.385 E F1 -.198(Ti)72
574.2 S(mer Names: Prune P).198 E(ending T)-.22 E(imer \(PPT\(*,*,RP)
-.198 E(,I\), PPT\(*,G,I\), PPT\(S,G,I\),)-1.012 E(PPT\(S,G,r)72 587.2 Q
(pt,I\)\))-.11 E 503.994 601.55 72 601.55 DL -1.012(Va)89.911 611.8 S
(lue Name)1.012 E -1.012(Va)88.823 G 116.29(lue Explanation)1.012 F
503.994 616.55 72 616.55 DL 503.994 618.55 72 618.55 DL F0(J/P Ov)89.911
628.8 Q(erride Interv)-.165 E(al)-.275 E(Def)235.461 628.8 Q
(ault: Propag)-.11 E(ation)-.055 E(Delay + Ov)235.461 641.8 Q(erride)
-.165 E(Interv)235.461 654.8 Q(al)-.275 E(Short period after a join)
380.989 628.8 Q(or prune to allo)380.989 641.8 Q 2.75(wo)-.275 G(ther)
-2.75 E(routers on the LAN to)380.989 654.8 Q -.165(ove)380.989 667.8 S
(rride the join or).165 E(prune)380.989 680.8 Q 503.994 685.55 72 685.55
DL 354.122 601.55 354.122 685.55 DL 208.594 601.55 208.594 685.55 DL
503.994 601.55 503.994 685.55 DL 72 601.55 72 685.55 DL
(Note that both the Propag)72 703.4 Q(ation Delay and the Ov)-.055 E
(erride Interv)-.165 E(al are interf)-.275 E(ace speci\214c v)-.11 E
(alues that)-.275 E(may change when Hello messages are recei)72 716.4 Q
-.165(ve)-.275 G(d.).165 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E
(ouv)-.385 E 163.721(elas Section)-.165 F 2.75(4.11. [P)2.75 F(age 86])
-.165 E EP
%%Page: 87 87
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF -.198(Ti)
72 85 S(mer Names: Assert T).198 E(imer \(A)-.198 E(T\(*,G,I\), A)-1.045
E(T\(S,G,I\)\))-1.045 E .44 LW 503.995 99.35 72 99.35 DL -1.012(Va)
90.171 109.6 S(lue Name)1.012 E -1.012(Va)104.255 G 101.538
(lue Explanation)1.012 F 503.995 114.35 72 114.35 DL 503.995 116.35 72
116.35 DL F0(Assert Ov)90.171 126.6 Q(erride Interv)-.165 E 51.763
(al Def)-.275 F(ault: 3 secs)-.11 E(Short interv)381.929 126.6 Q
(al before an)-.275 E(assert times out where)381.929 139.6 Q
(the assert winner)381.929 152.6 Q(resends an assert)381.929 165.6 Q
(message)381.929 178.6 Q 503.995 183.35 72 183.35 DL(Assert T)90.171
193.6 Q 104.541(ime Def)-.385 F(ault: 180 secs)-.11 E
(Period after last assert)381.929 193.6 Q(before assert state is)381.929
206.6 Q(timed out)381.929 219.6 Q 503.995 224.35 72 224.35 DL 354.672
99.35 354.672 224.35 DL 223.896 99.35 223.896 224.35 DL 503.995 99.35
503.995 224.35 DL 72 99.35 72 224.35 DL(Note that for historical reason\
s, the Assert message lacks a Holdtime \214eld.)72 242.2 Q
(Thus changing the)5.5 E(Assert T)72 255.2 Q(ime from the def)-.385 E
(ault v)-.11 E(alue is not recommended.)-.275 E F1 -.198(Ti)72 281.2 S
(mer Names: Upstr).198 E(eam J)-.198 E(oin T)-.165 E
(imer \(JT\(*,*,RP\), JT\(*,G\), JT\(S,G\)\))-.198 E 503.999 295.55 72
295.55 DL -1.012(Va)84.996 305.8 S(lue Name)1.012 E -1.012(Va)41.738 G
112.105(lue Explanation)1.012 F 503.999 310.55 72 310.55 DL 503.999
312.55 72 312.55 DL F0 51.11(t_periodic Def)84.996 322.8 R
(ault: 60 secs)-.11 E(Period between Join/Prune Messages)70.58 E 503.999
327.55 72 327.55 DL(t_suppressed)84.996 337.8 Q(rand\(1.1 * t_periodic,)
183.461 337.8 Q(1.4 * t_periodic\) when)183.461 350.8 Q
(Suppression_State\(I\) is)183.461 363.8 Q(enabled, 0 otherwise)183.461
376.8 Q(Suppression period when someone)324.804 337.8 Q
(else sends a J/P message so we don')324.804 350.8 Q(t)-.198 E
(need to do so.)324.804 363.8 Q 503.999 381.55 72 381.55 DL(t_o)84.996
391.8 Q -.165(ve)-.165 G(rride).165 E(rand\(0, Ov)183.461 391.8 Q
(erride)-.165 E(Interv)183.461 404.8 Q(al\))-.275 E
(Randomized delay to pre)324.804 391.8 Q -.165(ve)-.275 G(nt).165 E
(response implosion when sending a)324.804 404.8 Q(join message to o)
324.804 417.8 Q -.165(ve)-.165 G(rride someone).165 E(else')324.804
430.8 Q 2.75(sp)-.605 G(rune message.)-2.75 E 503.999 435.55 72 435.55
DL 305.31 295.55 305.31 435.55 DL 163.967 295.55 163.967 435.55 DL
503.999 295.55 503.999 435.55 DL 72 295.55 72 435.55 DL
(t_periodic may be set to tak)72 453.4 Q 2.75(ei)-.11 G
(nto account such things as the con\214gured bandwidth and e)-2.75 E
(xpected)-.165 E -2.475 -.22(av e)72 466.4 T
(rage number of multicast route entries for the attached netw).22 E
(ork or link \(e.g., the period w)-.11 E(ould)-.11 E(be longer for lo)72
479.4 Q(wer)-.275 E
(-speed links, or for routers in the center of the netw)-.22 E
(ork that e)-.11 E(xpect to ha)-.165 E .33 -.165(ve a)-.22 H(lar)72
492.4 Q(ger number of entries\). If the Join/Prune-Period is modi\214ed\
 during operation, these changes)-.198 E(should be made relati)72 505.4
Q -.165(ve)-.275 G
(ly infrequently and the router should continue to refresh at its pre)
.165 E(vious)-.275 E
(Join/Prune-Period for at least Join/Prune-Holdtime, in order to allo)72
518.4 Q 2.75(wt)-.275 G(he upstream router to adapt.)-2.75 E(The holdti\
me speci\214ed in a Join/Prune message should be set to \(3.5 * t_perio\
dic\).)72 535 Q(t_o)72 551.6 Q -.165(ve)-.165 G(rride depends on the Ov)
.165 E(erride Interv)-.165 E(al of the upstream interf)-.275 E
(ace which may change when)-.11 E(Hello messages are recei)72 564.6 Q
-.165(ve)-.275 G(d.).165 E
(t_suppressed depends on the Suppression State of the upstream interf)72
581.2 Q(ace \( 4.6.3\) and becomes)-.11 E
(zero when suppression is disabled.)72 594.2 Q F1 -.198(Ti)72 620.2 S
(mer Name: Upstr).198 E(eam Ov)-.198 E(erride T)-.11 E(imer \(O)-.198 E
(T\(S,G,r)-.44 E(pt\)\))-.11 E 503.999 634.55 72 634.55 DL -1.012(Va)
91.09 644.8 S(lue Name)1.012 E -1.012(Va)60.02 G 137.933
(lue Explanation)1.012 F 503.999 649.55 72 649.55 DL 503.999 651.55 72
651.55 DL F0(t_o)91.09 661.8 Q -.165(ve)-.165 G 69.117(rride see).165 F
(Upstream Join T)2.75 E 54.52(imer see)-.385 F(Upstream Join T)2.75 E
(imer)-.385 E 503.999 666.55 72 666.55 DL 346.373 634.55 346.373 666.55
DL 179.202 634.55 179.202 666.55 DL 503.999 634.55 503.999 666.55 DL 72
634.55 72 666.55 DL(The upstream o)72 684.4 Q -.165(ve)-.165 G
(rride timer is only e).165 E -.165(ve)-.275 G 2.75(rs).165 G(et to t_o)
-2.75 E -.165(ve)-.165 G(rride; this v).165 E
(alue is de\214ned in the section on)-.275 E(Upstream Join T)72 697.4 Q
(imers.)-.385 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E
163.721(elas Section)-.165 F 2.75(4.11. [P)2.75 F(age 87])-.165 E EP
%%Page: 88 88
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF -.198(Ti)
72 85 S(mer Name: K).198 E(eepAli)-.275 E .22 -.11(ve T)-.11 H
(imer \(KA)-.088 E(T\(S,G\)\))-1.045 E .44 LW 503.993 99.35 72 99.35 DL
-1.012(Va)89.387 109.6 S(lue Name)1.012 E -1.012(Va)92.487 G 113.805
(lue Explanation)1.012 F 503.993 114.35 72 114.35 DL 503.993 116.35 72
116.35 DL F0 -.275(Ke)89.387 126.6 S(epali).275 E -.165(ve)-.275 G
68.364(_Period Def).165 F(ault: 210 secs)-.11 E
(Period after last \(S,G\))381.644 126.6 Q(data pack)381.644 139.6 Q
(et during)-.11 E(which \(S,G\) Join state)381.644 152.6 Q
(will be maintained e)381.644 165.6 Q -.165(ve)-.275 G(n).165 E
(in the absence of \(S,G\))381.644 178.6 Q(Join messages.)381.644 191.6
Q 503.993 196.35 72 196.35 DL(RP_K)89.387 206.6 Q(eepali)-.275 E -.165
(ve)-.275 G(_Period).165 E 2.75(\(3*R)238.601 206.6 S -.165(eg)-2.75 G
(ister Period).165 E(Suppression \) +)238.601 219.6 Q(Re)238.601 232.6 Q
(gister Probe T)-.165 E(ime)-.385 E(As K)381.644 206.6 Q(eepali)-.275 E
-.165(ve)-.275 G(_Period,).165 E -.22(bu)381.644 219.6 S 2.75(ta).22 G
2.75(tt)-2.75 G(he RP when a)-2.75 E(Re)381.644 232.6 Q
(gisterStop is sent.)-.165 E 503.993 237.35 72 237.35 DL 355.563 99.35
355.563 237.35 DL 212.52 99.35 212.52 237.35 DL 503.993 99.35 503.993
237.35 DL 72 99.35 72 237.35 DL(The normal k)72 251.6 Q(eepali)-.11 E
.33 -.165(ve p)-.275 H(eriod for the KA).165 E(T\(S,G\) def)-1.221 E
(aults to 210 seconds.)-.11 E(Ho)5.5 E(we)-.275 E -.165(ve)-.275 G 2.75
(ra).165 G 2.75(tt)-2.75 G(he RP)-2.75 E 2.75(,t)-1.221 G(he)-2.75 E
-.11(ke)72 264.6 S(epali).11 E .33 -.165(ve p)-.275 H
(eriod must be at least the Re).165 E(gister_Suppression_T)-.165 E
(ime or the RP may time out the)-.385 E(\(S,G\) state before the ne)72
277.6 Q(xt Null-Re)-.165 E(gister arri)-.165 E -.165(ve)-.275 G 2.75
(s. Thus).165 F(the KA)2.75 E(T\(S,G\) is set to)-1.221 E(max\(K)72
290.6 Q(eepali)-.275 E -.165(ve)-.275 G(_Period, RP_K).165 E(eepali)
-.275 E -.165(ve)-.275 G(_Period\).).165 E F1 -.198(Ti)72 316.6 S
(mer Name: Register Stop T).198 E(imer \(RST\(S,G\)\))-.198 E 503.994
330.95 72 330.95 DL -1.012(Va)86.457 341.2 S(lue Name)1.012 E -1.012(Va)
105.257 G 104.146(lue Explanation)1.012 F 503.994 345.95 72 345.95 DL
503.994 347.95 72 347.95 DL F0(Re)86.457 358.2 Q(gister Suppression T)
-.165 E 40.621(ime Def)-.385 F(ault: 60 seconds)-.11 E
(Period during which a)381.825 358.2 Q(DR stops sending)381.825 371.2 Q
(Re)381.825 384.2 Q(gister)-.165 E(-encapsulated)-.22 E
(data to the RP after)381.825 397.2 Q(recei)381.825 410.2 Q(ving a Re)
-.275 E(gisterStop)-.165 E 503.994 414.95 72 414.95 DL(Re)86.457 425.2 Q
(gister Probe T)-.165 E 68.737(ime Def)-.385 F(ault: 5 seconds)-.11 E
-.385(Ti)381.825 425.2 S(me before RST).385 E -.165(ex)381.825 438.2 S
(pires when a DR may).165 E(send a Null-Re)381.825 451.2 Q(gister to)
-.165 E(the RP to cause it to)381.825 464.2 Q(resend a Re)381.825 477.2
Q(gisterStop)-.165 E(message.)381.825 490.2 Q 503.994 494.95 72 494.95
DL 360.139 330.95 360.139 494.95 DL 226.755 330.95 226.755 494.95 DL
503.994 330.95 503.994 494.95 DL 72 330.95 72 494.95 DL F1(5.)72 522.2 Q
/F2 14/Times-Bold@0 SF(IAN)5.5 E 3.5(AC)-.28 G(onsiderations)-3.5 E F1
(5.1.)72 548.2 Q/F3 13/Times-Bold@0 SF(PIM Addr)5.5 E(ess F)-.234 E
(amily)-.325 E F0(The PIM Address F)72 564.8 Q(amily \214eld w)-.165 E
(as chosen to be 8 bits as a tradeof)-.11 E 2.75(fb)-.275 G(etween)-2.75
E(pack)72 577.8 Q(et format and use of the IAN)-.11 E 2.75(Aa)-.385 G
(ssigned numbers.)-2.75 E(Since when the PIM pack)5.5 E(et format w)-.11
E(as)-.11 E(designed only 15 v)72 590.8 Q
(alues were assigned for Address F)-.275 E(amilies, and lar)-.165 E
(ge numbers of ne)-.198 E 2.75(wA)-.275 G(ddress)-2.75 E -.165(Fa)72
603.8 S(mily v).165 E(alues were not en)-.275 E
(visioned, 8 bits seemed lar)-.44 E(ge enough.)-.198 E(Ho)5.5 E(we)-.275
E -.165(ve)-.275 G .88 -.44(r, t).165 H(he IAN).44 E 2.75(Aa)-.385 G
(ssigns)-2.75 E(Address F)72 616.8 Q(amilies in a 16-bit \214eld.)-.165
E(Therefore, the PIM Address F)5.5 E(amily is allocated as follo)-.165 E
(ws:)-.275 E -1.221(Va)97 633.4 S
(lues 0 through 127 are designated to ha)1.221 E .33 -.165(ve t)-.22 H
(he same meaning as IAN).165 E(A-assigned Address)-.385 E -.165(Fa)97
646.4 S(mily Numbers [5].).165 E -1.221(Va)97 663 S
(lues 128 through 250 are designated to be assigned by the IAN)1.221 E
2.75(Ab)-.385 G(ased upon IESG)-2.75 E(Appro)97 676 Q -.275(va)-.165 G
(l, as de\214ned in [7].).275 E -1.221(Va)97 692.6 S
(lues 251 through 255 are designated for Pri)1.221 E -.275(va)-.275 G
(te Use, as de\214ned in [7].).275 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 169.221(elas Section)-.165 F 2.75
(5.1. [P)2.75 F(age 88])-.165 E EP
%%Page: 89 89
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(5.2.)72
85 Q/F2 13/Times-Bold@0 SF(PIM Hello Options)5.5 E F0 -1.221(Va)72 101.6
S(lues 17 through 65000 are to be assigned by the IAN)1.221 E 2.75
(A. Since)-.385 F(the space is lar)2.75 E(ge, the)-.198 E 2.75(ym)-.165
G(ay be)-2.75 E(assigned as First Come First Serv)72 114.6 Q
(ed as de\214ned in [7]. Such assignments are v)-.165 E
(alid for one year)-.275 E(,)-.44 E(and may be rene)72 127.6 Q 2.75
(wed. Permanent)-.275 F
(assignments require a speci\214cation \(see "Speci\214cation)2.75 E
(Required" in [7].\))72 140.6 Q F1(6.)72 166.6 Q/F3 14/Times-Bold@0 SF
(Security Considerations)5.5 E F0
(The IPsec authentication header [8] MA)72 183.2 Q 2.75(Yb)-1.155 G 2.75
(eu)-2.75 G(sed to pro)-2.75 E(vide data inte)-.165 E
(grity protection and)-.165 E
(groupwise data origin authentication of PIM protocol messages.)72 196.2
Q(Authentication of PIM messages)5.5 E(can protect ag)72 209.2 Q
(ainst unw)-.055 E(anted beha)-.11 E
(viors caused by unauthorized or altered PIM messages.)-.22 E F1(6.1.)72
235.2 Q F2(Attacks based on f)5.5 E(or)-.325 E(ged messages)-.13 E F0
(The e)72 251.8 Q(xtent of possible damage depends on the type of count\
erfeit messages accepted.)-.165 E 1.76 -.88(We n)5.5 H -.165(ex).88 G(t)
.165 E(consider the impact of possible for)72 264.8 Q
(geries, including for)-.198 E(ged link-local \(Join/Prune, Hello, and)
-.198 E(Assert\) and for)72 277.8 Q(ged unicast \(Re)-.198 E
(gister and Re)-.165 E(gister)-.165 E(-Stop\) messages.)-.22 E F1 2.75
(6.1.1. F)72 303.8 R(or)-.275 E(ged link-local messages)-.11 E F0(Join/\
Prune, Hello, and Assert messages are all sent to the link-local ALL_PI\
M_R)72 320.4 Q(OUTERS)-.44 E(multicast addresses, and thus are not forw)
72 333.4 Q(arded by a compliant router)-.11 E 5.5(.A)-.605 G(for)-2.75 E
(ged message of this)-.198 E(type can only reach a LAN if it w)72 346.4
Q(as sent by a local host or if it w)-.11 E(as allo)-.11 E
(wed onto the LAN by a)-.275 E(compromised or non-compliant router)72
359.4 Q(.)-.605 E 14(1. A)72 376 R(for)2.75 E
(ged Join/Prune message can cause multicast traf)-.198 E
(\214c to be deli)-.275 E -.165(ve)-.275 G(red to links where there).165
E(are no le)97 389 Q(gitimate requestors, potentially w)-.165 E
(asting bandwidth on that link.)-.11 E 2.75(Af)5.5 G(or)-2.75 E(ged lea)
-.198 E -.165(ve)-.22 G(message on a multi-access LAN is generally not \
a signi\214cant attack in PIM, because an)97 402 Q(y)-.165 E(le)97 415 Q
(gitimately joined router on the LAN w)-.165 E(ould o)-.11 E -.165(ve)
-.165 G(rride the lea).165 E .33 -.165(ve w)-.22 H
(ith a join before the).165 E(upstream router stops forw)97 428 Q
(arding data to the LAN.)-.11 E 16.75(2. By)72 444.6 R(for)2.75 E(ging \
a hello message, an unauthorized router can cause itself to be elected \
as the)-.198 E(designated router on a LAN.)97 457.6 Q
(The designated router on a LAN is \(in the absence of asserts\))5.5 E
(responsible for forw)97 470.6 Q(arding traf)-.11 E
(\214c to that LAN on behalf of an)-.275 E 2.75(yl)-.165 G
(ocal members.)-2.75 E(The)5.5 E
(designated router is also responsible for re)97 483.6 Q(gister)-.165 E
(-encapsulating to the RP an)-.22 E 2.75(yp)-.165 G(ack)-2.75 E
(ets that)-.11 E(are originated by hosts on the LAN.)97 496.6 Q
(Thus, the ability of local hosts to send and recei)5.5 E -.165(ve)-.275
G(multicast traf)97 509.6 Q(\214c may be compromised by a for)-.275 E
(ged hello message.)-.198 E 14(3. By)72 526.2 R(for)2.75 E
(ging an Assert message on a multi-access LAN, an attack)-.198 E
(er could cause the le)-.11 E(gitimate)-.165 E(designated forw)97 539.2
Q(arder to stop forw)-.11 E(arding traf)-.11 E(\214c to the LAN.)-.275 E
(Such a for)5.5 E(gery w)-.198 E(ould pre)-.11 E -.165(ve)-.275 G(nt)
.165 E(an)97 552.2 Q 2.75(yh)-.165 G(osts do)-2.75 E
(wnstream of that LAN from recei)-.275 E(ving traf)-.275 E(\214c.)-.275
E F1 2.75(6.1.2. F)72 578.2 R(or)-.275 E(ged unicast messages)-.11 E F0
(Re)72 594.8 Q(gister messages and Re)-.165 E(gister)-.165 E
(-Stop messages are sent by a source and forw)-.22 E(arded by)-.11 E
(intermediate routers to their destination using normal IP forw)72 607.8
Q 2.75(arding. Therefore,)-.11 F(without data)2.75 E
(origin authentication, an attack)72 620.8 Q(er who is located an)-.11 E
(ywhere in the netw)-.165 E(ork may be able to for)-.11 E(ge a)-.198 E
(Re)72 633.8 Q(gister or Re)-.165 E(gister)-.165 E(-Stop message.)-.22 E
(The follo)5.5 E(wing attacks do not apply to a PIM-SSM-only)-.275 E
(implementation, as these messages are not required for PIM-SSM.)72
646.8 Q 1.76 -.88(We c)5.5 H(onsider the ef).88 E(fect of a)-.275 E(for)
72 659.8 Q(gery of each of these messages ne)-.198 E(xt.)-.165 E 19.5
(1B)72 676.4 S 2.75(yf)-19.5 G(or)-2.75 E(ging a Re)-.198 E
(gister message, an attack)-.165 E(er can cause the RP to inject for)
-.11 E(ged traf)-.198 E(\214c onto the)-.275 E(shared multicast tree.)97
689.4 Q 19.5(2B)72 706 S 2.75(yf)-19.5 G(or)-2.75 E(ging a Re)-.198 E
(gister)-.165 E(-stop message, an attack)-.22 E(er can pre)-.11 E -.165
(ve)-.275 G(nt a le).165 E(gitimate DR from)-.165 E(Re)97 719 Q
(gistering pack)-.165 E(ets to the RP)-.11 E 5.5(.T)-1.221 G
(his can pre)-5.5 E -.165(ve)-.275 G
(nt local hosts on that LAN from sending).165 E(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 160.971(elas Section)-.165 F 2.75
(6.1.2. [P)2.75 F(age 89])-.165 E EP
%%Page: 90 90
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(multicast pack)97 85 Q(ets.)
-.11 E(The abo)72 101.6 Q .33 -.165(ve t)-.165 H .22 -.11(wo P).165 H
(IM messages are not changed by intermediate routers and need only be e)
.11 E(xamined)-.165 E(by the intended recei)72 114.6 Q -.165(ve)-.275 G
3.96 -.605(r. T).165 H
(hus these messages can be authenticated end-to-end, using AH.).605 E/F1
11/Times-Bold@0 SF(6.2.)72 140.6 Q/F2 13/Times-Bold@0 SF
(Non-cryptographic A)5.5 E(uthentication Mechanisms)-.65 E F0 2.75(AP)72
157.2 S(IM router SHOULD pro)-2.75 E
(vide an option to limit the set of neighbors from which it will accept)
-.165 E(Join/Prune, Assert, and Hello messages.)72 170.2 Q
(Either static con\214guration of IP addresses or an IPsec)5.5 E
(security association may be used.)72 183.2 Q
(Furthermore, a PIM router SHOULD NO)5.5 E 2.75(Ta)-.44 G
(ccept protocol)-2.75 E
(messages from a router from which it has not yet recei)72 196.2 Q -.165
(ve)-.275 G 2.75(dav).165 G(alid Hello message.)-3.025 E 2.75(AD)72
212.8 S(esignated Router MUST NO)-2.75 E 2.75(Tr)-.44 G -.165(eg)-2.75 G
(ister).165 E(-encapsulate a pack)-.22 E
(et and send it to the RP unless the)-.11 E(source address of the pack)
72 225.8 Q(et is a le)-.11 E -.055(ga)-.165 G 2.75(la).055 G
(ddress for the subnet on which the pack)-2.75 E(et w)-.11 E(as recei)
-.11 E -.165(ve)-.275 G(d.).165 E(Similarly)72 238.8 Q 2.75(,aD)-.715 G
(esignated Router SHOULD NO)-2.75 E 2.75(Ta)-.44 G(ccept a Re)-2.75 E
(gister)-.165 E(-Stop pack)-.22 E(et whose IP source)-.11 E
(address is not a v)72 251.8 Q(alid RP address for the local domain.)
-.275 E(An implementation SHOULD pro)72 268.4 Q
(vide a mechanism to allo)-.165 E 2.75(waD)-.275 G 2.75(Rt)-2.75 G 2.75
(or)-2.75 G(estrict the range of source)-2.75 E
(addresses from which it accepts Re)72 281.4 Q(gister)-.165 E
(-encapsulated pack)-.22 E(ets.)-.11 E
(All options that restrict the range of addresses from which pack)72 298
Q(ets are accepted MUST def)-.11 E(ault to)-.11 E(allo)72 311 Q
(wing all pack)-.275 E(ets.)-.11 E F1 2.75(6.2.1. Register)72 337 R
(Nonces)2.75 E F0 2.75(AR)72 353.6 S -.165(eg)-2.75 G
(ister Nonce mechanism MA).165 E 2.75(Yb)-1.155 G 2.75(eu)-2.75 G
(sed to pro)-2.75 E(vide a limited form of protection ag)-.165 E(ainst)
-.055 E(for)72 366.6 Q(ged Re)-.198 E(gister Stop messages.)-.165 E
(In this approach, each re)5.5 E(gister pack)-.165 E
(et carries a 32-bit nonce)-.11 E(which is randomly generated by the re)
72 379.6 Q(gistering DR.)-.165 E 2.75(AR)5.5 G -.165(eg)-2.75 G(ister)
.165 E(-Stop pack)-.22 E(et is only accepted by)-.11 E
(the DR if it carries a nonce that it recently transmitted to the RP)72
392.6 Q 5.5(.T)-1.221 G(he DR should periodically)-5.5 E
(change the nonce that it is sending.)72 405.6 Q
(It is RECOMMENDED to change the nonce at least e)5.5 E -.165(ve)-.275 G
(ry 30).165 E 2.75(minutes. A)72 418.6 R(DR MUST k)2.75 E
(eep track of e)-.11 E -.165(ve)-.275 G
(ry nonce that it has sent in the last 3.5 * Re).165 E(gister)-.165 E
(Suppression T)72 431.6 Q
(ime, in order to ensure that it recognizes a nonce used by the DR.)
-.385 E(The nonce is carried as an option in the Re)72 448.2 Q
(gister and Re)-.165 E(gister)-.165 E(-Stop messages [xxx details tbd].)
-.22 E(This option should only be enabled if the DR has kno)72 464.8 Q
(wledge that the RP supports the re)-.275 E(gister)-.165 E
(nonce mechanism.)72 477.8 Q
(The mechanism for determining that the RP supports the Re)5.5 E
(gister Nonce)-.165 E(mechanism is out of the scope of this document.)72
490.8 Q(Implementations that support the Re)5.5 E(gister)-.165 E
(Nonce MUST pro)72 503.8 Q(vide \(at least\) a manual con\214guration o\
ption for it, and the capability MUST)-.165 E(def)72 516.8 Q(ault to of)
-.11 E(f.)-.275 E F1(6.3.)72 542.8 Q F2 -.65(Au)5.5 G
(thentication using IPsec).65 E F0(The IPsec [8] transport mode using t\
he Authentication Header \(AH\) is the recommended method)72 559.4 Q
(to pre)72 572.4 Q -.165(ve)-.275 G(nt the abo).165 E .33 -.165(ve a)
-.165 H(ttacks PIM.).165 E(The anti-replay option pro)5.5 E
(vided by IPsec SHOULD also be)-.165 E 2.75(enabled. The)72 585.4 R(spe\
ci\214c AH authentication algorithm and parameters, including the choic\
e of)2.75 E(authentication algorithm and the choice of k)72 598.4 Q
-.165(ey)-.11 G 2.75(,a)-.55 G(re con\214gured by the netw)-2.75 E
(ork administrator)-.11 E 5.5(.T)-.605 G(he)-5.5 E
(Encapsulating Security P)72 611.4 Q(ayload \(ESP\) MA)-.165 E 2.75(Ya)
-1.155 G(lso be used to pro)-2.75 E(vide both encryption and)-.165 E
(authentication of PIM protocol messages.)72 624.4 Q
(When IPsec authentication is used, a PIM router)5.5 E
(should reject \(drop without processing\) an)72 637.4 Q 2.75(yu)-.165 G
(nauthorized PIM protocol messages.)-2.75 E 1.76 -.88(To u)72 654 T
(se IPsec, the administrator of a PIM netw).88 E
(ork con\214gures each PIM router with one or more)-.11 E(Security Asso\
ciations and associated SPI\(s\) that are used by senders to sign PIM p\
rotocol)72 667 Q(messages and are used by recei)72 680 Q -.165(ve)-.275
G(rs to authenticate recei).165 E -.165(ve)-.275 G 2.75(dP).165 G
(IM protocol messages.)-2.75 E(This)5.5 E(document does not describe pr\
otocols for establishing Security Associations.)72 693 Q
(It assumes that)5.5 E
(manual con\214guration of Security Associations is performed, b)72 706
Q(ut it does not preclude the use of)-.22 E(some future ne)72 719 Q
(gotiation protocol to establish Security Associations.)-.165 E
(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 169.221
(elas Section)-.165 F 2.75(6.3. [P)2.75 F(age 90])-.165 E EP
%%Page: 91 91
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(The follo)72 85 Q(wing section\
s describe the Security Associations required to protect PIM protocol)
-.275 E(messages.)72 98 Q/F1 11/Times-Bold@0 SF 2.75(6.3.1. Pr)72 124 R
(otecting link-local multicast messages)-.198 E F0(The netw)72 140.6 Q(\
ork administrator de\214nes a Security Association \(SA\) and Security \
P)-.11 E(arameters Inde)-.165 E(x)-.165 E(\(SPI\) that is to be used to\
 authenticate all link-local PIM protocol messages \(Hello, Join/Prune,)
72 153.6 Q(and Assert\) on each link in a PIM domain.)72 166.6 Q
(All link-local PIM protocol messages use SPI 0.)5.5 E
(The Security Polic)72 183.2 Q 2.75(yD)-.165 G(atabase at a PIM router \
should be con\214gured to ensure that all incoming)-2.75 E
(and outgoing Join/Prune, Assert, and Hello pack)72 196.2 Q
(ets use the SA associated with the interf)-.11 E(ace to)-.11 E
(which the pack)72 209.2 Q(et is sent.)-.11 E
(Note that, according to [8] there is nominally a dif)72 225.8 Q
(ferent Security Association Database \(SAD\) for)-.275 E
(each router interf)72 238.8 Q 2.75(ace. Thus,)-.11 F
(the selected Security Association for an inbound PIM pack)2.75 E
(et can)-.11 E -.275(va)72 251.8 S(ry depending on the interf).275 E
(ace on which the pack)-.11 E(et arri)-.11 E -.165(ve)-.275 G 2.75
(d. This).165 F -.11(fa)2.75 G(ct allo).11 E(ws the netw)-.275 E(ork)
-.11 E(administrator to use dif)72 264.8 Q
(ferent authentication methods for each link, e)-.275 E -.165(ve)-.275 G
2.75(nt).165 G(hough the destination)-2.75 E
(address is the same for all link-local PIM pack)72 277.8 Q(ets, re)-.11
E -.055(ga)-.165 G(rdless of interf).055 E(ace.)-.11 E F1 2.75
(6.3.2. Pr)72 307.4 R(otecting unicast messages)-.198 E F0
(IPSec can also be used to pro)72 324 Q
(vide data origin authentication and data inte)-.165 E
(grity protection for the)-.165 E(Re)72 337 Q(gister and Re)-.165 E
(gister)-.165 E(-Stop unicast messages.)-.22 E F1 2.75
(6.3.2.1. Register)72 363 R(messages)2.75 E F0(The Security Polic)72
379.6 Q 2.75(yD)-.165 G(atabase at e)-2.75 E -.165(ve)-.275 G
(ry PIM router is con\214gured to select a Security Association to).165
E(use when sending PIM Re)72 392.6 Q(gister pack)-.165 E
(ets to each rendezv)-.11 E(ous point.)-.22 E
(In the most general mode of operation, the Security Polic)72 409.2 Q
2.75(yD)-.165 G(atabase at each DR is con\214gured to)-2.75 E
(select a unique SA and SPI for traf)72 422.2 Q(\214c sent to each RP)
-.275 E 5.5(.T)-1.221 G(his allo)-5.5 E(ws each DR to ha)-.275 E .33
-.165(ve a d)-.22 H(if).165 E(ferent)-.275 E
(authentication algorithm and k)72 435.2 Q .33 -.165(ey t)-.11 H 2.75
(ot).165 G(alk to the RP)-2.75 E 5.5(.H)-1.221 G -.275(ow)-5.5 G -2.365
-.275(ev e).275 H .88 -.44(r, t).275 H(his creates a daunting k).44 E
-.165(ey)-.11 G(management and distrib)72 448.2 Q
(ution problem for the netw)-.22 E(ork administrator)-.11 E 5.5(.T)-.605
G(herefore, it may be)-5.5 E(preferable in PIM domains where all Design\
ated Routers are under a single administrati)72 461.2 Q -.165(ve)-.275 G
(control, to use the same authentication algorithm parameters \(includi\
ng the k)72 474.2 Q -.165(ey)-.11 G 2.75(\)f).165 G(or all Re)-2.75 E
(gistered)-.165 E(pack)72 487.2 Q(ets in a domain, re)-.11 E -.055(ga)
-.165 G(rdless of who is the RP and re).055 E -.055(ga)-.165 G
(rdless of who is the DR.).055 E(In this "single shared k)72 503.8 Q
-.165(ey)-.11 G 2.75("m).165 G(ode of operation, the netw)-2.75 E
(ork administrator must choose an SPI for)-.11 E
(each DR that will be used to send it PIM protocol pack)72 516.8 Q 2.75
(ets. The)-.11 F(Security Polic)2.75 E 2.75(yD)-.165 G(atabase at e)
-2.75 E -.165(ve)-.275 G(ry).165 E(DR is con\214gured to select a Secur\
ity Association \(including the authentication algorithm,)72 529.8 Q
(authentication parameters, and this SPI\) when sending re)72 542.8 Q
(gister messages to this RP)-.165 E(.)-1.221 E(By using a single authen\
tication algorithm and associated parameters, the k)72 559.4 Q .33 -.165
(ey d)-.11 H(istrib).165 E(ution)-.22 E(problem is simpli\214ed.)72
572.4 Q(Note ho)5.5 E(we)-.275 E -.165(ve)-.275 G .88 -.44(r, t).165 H
(hat this metohd has the property that, in order to change).44 E
(the authentication method or authentication k)72 585.4 Q .33 -.165
(ey u)-.11 H(sed, all routers in the domain must be updated.).165 E F1
2.75(6.3.2.2. Register)72 611.4 R(Stop messages)2.75 E F0(Similarly)72
628 Q 2.75(,t)-.715 G(he Security Polic)-2.75 E 2.75(yD)-.165 G
(atabase at each Rendezv)-2.75 E
(ous Point should be con\214gured to choose)-.22 E 2.75(aS)72 641 S
(ecurity Association to use when sending Re)-2.75 E
(gister Stop messages.)-.165 E(Because Re)5.5 E(gister Stop)-.165 E
(messages are unicast to the destination DR, a dif)72 654 Q
(ferent Security Association and a potentially)-.275 E
(unique SPI is required for each DR.)72 667 Q([xxx Can we reserv)72
683.6 Q 2.75(eas)-.165 G
(ingle SPI at all routers in the domain to simplify the con\214guration)
-2.75 E(problem?])72 696.6 Q(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E
(ouv)-.385 E 152.721(elas Section)-.165 F 2.75(6.3.2.2. [P)2.75 F
(age 91])-.165 E EP
%%Page: 92 92
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(In order to simplify the manag\
ement problem, it may be acceptable to use the same authentication)72 85
Q(algorithm and authentication parameters, re)72 98 Q -.055(ga)-.165 G
(rdless of the sending RP and re).055 E -.055(ga)-.165 G(rdless of the)
.055 E(destination DR.)72 111 Q
(Although a unique Security Association is needed for each DR, the same)
5.5 E(authentication algorithm and authentication algorithm parameters \
\(secret k)72 124 Q -.165(ey)-.11 G 2.75(\)c).165 G(an be shared by)
-2.75 E(all DRs and by all RPs.)72 137 Q/F1 11/Times-Bold@0 SF(6.4.)72
166.6 Q/F2 13/Times-Bold@0 SF(Denial of Ser)5.5 E(vice Attacks)-.13 E F0
(There are a number of possible denial of service attacks ag)72 183.2 Q
(ainst PIM that can be caused by)-.055 E(generating f)72 196.2 Q
(alse PIM protocol messages or e)-.11 E -.165(ve)-.275 G 2.75(nb).165 G
2.75(yg)-2.75 G(enerating data f)-2.75 E(alse traf)-.11 E 2.75
(\214c. Authenticating)-.275 F(PIM protocol traf)72 209.2 Q(\214c pre)
-.275 E -.165(ve)-.275 G(nts some, b).165 E
(ut not all of these attacks.)-.22 E(The possible attacks include:)5.5 E
21.337(-S)72 225.8 S(ending pack)-21.337 E(ets to man)-.11 E 2.75(yd)
-.165 G(if)-2.75 E
(ferent group addresses quickly can be a denial of service attack)-.275
E(in and of itself.)97 238.8 Q(This will cause man)5.5 E 2.75(yr)-.165 G
-.165(eg)-2.75 G(ister).165 E(-encapsulated pack)-.22 E
(ets, loading the DR, the RP)-.11 E(,)-1.221 E
(and the routers between the DR and the RP)97 251.8 Q(.)-1.221 E 21.337
(-F)72 268.4 S(or)-21.502 E
(ging Join messages can cause a multicast tree to get set up.)-.198 E
2.75(Al)5.5 G(ar)-2.75 E(ge number of for)-.198 E(ged)-.198 E
(joins can consume router resources and result in denial of service.)97
281.4 Q 21.337(-[)72 298 S(xxx Man)-21.337 E 2.75(yo)-.165 G(thers])
-2.75 E F1(7.)72 324 Q/F3 14/Times-Bold@0 SF -.7(Au)5.5 G(thors' Addr).7
E(esses)-.252 E F0(Bill Fenner)108 343 Q -1.221(AT)108 356 S
(&T Labs - Research)1.221 E(75 W)108 369 Q(illo)-.44 E 2.75(wR)-.275 G
(oad)-2.75 E(Menlo P)108 382 Q(ark, CA 94025)-.165 E
(fenner@research.att.com)108 395 Q(Mark Handle)108 420 Q(y)-.165 E -.44
(AC)108 433 S(IRI/ICSI).44 E(1947 Center St, Suite 600)108 446 Q(Berk)
108 459 Q(ele)-.11 E 1.43 -.715(y, C)-.165 H 2.75(A9).715 G(4708)-2.75 E
(mjh@aciri.or)108 472 Q(g)-.198 E(Hugh Holbrook)108 497 Q(Cisco Systems)
108 510 Q(170 W)108 523 Q 2.75(.T)-1.012 G(asman Dri)-3.63 E -.165(ve)
-.275 G(San Jose, CA 95134)108 536 Q(holbrook@cisco.com)108 549 Q
(Isidor K)108 574 Q(ouv)-.385 E(elas)-.165 E(Cisco Systems)108 587 Q
(170 W)108 600 Q 2.75(.T)-1.012 G(asman Dri)-3.63 E -.165(ve)-.275 G
(San Jose, CA 95134)108 613 Q -.11(ko)108 626 S(uv).11 E(elas@cisco.com)
-.165 E F1(8.)72 671 Q F3(Ackno)5.5 E(wledgments)-.14 E F0(PIM-SM w)72
687.6 Q(as designed o)-.11 E -.165(ve)-.165 G 2.75(rm).165 G(an)-2.75 E
2.75(yy)-.165 G(ears by a lar)-2.75 E
(ge group of people, including ideas, comments,)-.198 E
(and corrections from Deborah Estrin, Dino F)72 700.6 Q
(arinacci, Ahmed Helmy)-.165 E 2.75(,D)-.715 G -.22(av)-2.75 G
(id Thaler).22 E 2.75(,S)-.44 G(te)-2.75 E -.165(ve)-.275 G(Deering, V)
72 713.6 Q(an Jacobson, C. Liu, Puneet Sharma, Liming W)-1.221 E(ei, T)
-.88 E(om Pusateri, T)-.88 E(on)-.88 E 2.75(yB)-.165 G(allardie, Scott)
-2.75 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E(ouv)-.385 E 177.471
(elas Section)-.165 F 2.75(8. [P)2.75 F(age 92])-.165 E EP
%%Page: 93 93
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E(Brim, Jon Cro)72 85 Q
(wcroft, P)-.275 E
(aul Francis, Joel Halpern, Horst Hodel, Polly Huang, Stephen Ostro)
-.165 E(wski,)-.275 E
(Lixia Zhang, Girish Chandranmenon, Brian Haberman, Hal Sandick, Mik)72
98 Q 2.75(eM)-.11 G(roz and Garry)-2.75 E -.165(Ku)72 111 S(mp.).165 E
(Thanks are due to the American Licorice Compan)72 127.6 Q 1.43 -.715
(y, f)-.165 H(or its obscure b).715 E(ut possibly essential role in)-.22
E(the creation of this document.)72 140.6 Q/F1 11/Times-Bold@0 SF(9.)72
166.6 Q/F2 14/Times-Bold@0 SF(Refer)5.5 E(ences)-.252 E F0([1] T)72
183.2 Q 2.75(.B)-.814 G(ates , R. Chandra , D. Katz , Y)-2.75 E 2.75(.R)
-1.419 G(ekhter)-2.75 E 2.75(,")-.44 G
(Multiprotocol Extensions for BGP-4", RFC)-2.75 E(2283)97 196.2 Q
([2] S.E. Deering, "Host e)72 212.8 Q
(xtensions for IP multicasting", RFC 1112, Aug 1989.)-.165 E([3] W)72
229.4 Q 2.75(.F)-1.012 G(enner)-2.75 E 2.75(,")-.44 G
(Internet Group Management Protocol, V)-2.75 E(ersion 2", RFC 2236.)
-1.221 E([4] W)72 246 Q 2.75(.F)-1.012 G(enner)-2.75 E 2.75(,M)-.44 G
2.75(.H)-2.75 G(andle)-2.75 E 1.43 -.715(y, H)-.165 H 2.75(.H).715 G
(olbrook, I. K)-2.75 E(ouv)-.385 E
(elas, "Bootstrap Router \(BSR\) Mechanism for)-.165 E
(PIM Sparse Mode", draft-ietf-pim-sm-bsr)97 259 Q(-00.txt, w)-.22 E
(ork in progress.)-.11 E/F3 10/Symbol SF<ef>555 274.6 Q<ef>-4.94 -10 M
<ef>-4.94 -10 M<ef>-4.94 -10 M F0([5] IAN)72 275.6 Q(A, "Address F)-.385
E(amily Numbers", link)-.165 E(ed from http://www)-.11 E(.iana.or)-.715
E(g/numbers.html)-.198 E([6] M. Handle)72 292.2 Q 1.43 -.715(y, I)-.165
H 2.75(.K).715 G(ouv)-3.135 E(elas, T)-.165 E 2.75(.S)-.814 G
(peakman, L. V)-2.75 E(icisano, "Bi-directional Protocol Independent)
-.66 E(Multicast", draft-ietf-pim-bidir)97 305.2 Q(-02.txt, w)-.22 E
(ork in progress.)-.11 E([7] T)72 321.8 Q 2.75(.N)-.814 G
(arten , H. Alv)-2.75 E(estrand, "Guidelines for Writing an IAN)-.165 E
2.75(AC)-.385 G(onsiderations Section in RFCs",)-2.75 E(RFC 2434.)97
334.8 Q([8] S. K)72 351.4 Q(ent, R. Atkinson, "Security Architecture fo\
r the Internet Protocol.", RFC 2401.)-.275 E
([9] S. Deering, R. Hinden, "Internet Protocol, V)72 368 Q
(ersion 6 \(IPv6\) Speci\214cation", RFC 2460.)-1.221 E([10] H. Holbroo\
k, B. Cain, "Source-Speci\214c Multicast for IP", draft-holbrook-ssm-00\
.txt, w)72 384.6 Q(ork in)-.11 E(progress.)97 397.6 Q
([11] D. Black, "Dif)72 414.2 Q(ferentiated Services and T)-.275 E
(unnels", RFC 2983.)-.495 E(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165 E
(ouv)-.385 E 177.471(elas Section)-.165 F 2.75(9. [P)2.75 F(age 93])
-.165 E EP
%%Page: 94 94
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 11/Times-Bold@0 SF(10.)72 85
Q/F2 14/Times-Bold@0 SF(Index)5.5 E/F3 10/Times-Roman@0 SF
(AssertCancel\(*,G\))72 97 Q F0 11(........................)10.8 G F3
(61)6.5 E(AssertT)72 109 Q(imer\(*,G,I\))-.35 E F0 11
(........................)8.65 G F3(11,16,57,87)-31 E(AssertT)72 121 Q
(imer\(S,G,I\))-.35 E F0 11(........................)8.09 G F3
(12,16,51,87)-31 E(AssertT)72 133 Q(rackingDesired\(*,G,I\))-.35 E F0 11
(.....................)7.14 G F3(58)6.5 E(AssertT)72 145 Q
(rackingDesired\(S,G,I\))-.35 E F0 11(.....................)6.58 G/F4 10
/Times-Bold@0 SF(54)6.5 E F3(AssertW)72 157 Q(inner\(*,G,I\))-.4 E F0 11
(........................)3.15 G F3(14,16)-6 E(AssertW)72 169 Q
(inner\(S,G,I\))-.4 E F0 11(........................)2.59 G F3
(14,16,56,62)-31 E(AssertW)72 181 Q(innerMetric\(S,G,I\))-.4 E F0 11
(......................)3.43 G F3(56)6.5 E(assert_metric)72 193 Q F0 11
(..........................)4.68 G F3(61)6.5 E(Assert_Ov)72 205 Q
(erride_Interv)-.15 E(al)-.25 E F0 11(......................)11.21 G F3
(56,60,87)-18.5 E(Assert_T)72 217 Q(ime)-.35 E F0 11
(..........................)6.69 G F3(56,60,87)-18.5 E -1.11(AT)72 229 S
(\(*,G,I\))1.11 E F0 11(...........................)4.82 G F3
(11,16,57,87)-31 E -1.11(AT)72 241 S(\(S,G,I\))1.11 E F0 11
(...........................)4.26 G F3(12,16,51,87)-31 E(CheckSwitchT)72
253 Q(oSpt\(S,G\))-.8 E F0 11(.......................).33 G F4(18)6.5 E
F3(CouldAssert\(*,G,I\))72 265 Q F0 11(........................)8.29 G
F4(58)6.5 E F3(CouldAssert\(S,G,I\))72 277 Q F0 11
(........................)7.73 G F4(53)6.5 E F3(CouldRe)72 289 Q
(gister\(S,G\))-.15 E F0 11(........................)5.93 G F4(21)6.5 E
F3(DirectlyConnected\(S\))72 301 Q F0 11(.......................)11.49 G
F3(17,19,21)-18.5 E(Do)72 313 Q(wnstreamJPState\(*,*,RP)-.25 E(,I\))
-1.11 E F0 11(.....................)7.84 G F3(14)6.5 E(Do)72 325 Q
(wnstreamJPState\(*,G,I\))-.25 E F0 11(......................)5.49 G F3
(15)6.5 E(Do)72 337 Q(wnstreamJPState\(S,G,I\))-.25 E F0 11
(......................)4.93 G F3(15)6.5 E(Do)72 349 Q
(wnstreamJPState\(S,G,rpt,I\))-.25 E F0 11(.....................)5.07 G
F3(15)6.5 E(DR\(I\))72 361 Q F0 11(............................)6.62 G
F4(66)6.5 E F3(dr_is_better\(a,b,I\))72 373 Q F0 11
(........................)13.3 G F4(66)6.5 E F3(ET\(*,*,RP)72 385 Q
(,I\))-1.11 E F0 11(..........................)7.17 G F3(10,24,86)-18.5
E(ET\(*,G,I\))72 397 Q F0 11(...........................)4.82 G F3
(11,27,86)-18.5 E(ET\(S,G,I\))72 409 Q F0 11
(...........................)4.26 G F3(12,30,86)-18.5 E(ET\(S,G,rpt,I\))
72 421 Q F0 11(..........................)4.4 G F3(13,33,86)-18.5 E
(Hash_Function)72 433 Q F0 11(.........................)10.64 G F3(70)
6.5 E(Hello_Holdtime)72 445 Q F0 11(.........................)6.75 G F3
(86)6.5 E(Hello_Period)72 457 Q F0 11(..........................)4.67 G
F3(86)6.5 E(HT\(I\))72 469 Q F0 11(............................)7.18 G
F4(64)-6 E F3(,86)A(immediate_olist\(*,*,RP\))72 481 Q F0 11
(.......................).91 G F3(13,38)-6 E(immediate_olist\(*,G\))72
493 Q F0 11(.......................)13.42 G F4(14)-6 E F3(,41)A
(immediate_olist\(S,G\))72 505 Q F0 11(.......................)12.86 G
F4(14)-18.5 E F3(,45,61)A(in\214nite_assert_metric\(\))72 517 Q F0 11
(.......................)5.93 G F4(62)6.5 E F3(inherited_olist\(S,G\))72
529 Q F0 11(........................)5.78 G F4(14)-43.5 E F3
(,17,23,45,54)A(inherited_olist\(S,G,rpt\))72 541 Q F0 11
(.......................)5.92 G F4(14)-68.5 E F3(,17,19,47,49,51,61)A
(I_am_DR\(I\))72 553 Q F0 11(..........................)8.57 G F3(14,21)
-6 E(I_am_RP\(G\))72 565 Q F0 11(..........................)6.34 G F3
(23)6.5 E(J/P_HoldT)72 577 Q(ime)-.35 E F0 11
(..........................).01 G F3(86)6.5 E(J/P_Ov)72 589 Q
(erride_Interv)-.15 E(al)-.25 E F0 11(.......................)10.78 G F3
(26,29,32,35,76,86)-56 E(Join\(*,G\))72 601 Q F0 11
(...........................)6.2 G F3(6)11.5 E(JoinDesired\(*,*,RP\))72
613 Q F0 11(........................)3.84 G F3(38,49)-6 E
(JoinDesired\(*,G\))72 625 Q F0 11(.........................)2.6 G F3
(41,49)-6 E(JoinDesired\(S,G\))72 637 Q F0 11(.........................)
2.04 G F3(19,45,54)-18.5 E(joins\(*,*,RP\(G\)\))72 649 Q F0 11
(.........................)4.53 G F3(54)6.5 E(joins\(*,*,RP\))72 661 Q
F0 11(..........................)4.66 G F4(14)-31 E F3(,53,54,58)A
(joins\(*,G\))72 673 Q F0 11(...........................)3.42 G F4(15)
-31 E F3(,53,54,58)A(joins\(S,G\))72 685 Q F0 11
(...........................)2.86 G F4(15)-6 E F3(,53)A(JT\(*,*,RP\))72
697 Q F0 11(...........................).36 G F3(10,37,87)-18.5 E
(JT\(*,G\))72 709 Q F0 11(...........................)12.87 G F3
(11,40,87)-18.5 E(JT\(S,G\))72 721 Q F0 11(...........................)
12.31 G F3(12,43,87)-18.5 E F0(Fenner/Handle)72 769 Q(y/Holbrook/K)-.165
E(ouv)-.385 E 171.971(elas Section)-.165 F 2.75(10. [P)2.75 F(age 94])
-.165 E EP
%%Page: 95 95
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 10/Times-Roman@0 SF(KA)72 84
Q(T\(S,G\))-1.11 E F0 11(...........................)2.87 G F1
(12,17,21,23,45,87)-56 E -.25(Ke)72 96 S(epali).25 E -.15(ve)-.25 G -.35
(Ti).15 G(mer\(S,G\)).35 E F0 11(.......................)13.33 G F1
(12,17,21,23,45,87)-56 E -.25(Ke)72 108 S(epali).25 E -.15(ve)-.25 G
(_Period).15 E F0 11(.........................).75 G F1(87)6.5 E
(lan_delay_enabled\(I\))72 120 Q F0 11(........................).53 G/F2
10/Times-Bold@0 SF(67)6.5 E F1(local_recei)72 132 Q -.15(ve)-.25 G(r_e)
.15 E(xclude\(S,G,I\))-.15 E F0 11(.....................)6.79 G F1(14)
6.5 E(local_recei)72 144 Q -.15(ve)-.25 G(r_include\(*,G,I\)).15 E F0 11
(.....................)8.86 G F1(14)6.5 E(local_recei)72 156 Q -.15(ve)
-.25 G(r_include\(S,G,I\)).15 E F0 11(.....................)8.3 G F1(14)
6.5 E(lost_assert\(*,G\))72 168 Q F0 11(.........................)8.15 G
F2(15)-18.5 E F1(,53,54)A(lost_assert\(*,G,I\))72 180 Q F0 11
(.........................)2.32 G F1(14,15,)-18.5 E F2(63)A F1
(lost_assert\(S,G\))72 192 Q F0 11(.........................)7.59 G F2
(15)6.5 E F1(lost_assert\(S,G,I\))72 204 Q F0 11
(.........................)1.76 G F1(14,15,)-18.5 E F2(63)A F1
(lost_assert\(S,G,rpt\))72 216 Q F0 11(........................)7.73 G
F2(15)6.5 E F1(lost_assert\(S,G,rpt,I\))72 228 Q F0 11
(........................)1.9 G F1(15,)-6 E F2(62)A F1(MBGP)72 240 Q F0
11(............................)2.16 G F1(5)11.5 E(MRIB)72 252 Q F0 11
(............................)4.94 G F1(5)11.5 E(MRIB.ne)72 264 Q
(xt_hop\(host\))-.15 E F0 11(.......................)10.79 G F1(16)6.5 E
(my_assert_metric\(S,G,I\))72 276 Q F0 11(.......................).38 G
F2(61)6.5 E F1(NL)72 288 Q(T\(N,I\))-.92 E F0 11
(...........................)6.02 G F1(10,86)-6 E -.4(OT)72 300 S
(\(S,G,rpt\)).4 E F0 11(..........................)9.52 G F1(13,87)-6 E
(Ov)72 312 Q(erride_Interv)-.15 E(al)-.25 E F0 11
(.........................).51 G F1(85)6.5 E(Ov)72 324 Q(erride_Interv)
-.15 E(al\(I\))-.25 E F0 11(........................)4.27 G F2(68)6.5 E
F1(pack)72 336 Q(et_arri)-.1 E -.15(ve)-.25 G(s_on_rp_tunnel\(pkt\)).15
E F0 11(....................)4.92 G F2(23)6.5 E F1(pim_e)72 348 Q
(xclude\(S,G\))-.15 E F0 11(........................)12.05 G F2(14)-18.5
E F1(,53,54)A(pim_include\(*,G\))72 360 Q F0 11
(.........................).37 G F2(14)-31 E F1(,53,54,58)A
(pim_include\(S,G\))72 372 Q F0 11(........................)13.56 G F2
(14)-6 E F1(,53)A(PPT\(*,*,RP)72 384 Q(,I\))-1.11 E F0 11
(..........................)2.16 G F1(10,24,86)-18.5 E(PPT\(*,G,I\))72
396 Q F0 11(..........................)13.56 G F1(11,27,86)-18.5 E
(PPT\(S,G,I\))72 408 Q F0 11(..........................)13 G F1
(11,30,86)-18.5 E(PPT\(S,G,rpt,I\))72 420 Q F0 11
(.........................)13.14 G F1(13,33,86)-18.5 E(Propag)72 432 Q
(ation_Delay)-.05 E F0 11(........................)8.34 G F1(85)6.5 E
(Propag)72 444 Q(ation_Delay\(I\))-.05 E F0 11(.......................)
12.1 G F2(67)6.5 E F1(PruneDesired\(S,G,rpt\))72 456 Q F0 11
(.......................)9.27 G F1(49,50)-6 E(prunes\(S,G,rpt\))72 468 Q
F0 11(.........................)9.54 G F2(15)-18.5 E F1(,53,54)A(Re)72
480 Q(gisterStop)-.15 E F0 11(..........................)6.48 G F1(7)
11.5 E(Re)72 492 Q(gisterStop\(*,G\))-.15 E F0 11
(........................)12.6 G F1(22)6.5 E(Re)72 504 Q
(gisterStop\(S,G\))-.15 E F0 11(........................)12.04 G F1(23)
6.5 E(Re)72 516 Q(gisterStop_timer)-.15 E F0 11
(........................)7.87 G F1(20)6.5 E(Re)72 528 Q(gister_Probe_T)
-.15 E(ime)-.35 E F0 11(.......................)11.98 G F1(21,24,88)
-18.5 E(Re)72 540 Q(gister_Suppression_T)-.15 E(ime)-.35 E F0 11
(......................).17 G F1(21,24,88,88)-31 E(RP\(G\))72 552 Q F0
11(............................)4.39 G F1(16,58,58)-18.5 E(RPF'\(*,G\))
72 564 Q F0 11(...........................)1.75 G F2(16)-18.5 E F1
(,19,47)A(RPF'\(S,G\))72 576 Q F0 11(...........................)1.19 G
F2(16)-18.5 E F1(,19,47)A(RPF'\(S,G,rpt\))72 588 Q F0 11
(..........................)1.33 G F2(16)-18.5 E F1(,47,50)A(RPF_interf)
72 600 Q(ace)-.1 E F0 11(..........................).33 G F1(58)6.5 E
(RPF_interf)72 612 Q(ace\(host\))-.1 E F0 11(........................)
4.5 G F1(16,17,19,21,54,58,62)-68.5 E(RPTJoinDesired\(G\))72 624 Q F0 11
(........................)5.51 G F1(49,51,58)-18.5 E
(rpt_assert_metric\(G,I\))72 636 Q F0 11(.......................)10.11 G
F2(62)6.5 E F1(RST\(S,G\))72 648 Q F0 11(...........................)
3.97 G F1(20,88)-6 E(SPTbit\(S,G\))72 660 Q F0 11
(..........................)8.27 G F1(17,19,23,47,53,54,61)-68.5 E
(spt_assert_metric\(S,I\))72 672 Q F0 11(.......................)11.21 G
F1(56,)-6 E F2(61)A F1(SSM)72 684 Q F0 11(............................)
10.49 G F1(70)6.5 E(Suppression_State\(I\))72 696 Q F0 11
(........................)1.62 G F2(68)6.5 E F1(SwitchT)72 708 Q
(oSptDesired\(S,G\))-.8 E F0 11(......................)8.53 G F2(18)6.5
E F1 -.35(Tr)72 720 S(iggered_Hello_Delay).35 E F0 11
(.......................)4.07 G F1(86)6.5 E F0(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 171.971(elas Section)-.165 F 2.75
(10. [P)2.75 F(age 95])-.165 E EP
%%Page: 96 96
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(INTERNET)72 49 Q 71.587(-DRAFT Expires:)-1.012 F
(January 2002)2.75 E(July 2001)123.726 E/F1 10/Times-Roman@0 SF(t_o)72
84 Q -.15(ve)-.15 G(rride).15 E F0 11(...........................)3.45 G
F1(38,41,87)-18.5 E(t_periodic)72 96 Q F0 11
(...........................)3.7 G F1(38,41,87)-18.5 E(t_po)72 108 Q F0
11(............................)12.72 G F1(49,87)-6 E(t_suppressed)72
120 Q F0 11(..........................)6.34 G F1(38,41,87)-18.5 E
(Update_SPTbit\(S,G,iif\))72 132 Q F0 11(.......................)4.25 G
/F2 10/Times-Bold@0 SF(19)6.5 E F1(UpstreamJPState\(S,G\))72 144 Q F0 11
(.......................)8.98 G F1(17)6.5 E F0(Fenner/Handle)72 769 Q
(y/Holbrook/K)-.165 E(ouv)-.385 E 171.971(elas Section)-.165 F 2.75
(10. [P)2.75 F(age 96])-.165 E EP
%%Trailer
end
%%EOF
